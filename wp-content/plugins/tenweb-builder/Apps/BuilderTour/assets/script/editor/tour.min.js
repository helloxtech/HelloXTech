class BuilderTour{constructor(){this.TourSteps=tour_data.tour_content_variables,this.init()}init(){let e=this;jQuery(document).on("click",".twbb-tour-guide__button-done",(function(t){t.preventDefault(),jQuery(".twbb-tour-guide__button").hasClass("twbb-tour-guide__button-disabled")||(e.twbbDestroyTour(),"passed"!==tour_data.tour_status&&e.statusAjax("passed"))})),jQuery(document).on("click",".twbb-tour-guide__button-next",(function(t){t.preventDefault(),jQuery(".twbb-tour-guide__button").hasClass("twbb-tour-guide__button-disabled")||(jQuery(".twbb-tour-guide__button").addClass("twbb-tour-guide__button-disabled"),jQuery(this).text(""),jQuery(this).addClass("twbb-tour-guide__button-loading"),jQuery(".twbb-tour-guide__button-loading").append("<span></span>"),e.callTheStep(jQuery(t.target),"add"))})),jQuery(document).on("click",".twbb-tour-guide__button-back",(function(t){t.preventDefault(),jQuery(".twbb-tour-guide__button").hasClass("twbb-tour-guide__button-disabled")||(jQuery(".twbb-tour-guide__button").addClass("twbb-tour-guide__button-disabled"),jQuery(this).text(""),jQuery(this).addClass("twbb-tour-guide__button-loading"),jQuery(".twbb-tour-guide__button-loading").append("<span></span>"),e.callTheStep(jQuery(t.target),"sub"))})),jQuery(document).on("click",".twbb-tour-guide__button-stop",(function(){analyticsDataPush("Remind me later","Editor Tour"),e.twbbDestroyTour(),"passed"!==tour_data.tour_status&&e.statusAjax("not_passed")})),jQuery(document).on("click",".twbb-tour-guide__video",(function(){e.zoomInVideo()})),jQuery(document).on("click",".twbb-tour-main-overlay.twbb-tour-guide",(function(t){t.target===t.currentTarget&&e.zoomOutVideo()})),jQuery(document).on("click",".twbb-start_tour-send-ga",(function(){analyticsDataPush("Get Started","Editor Tour")}))}twbbStartTour(){if(!jQuery(".twbb-tour-guide__container").length){let e=jQuery("#twbb-editor-tour-template").html();jQuery("body").append(e)}if("passed"!==tour_data.tour_status&&this.statusAjax("started"),"none"!==jQuery("#elementor-panel-header-kit-close").css("display")&&jQuery("#elementor-panel-header-kit-close").trigger("click"),jQuery(".MuiToolbar-root .MuiBox-root .MuiGrid-root:first-child .MuiStack-root:eq(1) .MuiBox-root:first-child button").trigger("click"),"none"!==jQuery("#elementor-navigator").css("display")){jQuery(".MuiToolbar-root .MuiBox-root .MuiGrid-root:eq(1) .MuiStack-root:eq(1) .MuiBox-root:eq(2) button").trigger("click")}this[this.TourSteps[0].actionFunction]()}getStarted(){"none"!==jQuery("#elementor-panel-header-kit-close").css("display")&&jQuery("#elementor-panel-header-kit-close").trigger("click"),this.tourGuide("0"),jQuery("body").addClass("twbb-tour-body-class"),jQuery(document).find(".twbb-copilot-header-minimize").is(":visible")&&jQuery(document).find(".twbb-copilot-header-minimize").trigger("click"),jQuery("#elementor-editor-wrapper-v2 header").addClass("twbb-change-bg-color"),jQuery("#elementor-preview-iframe").contents().find("body").addClass("twbb-height-auto"),jQuery("#elementor-preview-iframe").contents().find("body").prepend('<div class="twbb-tour-overlay-preview-part"></div>'),jQuery("#elementor-preview-iframe").contents().find("body").css("min-height","1000px").append('<div class="twbb-just-for-body-height" style="height: 1000px"></div>'),jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(3) > div:eq(1) button").css("opacity","30%")}sectionGeneration(){jQuery("#elementor-preview-iframe").contents().find("html, body").animate({scrollTop:0},200),jQuery("body").addClass("twbb-highligted-settings"),jQuery("#elementor-editor-wrapper-v2 .twbb-sg-header-button-container").addClass("twbb-highlighted-header-part").trigger("click"),jQuery("#elementor-editor-wrapper-v2 .twbb-sg-sidebar").addClass("twbb-highlighted-header-part")}destroy_sectionGeneration(){return jQuery("#elementor-preview-iframe").contents().find("html, body").animate({scrollTop:0},200),jQuery("body").removeClass("twbb-highligted-settings"),jQuery("#elementor-editor-wrapper-v2 .twbb-sg-header-button-container").removeClass("twbb-highlighted-header-part"),jQuery("#elementor-editor-wrapper-v2 .twbb-sg-sidebar").removeClass("twbb-highlighted-header-part"),jQuery(document).find(".twbb-sg-sidebar-opened").length&&twbb_animate_sidebar("close",jQuery(".twbb-sg-sidebar"),522,"twbb-sg-sidebar-opened",twbb_close_section_generation),!0}quickEdit(){let e=jQuery("#elementor-preview-iframe").contents().find(".elementor-edit-area-active .elementor-widget-text-editor").eq(0),t="text_editor";if(0==e.length&&(e=jQuery("#elementor-preview-iframe").contents().find(".elementor-edit-area-active .elementor-widget-heading").eq(0),t="heading"),0==e.length)jQuery(".elementor-element-wrapper").each((function(){if("text editor"==jQuery(this).find(".title").text().toLowerCase())return jQuery(this).addClass("twbb-widget-highlighted"),!1}));else{let r=e.height(),i=e.offset().left,o=e.width(),u=e.offset().top,n=120;u>n?jQuery("#elementor-preview-iframe").contents().find("html, body").animate({scrollTop:u-n},200):n=u,"text_editor"==t?jQuery("#elementor-preview-iframe").contents().find(".elementor-edit-area-active .elementor-widget-text-editor").trigger("click"):"heading"==t&&jQuery("#elementor-preview-iframe").contents().find(".elementor-edit-area-active .elementor-widget-heading").trigger("click"),this.drawOverlayHighlighted(o,i,r,n),e.addClass("twbb-highlighted-element")}}destroy_quickEdit(){let e=jQuery(".MuiToolbar-root .MuiBox-root .MuiGrid-root:first-child .MuiStack-root:eq(1) .MuiBox-root:first-child button");return 0==jQuery(".twbb-widget-highlighted").length&&0==jQuery("#elementor-preview-iframe").contents().find(".twbb-highlighted-element").length&&0==jQuery("#elementor-preview-iframe ").contents().find(".twbb-tour-preview-highlighted-part").length&&0==e.attr("tabindex")||(jQuery(".twbb-widget-highlighted").removeClass("twbb-widget-highlighted"),jQuery("#elementor-preview-iframe").contents().find(".twbb-highlighted-element").removeClass("twbb-highlighted-element"),e.trigger("click"),jQuery("#elementor-preview-iframe ").contents().find(".twbb-tour-preview-highlighted-part").remove(),!1)}containerSection(){let e=jQuery("#elementor-preview-iframe").contents().find(".elementor-edit-area-active #elementor-add-new-section");e.addClass("twbb-highlighted-element");let t=e.height(),r=e.offset().left,i=e.width(),o=e.offset().top,u=208;o>u?jQuery("#elementor-preview-iframe").contents().find("html, body").animate({scrollTop:o-u},200):u=o,jQuery("#elementor-panel-category-layout").addClass("twbb-containers-highlighted"),this.drawOverlayHighlighted(i+20,r,t,u)}destroy_containerSection(){return 0==jQuery("#elementor-preview-iframe").contents().find(".twbb-highlighted-element").length&&0==jQuery("#elementor-panel-category-layout.twbb-containers-highlighted").length&&0==jQuery("#elementor-preview-iframe ").contents().find(".twbb-tour-preview-highlighted-part").length||(jQuery("#elementor-preview-iframe").contents().find(".twbb-highlighted-element").removeClass("twbb-highlighted-element"),jQuery("#elementor-panel-category-layout").removeClass("twbb-containers-highlighted"),jQuery("#elementor-preview-iframe ").contents().find(".twbb-tour-preview-highlighted-part").remove(),!1)}visualElement(){var e=this;setTimeout((function(){jQuery("#elementor-preview-iframe").contents().find(".elementor-add-section-button").trigger("click");let t=jQuery("#elementor-preview-iframe").contents().find(".elementor-edit-area-active #elementor-add-new-section");t.addClass("twbb-highlighted-element");let r=t.height(),i=t.offset().left,o=t.width(),u=jQuery("#elementor-preview-iframe").contents().find(".elementor-edit-area-active #elementor-add-new-section").offset().top,n=208;u>n?jQuery("#elementor-preview-iframe").contents().find("html, body").animate({scrollTop:u-n},100):n=u,setTimeout((function(){jQuery("#elementor-panel-category-basic").addClass("twbb-containers-highlighted"),e.drawOverlayHighlighted(o+20,i,r,n)}),50)}),100)}destroy_visualElement(){return"none"==jQuery("#elementor-preview-iframe").contents().find(".elementor-edit-area-active .elementor-add-section-close").css("display")&&0==jQuery("#elementor-panel-category-basic.twbb-containers-highlighted").length&&0==jQuery("#elementor-preview-iframe").contents().find(".twbb-highlighted-element").length&&0==jQuery("#elementor-preview-iframe ").contents().find(".twbb-tour-preview-highlighted-part").length||(jQuery("#elementor-preview-iframe").contents().find(".elementor-edit-area-active .elementor-add-section-close").trigger("click"),jQuery("#elementor-panel-category-basic").removeClass("twbb-containers-highlighted"),jQuery("#elementor-preview-iframe ").contents().find(".twbb-tour-preview-highlighted-part").remove(),jQuery("#elementor-preview-iframe").contents().find(".twbb-highlighted-element").removeClass("twbb-highlighted-element"),!1)}responsiveness(){jQuery("#elementor-preview-iframe").contents().find("html, body").animate({scrollTop:0},200),jQuery('#elementor-editor-wrapper-v2 div[aria-label="Switch Device"] button:nth-child(3)').trigger("click"),jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(2) button").eq(0).trigger("click"),setTimeout((function(){jQuery("#elementor-v2-top-bar-recently-edited .MuiList-root").css("background-color","#0B0D0D"),jQuery(".MuiList-root .twbb_website_structure_top_bar .twbb_sub_menu .title.site_menu").addClass("active"),jQuery(".MuiList-root .twbb_website_structure_top_bar .twbb_sub_menu .title.site_menu .title_container").removeClass("closed"),jQuery(".MuiList-root .twbb_website_structure_top_bar .twbb_sub_menu .title.site_menu .title_container").addClass("opened"),jQuery("#elementor-v2-top-bar-recently-edited .MuiPaper-root ").addClass("twbb-highlighted-mui-paper").css("left","350px"),jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(2)>div").addClass("twbb-highlighted-header-part")}),50)}destroy_responsiveness(){return 0==jQuery(".MuiBackdrop-root.MuiBackdrop-invisible").length&&"0"==jQuery('#elementor-editor-wrapper-v2 div[aria-label="Switch Device"] button:nth-child(1)').attr("tabindex")&&0==jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(2)>div.twbb-highlighted-header-part").length&&0==jQuery("#elementor-v2-top-bar-recently-edited .MuiPaper-root.twbb-highlighted-mui-paper").length||(jQuery(".MuiBackdrop-root.MuiBackdrop-invisible").trigger("click"),jQuery('#elementor-editor-wrapper-v2 div[aria-label="Switch Device"] button:nth-child(1)').trigger("click"),jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(2)>div").removeClass("twbb-highlighted-header-part"),jQuery("#elementor-v2-top-bar-recently-edited .MuiPaper-root ").removeClass("twbb-highlighted-mui-paper"),!1)}globalStyles(){jQuery("#elementor-preview-iframe").contents().find("html, body").animate({scrollTop:0},200),jQuery("body").addClass("twbb-highligted-settings"),jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(1)>div:nth-child(3)").addClass("twbb-highlighted-header-part"),jQuery(".twbb-customize-button").length>0&&(jQuery(".twbb-customize-button").trigger("click"),jQuery(".twbb-customize-button").addClass("twbb-theme-tour"),jQuery(".twbb-customize-container").addClass("twbb-highlighted-mui-paper"))}destroy_globalStyles(){if(jQuery(".twbb-customize-layout .twbb-theme-customize-container").length>0)return this.destroy_globalStyles_ultimate()}destroy_globalStyles_ultimate(){return 0==jQuery(".twbb-customize-button.selected").length&&0==jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(1)>div:nth-child(3).twbb-highlighted-header-part").length||(jQuery(".twbb-customize-layout .twbb-theme-customize-container").length>0&&jQuery(".twbb-customize-button").trigger("click"),jQuery("body").removeClass("twbb-highligted-settings"),jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(1)>div:nth-child(3)").removeClass("twbb-highlighted-header-part"),!1)}publishWebsite(){jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(3) > div:eq(1) span button").trigger("click"),setTimeout((function(){jQuery("#document-save-options .MuiPaper-root").addClass("twbb-highlighted-mui-paper")}),30),jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(3) > div:eq(1)").addClass("twbb-highlighted-header-part"),jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(3) > div:eq(1) button").css("opacity","1")}destroy_publishWebsite(){return 0==jQuery("#document-save-options .MuiPaper-root.twbb-highlighted-mui-paper").length&&0==jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(3) > div:eq(1).twbb-highlighted-header-part").length&&.3==jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(3) > div:eq(1) button").css("opacity")||(jQuery("#document-save-options .MuiPaper-root").removeClass("twbb-highlighted-mui-paper"),jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(3) > div:eq(1)").removeClass("twbb-highlighted-header-part"),jQuery(".MuiBackdrop-root.MuiBackdrop-invisible").trigger("click"),jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(3) > div:eq(1) button").css("opacity","30%"),!1)}twbbDestroyTour(){let e=this.TourSteps.all_steps_count;if("function"==typeof this["destroy_"+this.TourSteps[e].actionFunction]&&this["destroy_"+this.TourSteps[e].actionFunction](),jQuery("body").removeClass("twbb-tour-body-class"),jQuery("#elementor-preview-iframe").contents().find(".twbb-tour-overlay-preview-part").remove(),jQuery("#elementor-preview-iframe").contents().find("body .twbb-just-for-body-height").remove(),jQuery("#elementor-editor-wrapper-v2 header").removeClass("twbb-change-bg-color"),jQuery("#elementor-editor-wrapper-v2 .MuiGrid-root:nth-child(3) > div:eq(1) button").css("opacity","1"),"none"===jQuery("#elementor-navigator").css("display")){jQuery(".MuiToolbar-root .MuiBox-root .MuiGrid-root:eq(1) .MuiStack-root:eq(1) .MuiBox-root:eq(2) button").trigger("click")}}tourGuide(e){let t=this.TourSteps[e];if(jQuery(".twbb-tour-guide__container").attr("data-step",e),0==e?(jQuery(".twbb-tour-guide__steps").text(""),jQuery(".twbb-tour-guide__description").css("padding-left","0")):(jQuery(".twbb-tour-guide__steps").text("Step "+e+"/"+this.TourSteps.all_steps_count),jQuery(".twbb-tour-guide__description").attr("class","twbb-tour-guide__description twbb-tour-guide-desc__special"),jQuery(".twbb-tour-guide__description").css("padding-left","26px")),""!==t.video_link)if(0==e?jQuery(".twbb-tour-guide__video").css("background-color","rgb(50,54,56)"):jQuery(".twbb-tour-guide__video").css("background-color","#ffffff"),""!==t.poster_link?jQuery(".twbb-tour-guide__video video").attr("poster",t.poster_link):jQuery(".twbb-tour-guide__video video").attr("poster",""),jQuery(".twbb-tour-guide__video video source").length>0)jQuery(".twbb-tour-guide__video video").attr("src",t.video_link),jQuery(".twbb-tour-guide__video video").get(0).load(),jQuery(".twbb-tour-guide__video video").get(0).play();else{let e=jQuery("<source>");e.attr("src",t.video_link),e.attr("type","video/mp4"),jQuery(".twbb-tour-guide__video video").append(e),jQuery(".twbb-tour-guide__video").css("display","inline-block"),jQuery(".twbb-tour-guide__video video").get(0).load(),jQuery(".twbb-tour-guide__video video").get(0).play()}else jQuery(".twbb-tour-guide__video video").empty(),jQuery(".twbb-tour-guide__video").css("display","none");""!==t.title&&jQuery(".twbb-tour-guide__title").text(t.title).attr("class","twbb-tour-guide__title "+t.icon),""!==t.description&&jQuery(".twbb-tour-guide__description").html(t.description),""!==t.buttons&&jQuery(".twbb-tour-guide__buttons").attr("class",t.buttons.class),""!==t.buttons.buttonLeft&&(jQuery(".twbb-tour-guide__left_button").html(),jQuery(".twbb-tour-guide__left_button").text(t.buttons.buttonLeft.text).attr("class","twbb-tour-guide__button twbb-tour-guide__left_button "+t.buttons.buttonLeft.classes)),""!==t.buttons.buttonRight&&(jQuery(".twbb-tour-guide__left_button").html(),jQuery(".twbb-tour-guide__right_button").text(t.buttons.buttonRight.text).attr("class","twbb-tour-guide__button twbb-tour-guide__right_button "+t.buttons.buttonRight.classes))}drawOverlayHighlighted(e,t,r,i){jQuery("#elementor-preview-iframe ").contents().find(".twbb-tour-overlay-preview-part").prepend('<div class="twbb-tour-preview-highlighted-part" style="width:'+e+"px;left:"+t+"px;height:"+(r+24)+"px;background-position:"+(e-25)+"px;top:"+i+'px;"></div>')}callTheStep(e,t){let r,i=this,o=e.closest(".twbb-tour-guide__container").attr("data-step");if(r="add"==t?parseInt(o)+1:parseInt(o)-1,"function"==typeof this["destroy_"+this.TourSteps[o].actionFunction])var u=setInterval((function(){i["destroy_"+i.TourSteps[o].actionFunction]()?(clearInterval(u),i[i.TourSteps[r].actionFunction](),i.tourGuide(r)):i["destroy_"+i.TourSteps[o].actionFunction]()}),20);else this[this.TourSteps[r].actionFunction](),this.tourGuide(r)}statusAjax(e){jQuery.ajax({type:"POST",url:tour_data.ajaxurl,dataType:"json",data:{tour_status:e,action:"twbb_update_tour_status",nonce:tour_data.nonce}}).success((function(t){!0===t.success&&console.log('Tour Status Updated to "'+e+'"')})).error((function(){console.log("Tour Status Not Updated due to some error")}))}zoomInVideo(){jQuery(".twbb-tour-guide__video").hasClass("twbb-tour-guide__video-zoomed")||(jQuery(".twbb-tour-guide__video video").attr("width",616).attr("height",344).attr("controls","controls"),jQuery(".twbb-tour-guide__video").addClass("twbb-tour-guide__video-zoomed"),jQuery(".twbb-tour-guide__video video").get(0).load(),jQuery(".twbb-tour-guide__video video").get(0).play())}zoomOutVideo(){jQuery(".twbb-tour-guide__video").hasClass("twbb-tour-guide__video-zoomed")&&(jQuery(".twbb-tour-guide__video").removeClass("twbb-tour-guide__video-zoomed"),jQuery(".twbb-tour-guide__video video").attr("width",310).attr("height",170).removeAttr("controls"),jQuery(".twbb-tour-guide__video video").get(0).load(),jQuery(".twbb-tour-guide__video video").get(0).play())}}