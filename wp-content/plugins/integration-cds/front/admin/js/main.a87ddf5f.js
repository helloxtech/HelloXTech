(function(t){function e(e){for(var i,o,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,o=1;o<s.length;o++){var l=s[o];0!==a[l]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},a={main:0},n=[];function o(t){return r.p+"js/"+({}[t]||t)+"."+{"chunk-0b65ffb6":"0581547d","chunk-2d0a3196":"2767fb51","chunk-2d0a3577":"d49dd877","chunk-2d0a40c8":"9d44158a","chunk-2d0a43df":"01950eda","chunk-2d0aa90c":"da8bb1b7","chunk-2d0aab07":"7d89f0aa","chunk-2d0abc00":"c87aa4af","chunk-2d0ae937":"e9d597f6","chunk-2d0aeb45":"30e41831","chunk-2d0af08c":"8bfc3337","chunk-2d0afa49":"8be77e90","chunk-2d0b2762":"9a3ef9c1","chunk-2d0b6187":"bb482c4a","chunk-2d0ba136":"f4db86fb","chunk-2d0bb267":"3b653658","chunk-2d0bcec1":"f4b0cdc8","chunk-2d0bdf38":"4e0f5394","chunk-2d0bff92":"61ff6812","chunk-2d0c0494":"8d2a802b","chunk-2d0c0a09":"4f675a04","chunk-2d0c4313":"44c897a0","chunk-2d0c46d1":"e54af410","chunk-2d0c512b":"13860129","chunk-2d0c86e3":"cafb52de","chunk-2d0cf16e":"d2fd45c4","chunk-2d0d056d":"5f8e5612","chunk-2d0d0645":"5a3cc879","chunk-2d0d2f22":"3a8b0702","chunk-2d0d61fd":"e655ebd2","chunk-2d0d7e63":"211649e0","chunk-2d0dda4e":"c83fb4ec","chunk-2d0de971":"737087c5","chunk-2d0e1b57":"410577ab","chunk-2d0e1fbe":"fb479130","chunk-2d0e22d6":"655d1080","chunk-2d0e4fe5":"80bff59d","chunk-2d0e542a":"d4c2210e","chunk-2d0e57ec":"abe5dc3a","chunk-2d0e6553":"1db13875","chunk-2d0e6c86":"7aa1aee7","chunk-2d0ea098":"1c1a63b4","chunk-2d0f0a11":"a12b9a60","chunk-2d208ac5":"1b947dcc","chunk-2d209408":"37ced34d","chunk-2d20f745":"b79ac6a5","chunk-2d20ff23":"9aa317e8","chunk-2d2138c7":"09676ac5","chunk-2d216f3b":"06a226d7","chunk-2d217e5b":"f64c3699","chunk-2d21b84a":"7ee44ed7","chunk-2d21dcd2":"a87cc32c","chunk-2d21f327":"d4a7a131","chunk-2d2214b3":"09d0507d","chunk-2d221799":"9ae3b728","chunk-2d221814":"c6889716","chunk-2d221a34":"a72781ab","chunk-2d22502a":"82ddfe1a","chunk-2d226775":"f405ccaa","chunk-2d229411":"2f4d293d","chunk-2d2295e9":"ce277453","chunk-2d22c171":"dbd4c691","chunk-2d22c2b8":"29707b7f","chunk-2d22ca58":"8bd185bb","chunk-2d2311f7":"aae84ba6","chunk-2d237ee7":"532c2ff8","chunk-2d238465":"223c7726","chunk-30597b4a":"1f4d1e00","chunk-7532b3ea":"7dae515a","chunk-e13e4362":"3e9684d3"}[t]+".js"}function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.e=function(t){var e=[],s=a[t];if(0!==s)if(s)e.push(s[2]);else{var i=new Promise((function(e,i){s=a[t]=[e,i]}));e.push(s[2]=i);var n,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=o(t);var c=new Error;n=function(e){l.onerror=l.onload=null,clearTimeout(d);var s=a[t];if(0!==s){if(s){var i=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",c.name="ChunkLoadError",c.type=i,c.request=n,s[1](c)}a[t]=void 0}};var d=setTimeout((function(){n({type:"timeout",target:l})}),12e4);l.onerror=l.onload=n,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="wp-content/plugins/integration-cds/front/admin/",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var u=c;n.push(["eb59","chunk-vendors"]),s()})({"0212":function(t,e,s){},"0b84":function(t,e,s){"use strict";s("a13d")},"0cd1":function(t,e,s){"use strict";s("6389")},"225b":function(t,e,s){},"26b9":function(t,e,s){"use strict";s("9d84")},"2a5d":function(t,e,s){},"2b5f":function(t,e,s){"use strict";s("0212")},"30f5":function(t,e,s){"use strict";s("e54e")},"31a2":function(t,e,s){"use strict";s("9a52")},4126:function(t,e,s){"use strict";s("76f8")},"4c37":function(t,e,s){},"4d12":function(t,e,s){},"5c3d":function(t,e,s){t.exports=s.p+"img/spinner.dd5dc5ec.svg"},"5f10":function(t,e,s){"use strict";s("2a5d")},6389:function(t,e,s){},6980:function(t,e,s){},"76f8":function(t,e,s){},7703:function(t,e,s){"use strict";s("d6e2")},"7a57":function(t,e,s){"use strict";s("b161")},"7a5a":function(t,e,s){},"88b8":function(t,e,s){"use strict";s("6980")},"8abc":function(t,e,s){},"96d5":function(t,e,s){"use strict";s("4c37")},"975f":function(t,e,s){},"99f9":function(t,e,s){"use strict";s("a7c1")},"9a52":function(t,e,s){},"9ad3":function(t,e,s){"use strict";s("ad1a")},"9d84":function(t,e,s){},a13d:function(t,e,s){},a4e1:function(t,e,s){"use strict";s("4d12")},a7c1:function(t,e,s){},aa11:function(t,e,s){"use strict";s("fb4a")},ad1a:function(t,e,s){},b161:function(t,e,s){},b99c:function(t,e,s){"use strict";s("975f")},bd33:function(t,e,s){},cad7:function(t,e,s){"use strict";s("7a5a")},d124:function(t,e,s){"use strict";s("bd33")},d689:function(t,e,s){"use strict";s("8abc")},d6e2:function(t,e,s){},d6f2:function(t,e,s){},d795:function(t,e,s){"use strict";s("e0a2")},e066:function(t,e,s){"use strict";s("225b")},e0a2:function(t,e,s){},e54e:function(t,e,s){},eb59:function(t,e,s){"use strict";s.r(e);var i={};s.r(i),s.d(i,"status",(function(){return mp})),s.d(i,"connection",(function(){return pp})),s.d(i,"cache",(function(){return gp})),s.d(i,"forms",(function(){return hp})),s.d(i,"formsGlobalSettings",(function(){return fp})),s.d(i,"templates",(function(){return vp})),s.d(i,"fetchXmlTemplates",(function(){return _p})),s.d(i,"binding",(function(){return bp})),s.d(i,"userBinding",(function(){return yp})),s.d(i,"webhooks",(function(){return Cp})),s.d(i,"recaptcha",(function(){return Sp})),s.d(i,"importExport",(function(){return wp})),s.d(i,"settings",(function(){return kp})),s.d(i,"addons",(function(){return xp})),s.d(i,"about",(function(){return Tp}));var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-100",attrs:{id:"app"}},[s("div",{staticClass:"d-flex flex-column h-100 bg-white"},[s("div",{staticClass:"container-fluid flex-shrink-0"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"d-flex align-items-center"},[s("h1",{staticClass:"font-weight-light"},[t._v(" Dataverse Integration ")]),s("ConnectionNavItem",{staticClass:"ml-4"})],1),s("div",{staticClass:"row flex-nowrap main-row"},[s("div",{staticClass:"d-flex flexbox-column"},[s("Navigation")],1),s("div",{staticClass:"d-flex flexbox-column flex-grow-1"},[s("div",{staticClass:"settings-tab p-3 bg-white"},[t.isOnline?[t.premiumInfo.isPremiumInstalled||!t.isSolutionInstalled||t.isPremiumDismissed?t.isSolutionInstalled||t.premiumInfo.isPremiumInstalled||t.isSolutionDismissed?t._e():s("div",{staticClass:"alert alert-info alert-dismissible",attrs:{role:"alert"}},[t._v(" Thank you for using the free version of Dataverse Integration. Try our "),s("a",{staticClass:"alert-link",attrs:{href:t.premiumInfo.solutionUrl,target:"_blank"}},[t._v("Power Platform solution")]),t._v(" to unlock more exciting features. "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:t.dismissSolution}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]):s("div",{staticClass:"alert alert-info alert-dismissible",attrs:{role:"alert"}},[t._v(" Thank you for using the free version of Dataverse Integration. "),s("a",{staticClass:"alert-link",attrs:{href:t.premiumInfo.premiumInstallUrl}},[t._v("Download & install")]),t._v(" the premium add-on to unlock more exciting features. "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:t.dismissPremium}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t.hasPremiumErrors?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},t._l(t.premiumErrors,(function(e,i){return s("span",{key:i},[t._v(" "+t._s(e.message)+" ")])})),0):t._e(),t.hasRequirementsErrors?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},t._l(t.requirementsErrors,(function(e,i){return s("span",{key:"reqError_"+i},[t._v(" "+t._s(e)+" ")])})),0):t._e()]:t._e(),t.activePanel?s("form",[s("keep-alive",[s(t.activePanel,{tag:"component",attrs:{meta:t.activeComponent}})],1)],1):[s("div",{staticClass:"alert alert-danger"},[t._v(" The component doesn't implement the main settings panel. Please report to developers. ")])]],2)])])])])])]),s("MessageService")],1)},o=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sidebar-menu",{key:t.licenseStatus,attrs:{menu:t.menuFiltered,collapsed:t.collapsed,theme:"white-theme","width-collapsed":"46px"},on:{"item-click":t.onItemClick,"toggle-collapse":t.onToggleCollapse},scopedSlots:t._u([{key:"toggle-icon",fn:function(){return[t.collapsed?s("fa",{attrs:{icon:"arrow-right"}}):s("fa",{attrs:{icon:"arrow-left"}})]},proxy:!0},{key:"dropdown-icon",fn:function(t){var e=t.isOpen;return[s("span",e?[s("fa",{attrs:{icon:"caret-left"}})]:[s("fa",{attrs:{icon:"caret-right"}})],1)]}}])})},l=[],c=(s("caad"),s("14d9"),s("e9f5"),s("910d"),s("ab43"),s("ddb0"),s("2f62")),d=s("4776"),u=(s("b15b"),s("6cd4")),m=s.n(u),p=s("bc3a"),g=s.n(p),h=s("1a8c"),f=s.n(h);const v=window.icdsAPIDefaults,_="integration-cds/v1",b="integration-cds/v2";function y(t){let e=v.endpointBaseUrl;"/"===e.substr(-1)&&(e=e.substr(0,e.length-1));let s=g.a.create({baseURL:[e,t||_].join("/"),withCredentials:!0,headers:{"Content-Type":"application/json","X-WP-Nonce":v.nonce},responseType:"json"});return s.interceptors.response.use(t=>t,t=>Promise.reject(new C(t))),s}class C{constructor(t){if(this.originalError=t,t.response){let e=t.response.data;f()(e)||(e={}),this.httpStatus=t.response.status,this.code=e.code,this.message=e.message,this.data=e.data}else this.message=t.message;const e=t.config.method+"";if(405!==this.httpStatus||this.message){if(!this.message){const s=t.config.url;this.message=`Unknown error (${this.httpStatus} / ${e.toUpperCase()} "${s}")`}}else this.message=`HTTP ${e.toUpperCase()} forbidden by the web server. Please check configuration.`}}const S=()=>y(b);var w=y;const k="REGISTERED",x="NOT_REGISTERED",T="CHECKING",N="RetrieveForms",P="AuthorizeUser",F={namespaced:!0,state:{status:T,details:{},error:null},getters:{},mutations:{updateStatus(t,{status:e,details:s,error:i}){t.status=e,t.details=s,t.error=i}},actions:{refresh({commit:t}){return t("updateStatus",{status:T,details:{},error:null}),w().get("license_status").then(e=>{t("updateStatus",{status:e.data.status?k:x,details:e.data.details,error:null})}).catch(e=>{t("updateStatus",{status:x,details:{},error:e.message})})}}};var A=F;const D=window.icdsWp;var E={name:"Navigation",components:{SidebarMenu:d["SidebarMenu"]},data(){return{menu:[],collapsed:!1}},computed:{...Object(c["c"])({activeComponent:"components/active",orderedItems:"components/ordered",navItems:"components/navItems",components:"components/components"}),...Object(c["e"])({licenseStatus:t=>t.licenseStatus.status,licenseDetails:t=>t.licenseStatus.details}),menuFiltered(){return this.menu.map(t=>(t.licenseRequired&&(this.licenseStatus===T||this.licenseStatus===x?t.disabled=!0:this.licenseStatus===k&&(t.disabled=!(this.licenseDetails.features.includes(t.licenseRequired)||t.licenseRequired===k))),t.child&&t.child.length>0&&m()(t.child,t=>{t.licenseRequired&&(this.licenseStatus===T||this.licenseStatus===x?t.disabled=!0:this.licenseStatus===k&&(t.disabled=!(this.licenseDetails.features.includes(t.licenseRequired)||t.licenseRequired===k)))}),t))}},watch:{collapsed(t){localStorage.setItem("icds/menu-collapsed",t)}},methods:{onToggleCollapse(t){this.collapsed=t},onItemClick(t,e){e.id&&!e.href&&(t.preventDefault(),this.menu=this.menu.map(t=>(t.id===e.id?t.class="active":t.class="",t)),this.select(e.id))},isHidden(t){return this.components[t].isHidden&&this.components[t].isHidden()},initMenuItems(){this.menu=this.menu.filter(t=>{if(this.components[t.id]&&(!this.components[t.id].isHidden||!this.components[t.id].isHidden())||t.href||!t.id)return t});let t=[],e={};m()(this.components,s=>{s.isHidden&&s.isHidden()||s.isNotMenuItem||(s.parent?(e[s.parent]||(e[s.parent]={title:s.parent,icon:s.icon,order:s.order,child:[]}),s.icon=null,e[s.parent].child.push(s)):t.push(s))}),t=[...t,...Object.values(e)],t=t.sort((t,e)=>t.order-e.order),t.push({href:D.adminUrl,title:"Back To WordPress",icon:{element:"fa",attributes:{icon:"arrow-alt-circle-left"}}}),this.menu=t},...Object(c["d"])({select:"components/selectComponent"})},mounted(){this.initMenuItems(),localStorage.getItem("icds/menu-collapsed")&&(this.collapsed="true"===localStorage.getItem("icds/menu-collapsed"))},created(){const t=window.matchMedia("(max-width: 768px)");t.addEventListener("change",t=>{this.collapsed=t.matches})}},$=E,L=(s("a4e1"),s("2877")),O=Object(L["a"])($,r,l,!1,null,null,null),R=O.exports,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"d-flex align-items-center"},[s("span",{staticClass:"status border-light",class:{"bg-danger":t.isDisconnected,"status-updating":t.isCheckingConnection,"bg-success":t.isConnected}}),t.isConnected?s("span",{staticClass:"ml-2"},[t._v(" "+t._s(t.__("Connected to","integration-cds"))+" <"),s("b",[t._v(t._s(t.connDetails.organization_name))]),t._v("> ")]):t.isCheckingConnection?s("span",{staticClass:"ml-2"},[t._v(" "+t._s(t.__("Connecting...","integration-cds"))+" ")]):s("span",{staticClass:"ml-2"},[t._v(" "+t._s(t.__("Not connected","integration-cds"))+" ")])])},M=[],V=s("3eea"),j=s.n(V);const B="OFFLINE",U="UPDATING",q="ONLINE",z={status:U,details:{},error:null},W={status:B,details:{},error:null},K={namespaced:!0,state:{status:U,isSolutionInstalled:!0,details:{},error:null},getters:{},mutations:{updateStatus(t,{status:e,isSolutionInstalled:s,details:i,error:a}){t.status=e,t.isSolutionInstalled=s,t.details=i,t.error=a}},actions:{refresh({commit:t}){return t("updateStatus",z),w().get("connection_status").then(e=>{t("updateStatus",{status:e.data.status?q:B,isSolutionInstalled:e.data.isSolutionInstalled,details:j()(e.data,["status","isSolutionInstalled"]),error:null})}).catch(e=>{t("updateStatus",{...W,error:e.message})})}}};var H=K,X={computed:{isCheckingConnection(){return this.connStatus===U},isConnected(){return this.connStatus===q},isDisconnected(){return this.connStatus===B},...Object(c["e"])({connStatus:t=>t.connectionStatus.status,connDetails:t=>t.connectionStatus.details,connError:t=>t.connectionStatus.error})}},Y={methods:{__(t){const e=window.icdsTranslates;return e&&e[t]?e[t]:t}}},G={name:"ConnectionNavItem",mixins:[X,Y]},Q=G,J=(s("26b9"),Object(L["a"])(Q,I,M,!1,null,"207aef97",null)),Z=J.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message-service-container position-fixed mx-3 mt-3 mh-100",on:{mouseenter:t.pause,mouseleave:t.resume}},t._l(t.messages,(function(e){return s("Message",{key:e.id,attrs:{message:e},on:{dismiss:t.dismiss}})})),1)},et=[],st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toast show position-relative",attrs:{role:"alert","aria-live":"assertive","aria-atomic":"true"}},[s("div",{staticClass:"toast-header"},[s("strong",{staticClass:"mr-auto",class:"text-"+t.bgClass},[t._v(t._s(t.title))]),t.hiding?s("ProgressIndicator",{attrs:{duration:5e3}}):t._e(),s("button",{staticClass:"ml-2 mb-1 close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.$emit("dismiss",t.message.id)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])],1),s("div",{staticClass:"toast-body",class:["alert-"+t.message.type]},[t._v(" "+t._s(t.message.text)+" ")])])},it=[],at=s("e9a71"),nt=s.n(at),ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"progress-indicator"},[s("div",{staticClass:"first-part"},[s("div",{staticClass:"indicator",style:{animationDuration:t.cssDuration}})]),s("div",{staticClass:"second-part"},[s("div",{staticClass:"indicator",style:{animationDuration:t.cssDuration,animationDelay:t.cssDuration}})])])},rt=[],lt={name:"ProgressIndicator",props:{duration:{type:Number}},computed:{cssDuration:function(){return this.duration/2+"ms"}}},ct=lt,dt=(s("e066"),Object(L["a"])(ct,ot,rt,!1,null,"4d84336a",null)),ut=dt.exports,mt=(s("d9e2"),s("1d32")),pt=s.n(mt),gt=s("98dc"),ht=s.n(gt),ft={state:{hide:!0,timeout:5e3,queue:[]},mutations:{add(t,e){t.queue.push(e)},evict(t,e){t.queue=pt()(t.queue,{id:e})},stopHiding(t){t.hide=!1},startHiding(t){t.hide=!0}},actions:{publish({commit:t,state:e},s){const i=ht()();let a;e.hide&&(a=setTimeout(()=>{t("evict",i)},e.timeout));const n={id:i,timer:a,...s};t("add",n)},pause({commit:t,state:e}){t("stopHiding"),m()(e.queue,t=>{t.timer&&clearTimeout(t.timer)})},resume({commit:t,state:e}){t("startHiding"),m()(e.queue,(s,i)=>{let n={...e.queue[i]};n.timer=setTimeout(()=>{t("evict",s.id)},e.timeout),a["a"].set(e.queue,i,n)})}},namespaced:!0};const vt="info",_t="success",bt="warning",yt="danger",Ct={install(t,{store:e}){if(!e)throw new Error("Vuex store must be available");e.registerModule("messages",ft),t.prototype.$messageService={publish(t,s,i){void 0!==t&&(s=s||vt,i=i||{},e.dispatch("messages/publish",{text:t,type:s,options:i}))},success(t,e){this.publish(t,_t,e)},warning(t,e){this.publish(t,bt,e)},error(t,e){this.publish(t,yt,e)},info(t,e){this.publish(t,vt,e)}}}};var St=Ct,wt={name:"Message",components:{ProgressIndicator:ut},props:["message"],computed:{...Object(c["e"])({hiding:t=>t.messages.hide}),bgClass(){return this.message.type},title(){let t=this.message.type;return t===yt&&(t="Error"),nt()(t)}}},kt=wt,xt=(s("7703"),Object(L["a"])(kt,st,it,!1,null,"40bb838e",null)),Tt=xt.exports,Nt={name:"MessageService",components:{Message:Tt},computed:{messages(){return this.$store.state.messages.queue}},methods:{dismiss(t){this.$store.commit("messages/evict",t),0===this.messages.length&&this.resume()},...Object(c["b"])({pause:"messages/pause",resume:"messages/resume"})}},Pt=Nt,Ft=(s("2b5f"),Object(L["a"])(Pt,tt,et,!1,null,"275b08e6",null)),At=Ft.exports;s("a49d");const Dt=window.icdsWp,Et=window.icdsPremiumInfo,$t=window.icdsPremiumErrors,Lt=window.icdsRequirementsErrors,Ot="icds_solution_dismissed",Rt="icds_premium_dismissed";var It={name:"App",components:{MessageService:At,Navigation:R,ConnectionNavItem:Z},computed:{activePanel(){return this.panels[this.activeId]},activeSidebar(){return this.sidebars[this.activeId]},activeComponent(){return this.components[this.activeId]},adminUrl:()=>Dt.adminUrl,premiumInfo:()=>Et,hasPremiumErrors(){return this.premiumErrors.length>0},premiumErrors:()=>$t,requirementsErrors:()=>Lt,hasRequirementsErrors(){return this.requirementsErrors.length>0},isSolutionDismissed(){const t=localStorage.getItem(Ot);return!!t&&!0===JSON.parse(t)},isPremiumDismissed(){const t=localStorage.getItem(Rt);return!!t&&!0===JSON.parse(t)},...Object(c["e"])({isOnline:t=>t.connectionStatus.status===q,isSolutionInstalled:t=>t.connectionStatus.isSolutionInstalled}),...Object(c["c"])({activeId:"components/active",components:"components/components",panels:"components/panels",sidebars:"components/sidebars"})},methods:{dismissSolution(){localStorage.setItem(Ot,JSON.stringify(!0))},dismissPremium(){localStorage.setItem(Rt,JSON.stringify(!0))}}},Mt=It,Vt=(s("aa11"),Object(L["a"])(Mt,n,o,!1,null,null,null)),jt=Vt.exports,Bt=s("dd61"),Ut=s.n(Bt),qt=s("9e86"),zt=s.n(qt),Wt=s("c707"),Kt=s.n(Wt);const Ht=99999,Xt={namespaced:!0,state:{active:null,components:{}},getters:{active(t){return t.active},components(t){return t.components},ordered:t=>Ut()(Kt()(t.components,t=>t.order||Ht),t=>t.id),navItems:t=>zt()(t.components,t=>t.navItem),panels:t=>zt()(t.components,t=>t.panel),sidebars:t=>zt()(t.components,t=>t.sidebar)},mutations:{register(t,e){a["a"].set(t.components,e.id,e)},selectComponent(t,e){t.active=e}},actions:{}};var Yt=Xt;const Gt="REGISTERED",Qt="NOT_REGISTERED",Jt="CHECKING",Zt={namespaced:!0,state:{status:Jt,error:null},getters:{},mutations:{updateStatus(t,{status:e,error:s}){t.status=e,t.error=s}},actions:{refresh({commit:t}){return t("updateStatus",{status:Jt,error:null}),w().get("site_registration").then(e=>{t("updateStatus",{status:e.data.status?Gt:Qt,error:null})}).catch(e=>{t("updateStatus",{status:Qt,error:e.message})})}}};var te=Zt,ee=s("020f"),se=s.n(ee);const ie=window.icdsLoggingSettingsDefaults.verbosity,ae=window.icdsLoggingSettingsDefaults.notificationsEnabled,ne=window.icdsLoggingSettingsDefaults.notificationsVerbosity,oe=window.icdsLoggingSettingsDefaults.notificationsFrequency;var re={state:{verbosity:ie,notificationsEnabled:ae,notificationsVerbosity:ne,notificationsFrequency:oe},mutations:{initialize(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})},updateValues(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})},updateVerbosity(t,e){t.verbosity=e},updateNotificationsEnabling(t,e){t.notificationsEnabled=e},updateNotificationsVerbosity(t,e){t.notificationsVerbosity=e},updateNotificationsFrequency(t,e){t.notificationsFrequency=e}},actions:{changeVerbosity({commit:t},e){return S().post("verbosity",{verbosity:e}).then(()=>{t("updateVerbosity",e)})},changeNotificationsEnabling({commit:t},e){return S().post("logging_settings",{notificationsEnabled:e}).then(()=>{t("updateNotificationsEnabling",e)})},changeNotificationsVerbosity({commit:t},e){return S().post("logging_settings",{notificationsVerbosity:e}).then(()=>{t("updateNotificationsVerbosity",e)})},changeNotificationsFrequency({commit:t},e){return S().post("logging_settings",{notificationsFrequency:e}).then(()=>{t("updateNotificationsFrequency",e)})}},namespaced:!0},le={state:{authenticationSettings:{applicationID:"",applicationSecret:"",certificatePath:"",passphrase:""},certificatePathMethod:"",authenticationType:"",instanceType:"",instanceURI:"",skipCertificateVerification:!1},mutations:{initialize(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})},setInstanceUrl(t,e){t.instanceURI=e},setSkipVerification(t,e){t.skipCertificateVerification=e},setInstanceType(t,e){t.instanceType=e},setAuthenticationType(t,e){t.authenticationType=e},setApplicationId(t,e){t.authenticationSettings.applicationID=e},setApplicationSecret(t,e){t.authenticationSettings.applicationSecret=e},setCertificatePathMethod(t,e){t.certificatePathMethod=e},setCertificatePath(t,e){t.authenticationSettings.certificatePath=e},setPassphrase(t,e){t.authenticationSettings.passphrase=e}},actions:{},namespaced:!0};const ce="v2-checkbox",de="v2-invisible",ue="v3",me="light",pe="dark",ge="normal",he="compact",fe="bottomright",ve="bottomleft",_e="inline";var be={state:{adapterName:"default",type:null,siteKey:"",secretKey:"",theme:me,size:ge,badge:fe,scoreThreshold:.5,action:null},mutations:{initialize(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})},updateValues(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})},setAdapterName(t,e){t.adapterName=e},setType(t,e){t.type=e},setSiteKey(t,e){t.siteKey=e},setSecretKey(t,e){t.secretKey=e},setTheme(t,e){t.theme=e},setSize(t,e){t.size=e},setBadge(t,e){t.badge=e},setScoreThreshold(t,e){t.scoreThreshold=e}},actions:{},namespaced:!0};const ye=0,Ce=1,Se=0,we=1;var ke={state:{authorizeBoundUsers:!1,bindNewUsers:!1,newUserMode:0,matchingWpField:"user_email",matchingCdsField:"emailaddress1",syncFields:!1,syncDirection:0,syncMap:{}},mutations:{initialize(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})},updateValues(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})}},actions:{update({commit:t,state:e},s){return t("updateValues",s),w().put("settings",{userBinding:e})}},namespaced:!0},xe={state:{postTypes:[],defaultEntityPosts:{}},mutations:{initialize(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})},updateValues(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})}},actions:{update({commit:t,state:e},s){return t("updateValues",s),w().put("settings",{binding:e})}},namespaced:!0},Te={state:{templates:[]},mutations:{updateTemplates(t,e){t.templates=e}},actions:{loadTemplates({commit:t}){w().get("fetch_xml_templates").then(e=>{t("updateTemplates",e.data.data)})}},namespaced:!0},Ne={state:{templates:[]},mutations:{updateTemplates(t,e){t.templates=e}},actions:{loadTwigTemplates({commit:t}){w().get("templates").then(e=>{t("updateTemplates",e.data.data)})}},namespaced:!0},Pe={state:{languages:[]},mutations:{updateLanguages(t,e){t.languages=e}},actions:{loadLanguages({commit:t}){w().get("languages").then(e=>{t("updateLanguages",e.data)})}},namespaced:!0};const Fe="create",Ae="update",De="read",Ee="noajax",$e="entity-binding",Le="request",Oe="explicit-binding",Re="dialog",Ie="dropdown",Me="dropdown_simple";var Ve={state:{isRecaptchaEnabled:!1,keepSubmittedForm:!1,resetValuesOnSubmit:!1,successMessage:"",twigTemplate:0,twigFieldTemplates:{},failMessage:"",fullnameFields:["firstname","lastname"],addressFields:["line1","city","country"],injectDependencies:!1,isSsr:!1,formFields:[],charsBeforeSearch:1,delayBeforeSearch:250},mutations:{initialize(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})},updateValues(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})},setFormFields(t,{id:e,fields:s}){t.formFields=s}},actions:{update({commit:t,state:e},s){return t("updateValues",s),w().put("settings",{forms:e})},fetchFormFields({commit:t},e){return w().get("form_fields/"+e).then(s=>{t("setFormFields",{id:e,fields:s.data.fields})})}},namespaced:!0},je={state:{entityCacheDurations:[],entityCacheDefault:""},mutations:{initialize(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})},updateValues(t,e){se()(e,(e,s)=>{a["a"].set(t,s,e)})}},actions:{update({commit:t,state:e},s){return t("updateValues",s),w().put("settings",{cache:e})}},namespaced:!0},Be=s("cdd8"),Ue=s.n(Be);const qe={logging:re,connection:le,recaptcha:be,userBinding:ke,fetchXmlTemplates:Te,languages:Pe,binding:xe,forms:Ve,twigTemplates:Ne,cache:je},ze=window.icdsStoreSettings||{};Ue()(qe,ze);var We={namespaced:!0,modules:qe},Ke={namespaced:!0,state:{modalState:!1},mutations:{setModalState(t,e){t.modalState=e}}};const He=window.icdspVersion;function Xe(){return!!He}a["a"].use(c["a"]);var Ye=new c["a"].Store({state:{},getters:{isPremiumAvailable(){return Xe()}},mutations:{},actions:{},modules:{components:Yt,connectionStatus:H,registrationStatus:te,licenseStatus:A,settings:We,modal:Ke}}),Ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("h5",[t._v(t._s(t.__("Installed")))]),t._l(t.installedAddons,(function(t,e){return s("AddonCard",{key:"iAddon-"+e,attrs:{addon:t,color:"info"}})})),s("hr"),s("h5",[t._v(t._s(t.__("Available")))]),t._l(t.availableAddons,(function(t,e){return s("AddonCard",{key:"aAddon-"+e,attrs:{addon:t,color:"light"}})}))],2)},Qe=[],Je=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._t("header",(function(){return[t.meta.description||t.meta.documentationUrl?[t.inline?s("h5",[t._v(" "+t._s(t.meta.description||"")+" ")]):s("p",{staticClass:"lead"},[t._v(" "+t._s(t.meta.description||"")+" "),t.meta.documentationUrl?[s("a",{attrs:{href:t.meta.documentationUrl,target:"_blank"}},[s("small",{staticClass:"font-weight-light"},[t._v(t._s(t.__("Documentation","integration-cds"))+" »")])])]:t._e()],2),t.inline?t._e():s("hr")]:t._e()]})),t._t("default")],2)},Ze=[],ts={name:"Panel",mixins:[Y],props:["meta","inline"]},es=ts,ss=Object(L["a"])(es,Je,Ze,!1,null,"70a60114",null),is=ss.exports,as=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card mb-3"},[s("div",{staticClass:"card-header",class:"bg-"+t.color+" text-"+t.textColor},[t._v(" "+t._s(t.addon.title)+" "),t.addon.version?s("small",[t._v(" ("+t._s(t.addon.version)+") ")]):t._e()]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"card-text"},[s("div",{domProps:{innerHTML:t._s(t.addon.description)}}),t.addon.extra?s("dl",{staticClass:"row mt-3 mb-0 small"},[t._l(t.addon.extra,(function(e){return[s("dt",{key:"key-"+e.name,staticClass:"col-12 col-sm-3"},[t._v(t._s(e.name))]),s("dd",{key:"value-"+e.name,staticClass:"col-12 col-sm-9"},[t._v(t._s(e.value))])]}))],2):t._e()]),s("hr"),"active"===t.addon.status?s("ButtonLoader",{attrs:{"btn-class":"btn btn-danger",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.deactivateAddon(t.addon)}}},[t._v(t._s(t.__("Deactivate"))+" ")]):t._e(),"installed"===t.addon.status?s("ButtonLoader",{attrs:{"btn-class":"btn btn-primary",loading:t.loading,disabled:t.loading},on:{click:function(e){return t.activateAddon(t.addon)}}},[t._v(t._s(t.__("Activate"))+" ")]):t._e(),t.addon.url?s("a",{staticClass:"btn btn-outline-primary",attrs:{href:t.addon.url,target:"_blank"}},[t._v(t._s(t.__("Download")))]):t._e(),t.addon.versions?[s("a",{staticClass:"btn btn-link btn-sm text-dotted collapsible collapsed",attrs:{"data-toggle":"collapse",href:"#show-versions","aria-expanded":"false"}},[t._v(" "+t._s(t.__("Prevoius versions","integration-cds"))+" ")]),s("div",{staticClass:"collapse mt-1",attrs:{id:"show-versions"}},[s("ul",{staticClass:"list-group list-group-flush"},t._l(t.addon.versions,(function(e,i){return s("li",{key:i,staticClass:"list-group-item"},[s("a",{attrs:{href:e,target:"_blank"}},[t._v(t._s(i))])])})),0)])]:t._e()],2)])},ns=[],os=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex"},[s("button",{staticClass:"btn align-self-start",class:[t.btnClass],attrs:{type:t.btnType,disabled:t.disabled},on:{click:function(e){return t.$emit("click")}}},[t._t("default",(function(){return[t._v("Button")]}))],2),t.loading?s("div",{staticClass:"border-left ml-3 pl-3"},[s("Spinner"),t.loadingMessage?s("span",{staticClass:"pl-2"},[t._v(t._s(t.loadingMessage))]):t._e()],1):t.error?s("div",{staticClass:"border-left ml-3 pl-3 btn-aligned text-left text-danger"},[t._v(" "+t._s(t.error)+" ")]):t._e()])},rs=[],ls=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("img",{style:t.styleEx,attrs:{src:s("5c3d"),width:t.width,height:t.width,alt:t.alt}})},cs=[],ds={name:"Spinner",props:{width:{default:28},alt:{default:"Loading..."},styleEx:{default:""}}},us=ds,ms=Object(L["a"])(us,ls,cs,!1,null,"ae041ad2",null),ps=ms.exports,gs={name:"ButtonLoader",components:{Spinner:ps},props:{loading:{type:Boolean,required:!0},disabled:{type:Boolean,default:!1},loadingMessage:{type:String,default:""},error:{type:String,default:""},btnClass:{type:String,default:"btn-primary"},btnType:{type:String,default:"button"}}},hs=gs,fs=(s("7a57"),Object(L["a"])(hs,os,rs,!1,null,"7a0aeb76",null)),vs=fs.exports,_s={name:"AddonCard",components:{ButtonLoader:vs},props:["addon","color"],mixins:[Y],data(){return{loading:!1}},computed:{textColor(){return"light"===this.color?"dark":"light"}},methods:{installAddon(t){this.doAction(t,"install_addon")},activateAddon(t){this.doAction(t,"activate_addon",this.__("Addon activated successfully. Redirecting..."))},deactivateAddon(t){this.doAction(t,"deactivate_addon",this.__("Addon deactivated successfully. Redirecting..."))},doAction(t,e,s){this.loading=!0,w().post(e,t).then(()=>{this.$messageService.success(s),window.location.reload()}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.loading=!1})}}},bs=_s,ys=(s("d795"),Object(L["a"])(bs,as,ns,!1,null,"42bb04e8",null)),Cs=ys.exports,Ss=s("c641"),ws=s.n(Ss);const ks=window.icdsAddons,xs=window.icdsAvailableAddons;function Ts(){return 0===ks.length&&0===xs.length}var Ns={name:"AddonsPanel",components:{AddonCard:Cs,Panel:is},props:["meta"],mixins:[Y],computed:{installedAddons(){return ws()(ks,(t,e)=>{t.name=e})},availableAddons(){return ws()(xs,(t,e)=>{t.name=e})}}},Ps=Ns,Fs=Object(L["a"])(Ps,Ge,Qe,!1,null,"3dad2047",null),As=Fs.exports,Ds=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("h5",[t._v(t._s(t.__("Login authorization","integration-cds")))]),s("div",{staticClass:"mb-2"},[s("AuthorizeUsersSetting")],1)])},Es=[],$s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"custom-control custom-checkbox"},[s("div",{staticClass:"d-flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.setting,expression:"setting"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"ubEnableLoginAuthorization"},domProps:{checked:Array.isArray(t.setting)?t._i(t.setting,null)>-1:t.setting},on:{change:function(e){var s=t.setting,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&(t.setting=s.concat([n])):o>-1&&(t.setting=s.slice(0,o).concat(s.slice(o+1)))}else t.setting=a}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"ubEnableLoginAuthorization"}},[t._v(" "+t._s(t.__("Authorize bound users against Dataverse during sign-in","integration-cds"))+" ")]),t.loading?s("div",{staticClass:"border-left ml-3 pl-3"},[s("Spinner",{attrs:{width:"16"}})],1):t.error?s("div",{staticClass:"border-left ml-3 pl-3 text-danger"},[t._v(" "+t._s(t.error)+" ")]):t._e()]),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("When enabled, this setting adds a new authorization step to the WordPress user authentication flow: the plugin checks the “Login Enabled”","integration-cds"))+" ("),s("code",[t._v("alexacrm_wordpress_loginenabled")]),t._v(") "+t._s(t.__("field on the bound Contact record","integration-cds"))+". ")])])])},Ls=[],Os={name:"AuthorizeUsersSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1,error:null}},computed:{setting:{get(){return this.$store.state.settings.userBinding.authorizeBoundUsers},set(t){this.loading=!0,this.error=null,this.$store.dispatch("settings/userBinding/update",{authorizeBoundUsers:t}).then(()=>{this.loading=!1,this.$messageService.success("Settings has been saved successfully.")}).catch(t=>{this.loading=!1,this.error=t.message})}}}},Rs=Os,Is=Object(L["a"])(Rs,$s,Ls,!1,null,"702e5d04",null),Ms=Is.exports;function Vs(){return!Xe()}var js={name:"UserBindingPanel",mixins:[Y],components:{Panel:is,AuthorizeUsersSetting:Ms},props:["meta"],computed:{syncMap:{get(){return this.userBinding.syncMap}},...Object(c["e"])({userBinding:t=>t.settings.userBinding})}},Bs=js,Us=(s("0cd1"),Object(L["a"])(Bs,Ds,Es,!1,null,"8e934244",null)),qs=Us.exports,zs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta,inline:!0},scopedSlots:t._u([{key:"header",fn:function(){return[t._v("­")]},proxy:!0}])},[s("ExportSettings"),s("hr"),s("ImportSettings")],1)},Ws=[],Ks=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h5",[t._v("Import Configuration Settings.")]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group mb-3"},[s("div",{staticClass:"custom-file"},[s("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"settingsFile",name:"settingsFile",accept:"application/json"},on:{change:t.selectFile}}),s("label",{staticClass:"custom-file-label",attrs:{for:"settingsFile"}},[t.isFileSelected?[t._v(" "+t._s(t.selectedFile.name)+" ")]:[t._v(" Please select a file to import ")]],2)]),t.selectedFile?s("div",{staticClass:"input-group-prepend",on:{click:this.clearFile}},[s("span",{staticClass:"btn btn-outline-danger ml-2"},[t._v("X")])]):t._e()])]),s("div",{staticClass:"d-flex align-items-start mb-2"},[s("ButtonLoader",{attrs:{"btn-class":"btn-primary",loading:t.loading,disabled:!t.canUploadFile},on:{click:t.uploadFile}},[t._v(" Import ")])],1)])},Hs=[],Xs={name:"ImportSettings",components:{ButtonLoader:vs},data(){return{selectedFile:null,loading:!1}},computed:{isFileSelected(){return null!==this.selectedFile},canUploadFile(){return null!==this.selectedFile}},methods:{clearFile(){this.selectedFile=null},selectFile(t){this.selectedFile=t.target.files[0]},uploadFile(){this.loading=!0;let t=new FormData;t.append("settings_file",this.selectedFile),w().post("import_settings",t,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{let e=t.data.settings;ws()(e,(t,e)=>{this.$store.commit(`settings/${e}/updateValues`,t)}),this.$root.$emit("update-form-registrations"),this.$root.$emit("update-templates"),this.$messageService.success("Settings has been imported successfully.")}).catch(t=>{this.$messageService.error=t.message}).finally(()=>{this.loading=!1})}}},Ys=Xs,Gs=Object(L["a"])(Ys,Ks,Hs,!1,null,"4607892a",null),Qs=Gs.exports,Js=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"form-group"},[s("h5",[t._v(t._s(t.__("Export Configuration Settings.")))]),s("div",[s("label",[t._v(t._s(t.__("Select setting types to export")))])]),t.allowSelectAll?s("a",{staticClass:"btn btn-sm btn-link dotted-link mb-3 ml-2",on:{click:t.selectAllSettings}},[t._v(t._s(t.__("Select all")))]):s("a",{staticClass:"btn btn-sm btn-link dotted-link mb-3 ml-2",on:{click:t.deselectAllSettings}},[t._v(t._s(t.__("Deselect all")))]),s("div",{staticClass:"d-flex flex-wrap"},t._l(t.allowedSettingsLabels,(function(e,i){return s("div",{key:i,staticClass:"custom-control custom-checkbox mb-2",staticStyle:{width:"25%"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedSettings,expression:"selectedSettings"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"icdsSettingsType-"+i},domProps:{value:i,checked:Array.isArray(t.selectedSettings)?t._i(t.selectedSettings,i)>-1:t.selectedSettings},on:{change:function(e){var s=t.selectedSettings,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=i,r=t._i(s,o);a.checked?r<0&&(t.selectedSettings=s.concat([o])):r>-1&&(t.selectedSettings=s.slice(0,r).concat(s.slice(r+1)))}else t.selectedSettings=n}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsType-"+i}},[t._v(t._s(e))])])})),0)]),s("ButtonLoader",{attrs:{"btn-class":"btn-primary",loading:t.loading},on:{click:t.exportSettings}},[t._v(" "+t._s(t.__("Export"))+" ")])],1)},Zs=[],ti=(s("2b3d"),s("bf19"),s("9861"),s("88a7"),s("271a"),s("5494"),s("2593")),ei=s.n(ti),si=s("ec69"),ii=s.n(si),ai=s("3ff1"),ni=s.n(ai),oi=s("5492"),ri=s.n(oi);const li=window.icdsExportingSettingsTypes,ci=["connection","recaptcha.siteKey","recaptcha.secretKey","recaptcha.adapterName","binding.defaultEntityPosts"];let di=t=>{let e="icds_settings.json",s=JSON.stringify(t),i=new Blob([s],{type:"application/json"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(i,e);else{let t=window.document.createElement("a");t.href=window.URL.createObjectURL(i),t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}};var ui={name:"ExportSettings",components:{ButtonLoader:vs},mixins:[Y],data(){return{selectedSettings:[],ignoredFields:ci,loading:!1}},created(){this.selectedSettings=ii()(this.allowedSettings)},computed:{allowedSettings(){let t=j()(this.$store.state.settings,this.ignoredFields);return t.formRegistrations=async()=>(await w().get("form_registrations")).data.data,t.twigTemplates=async()=>(await w().get("templates")).data.data,t.fetchXmlTemplates=async()=>(await w().get("fetch_xml_templates")).data.data,t},allowedSettingsLabels(){return zt()(this.allowedSettings,(t,e)=>li[e]||e)},allowSelectAll(){return this.selectedSettings.length<ii()(this.allowedSettings).length}},methods:{exportSettings(){this.loading=!0;let t=ei()(this.allowedSettings,this.selectedSettings);t=zt()(t,t=>"function"===typeof t?t():t),Promise.all(ni()(t)).then(e=>{di(ri()(ii()(t),e))}).finally(()=>{this.loading=!1})},selectAllSettings(){this.selectedSettings=ii()(this.allowedSettings)},deselectAllSettings(){this.selectedSettings=[]}}},mi=ui,pi=Object(L["a"])(mi,Js,Zs,!1,null,"a36404fa",null),gi=pi.exports;function hi(){return!Xe()}var fi={name:"ImportExportPanel",components:{ExportSettings:gi,ImportSettings:Qs,Panel:is},props:["meta"]},vi=fi,_i=Object(L["a"])(vi,zs,Ws,!1,null,"b57a8878",null),bi=_i.exports,yi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("div",[s("PostTypesSetting")],1),s("hr"),s("div",[s("BindingMapSetting")],1)])},Ci=[],Si=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex"},[s("label",[t._v("Choose post types to allow binding")]),t.loading?s("div",{staticClass:"border-left ml-3 pl-3"},[s("Spinner",{attrs:{width:"16"}})],1):t.error?s("div",{staticClass:"border-left ml-3 pl-3 text-danger"},[t._v(" "+t._s(t.error)+" ")]):t._e()]),s("div",t._l(t.postTypes,(function(e,i){return s("div",{key:"type-"+i,staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.setting,expression:"setting"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"icdsBindingPostType-"+i},domProps:{value:i,checked:Array.isArray(t.setting)?t._i(t.setting,i)>-1:t.setting},on:{change:function(e){var s=t.setting,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=i,r=t._i(s,o);a.checked?r<0&&(t.setting=s.concat([o])):r>-1&&(t.setting=s.slice(0,r).concat(s.slice(r+1)))}else t.setting=n}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsBindingPostType-"+i}},[t._v(t._s(e.label))])])})),0)])},wi=[];const ki=window.icdsWordPressPostTypes;var xi={name:"PostTypesSetting",components:{Spinner:ps},data(){return{loading:!1,error:null}},computed:{postTypes(){return ki},setting:{get(){return this.$store.state.settings.binding.postTypes},set(t){this.loading=!0,this.error=null,this.$store.dispatch("settings/binding/update",{postTypes:t}).then(()=>{this.$messageService.success("Settings has been updated successfully.")}).catch(t=>{this.error=t.message,this.$messageService.error("Failed to update settings: "+t.message)}).finally(()=>{this.loading=!1})}}}},Ti=xi,Ni=Object(L["a"])(Ti,Si,wi,!1,null,"37923220",null),Pi=Ni.exports,Fi=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex"},[s("label",[t._v("Choose default posts for bound Dataverse tables")]),t.loading?s("div",{staticClass:"border-left ml-3 pl-3"},[s("Spinner",{attrs:{width:"16"}})],1):t._e()]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-9"},[t.hasBoundEntities?[s("table",{staticClass:"table table-borderless mb-0"},t._l(t.boundEntities,(function(e,i){return s("DefaultBindingRow",{key:i,attrs:{"entity-label":e,entity:i,post:t.setting[i]||null,types:t.availablePostTypes,"bound-posts":t.boundPosts},on:{"updated-post":function(e){return t.updatePost(i,e)}}})})),1)]:[s("p",{staticClass:"text-muted"},[t._v("You don't have any posts bound to a Dataverse table yet.")])]],2),t._m(0)])])},Ai=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-sm-3 pt-1"},[s("small",{staticClass:"form-text text-muted"},[t._v(" Choose WordPress posts which will be linked in views and lookup dialogs by default for each entity. Only posts and entities already bound are shown. ")])])}],Di=s("13ea"),Ei=s.n(Di),$i=s("a9b9"),Li=s.n($i),Oi=s("eed6"),Ri=s.n(Oi),Ii=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",[s("label",{staticClass:"btn-aligned mb-0"},[t._v(t._s(t.entityLabel))])]),s("td",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPost,expression:"selectedPost"}],staticClass:"custom-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedPost=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}},[t._v("None selected")]),t._l(t.typeGroups,(function(e){return s("optgroup",{key:e.name,attrs:{label:e.label}},t._l(t.postsByType[e.name],(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.title)+" ")])})),0)}))],2)])])},Mi=[],Vi=s("9380"),ji=s.n(Vi),Bi=s("6edf"),Ui=s.n(Bi),qi={name:"DefaultBindingRow",props:["entityLabel","entity","post","types","boundPosts"],computed:{selectedPost:{get(){return this.post},set(t){this.$emit("updated-post",t)}},postsByType(){return Ui()(ji()(this.boundPosts,{entity:this.entity}),"type")},typeGroups(){return ji()(this.types,t=>this.postsByType[t.name]&&this.postsByType[t.name].length>0)}}},zi=qi,Wi=Object(L["a"])(zi,Ii,Mi,!1,null,"049c91c4",null),Ki=Wi.exports;const Hi=window.icdsEntitiesList,Xi=window.icdsBindingMatrix,Yi=window.icdsWordPressPostTypes;var Gi={name:"BindingMapSetting",components:{Spinner:ps,DefaultBindingRow:Ki},data(){return{loading:!1,error:null}},computed:{availablePostTypes(){return Yi},boundEntities(){const t=Ri()(Ut()(Xi,t=>t.entity));return ri()(t,Ut()(t,t=>{var e;return null!==(e=Hi[t])&&void 0!==e?e:t}))},boundPosts(){return Xi},setting:{get(){return this.$store.state.settings.binding.defaultEntityPosts},set(t){this.loading=!0,this.error=null,this.$store.dispatch("settings/binding/update",{defaultEntityPosts:t}).then(()=>{this.loading=!1,this.$messageService.success("Settings has been saved successfully.")}).catch(t=>{this.loading=!1,this.error=t.message,this.$messageService.error(t.message)})}},hasBoundEntities(){return!Ei()(this.boundEntities)}},methods:{updatePost(t,e){this.setting=e||null===e?{...this.setting,[t]:e}:Li()(this.setting,t)}}},Qi=Gi,Ji=Object(L["a"])(Qi,Fi,Ai,!1,null,"2ebec518",null),Zi=Ji.exports;function ta(){return!Xe()}var ea={name:"BindingPanel",components:{BindingMapSetting:Zi,PostTypesSetting:Pi,Panel:is},props:["meta"]},sa=ea,ia=Object(L["a"])(sa,yi,Ci,!1,null,"45a93188",null),aa=ia.exports,na=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("div",[t._v(" "+t._s(t.__("Connection status","integration-cds"))+": "),s("span",{class:{"text-success":t.isConnected,"text-danger":t.isDisconnected,"text-muted":t.isCheckingConnection}},[t._v(t._s(t.statusLabel))])]),t.isPremiumAvailable?s("div",[t._v(" "+t._s(t.__("Registration in Dataverse","integration-cds"))+": "),s("span",{class:{"text-success":t.isSiteRegistered,"text-danger":!t.isSiteRegistered,"text-muted":t.isCheckingRegistration}},[t._v(t._s(t.siteRegistrationLabel))])]):t._e(),s("div",[s("a",{staticClass:"btn btn-sm btn-link px-0",attrs:{"data-toggle":"collapse",href:"#status-connection-info","aria-expanded":"false"}},[t._v(" "+t._s(t.__("Connection details","integration-cds"))+" ")])]),s("div",{staticClass:"collapse",attrs:{id:"status-connection-info"}},[t.isConnected?[s("DetailsTable",{attrs:{details:t.connDetails}})]:t.isCheckingConnection?[s("Spinner",{staticClass:"mt-2"})]:t.connError?[s("div",{staticClass:"alert alert-danger"},[t._v(" "+t._s(t.connError)+" ")])]:t._e()],2),t.isPremiumAvailable&&t.isConnected?s("div",[t._v(" "+t._s(t.__("License","integration-cds"))+": "),s("span",{class:{"text-success":t.isLicensed,"text-danger":!t.isLicensed,"text-muted":t.isCheckingLicense}},[t._v(t._s(t.siteLicenseLabel))]),t.isLicensed?[s("div",[s("a",{staticClass:"btn btn-sm btn-link px-0",attrs:{"data-toggle":"collapse",href:"#license-connection-info","aria-expanded":"false"}},[t._v(" "+t._s(t.__("License details","integration-cds"))+" ")])]),s("div",{staticClass:"collapse",attrs:{id:"license-connection-info"}},[t.isLicensed?[s("DetailsTable",{attrs:{details:t.licenseDetails}})]:t.isCheckingLicense?[s("Spinner",{staticClass:"mt-2"})]:t.licenseError?[t.error.licenseMessage?s("div",[t._v(" "+t._s(t.error.licenseMessage)+" ")]):t._e()]:t._e()],2)]:t._e(),t.isNotLicensed?s("div",{staticClass:"w-50"},[s("p",[t._v("Please fill in the form to complete registration.")]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"icdsLicenseDataCompanyName"}},[t._v(" "+t._s(t.__("Company Name","integration-cds"))+" ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.licenseRegisterData.companyName,expression:"licenseRegisterData.companyName"}],staticClass:"form-control",class:{"is-invalid":t.error.licenseRegisterData.companyName},attrs:{type:"text",id:"icdsLicenseDataCompanyName",required:"required"},domProps:{value:t.licenseRegisterData.companyName},on:{input:function(e){e.target.composing||t.$set(t.licenseRegisterData,"companyName",e.target.value)}}}),t.error.licenseRegisterData.companyName?s("small",{staticClass:"form-text text-danger"},[t._v(t._s(t.error.licenseRegisterData.companyName))]):t._e()]),s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col"},[s("label",{attrs:{for:"icdsLicenseDataFirstName"}},[t._v(" "+t._s(t.__("First Name","integration-cds"))+" ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.licenseRegisterData.firstName,expression:"licenseRegisterData.firstName"}],staticClass:"form-control",class:{"is-invalid":t.error.licenseRegisterData.firstName},attrs:{type:"text",id:"icdsLicenseDataFirstName",required:"required"},domProps:{value:t.licenseRegisterData.firstName},on:{input:function(e){e.target.composing||t.$set(t.licenseRegisterData,"firstName",e.target.value)}}}),t.error.licenseRegisterData.firstName?s("small",{staticClass:"form-text text-danger"},[t._v(t._s(t.error.licenseRegisterData.firstName))]):t._e()]),s("div",{staticClass:"col"},[s("label",{attrs:{for:"icdsLicenseDataLastName"}},[t._v(" "+t._s(t.__("Last Name","integration-cds"))+" ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.licenseRegisterData.lastName,expression:"licenseRegisterData.lastName"}],staticClass:"form-control",class:{"is-invalid":t.error.licenseRegisterData.lastName},attrs:{type:"text",id:"icdsLicenseDataLastName",required:"required"},domProps:{value:t.licenseRegisterData.lastName},on:{input:function(e){e.target.composing||t.$set(t.licenseRegisterData,"lastName",e.target.value)}}}),t.error.licenseRegisterData.lastName?s("small",{staticClass:"form-text text-danger"},[t._v(t._s(t.error.licenseRegisterData.lastName))]):t._e()])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"icdsLicenseDataEmail"}},[t._v(" "+t._s(t.__("E-mail","integration-cds"))+" ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.licenseRegisterData.email,expression:"licenseRegisterData.email"}],staticClass:"form-control",class:{"is-invalid":t.error.licenseRegisterData.email},attrs:{type:"email",id:"icdsLicenseDataEmail",required:"required"},domProps:{value:t.licenseRegisterData.email},on:{input:function(e){e.target.composing||t.$set(t.licenseRegisterData,"email",e.target.value)}}}),t.error.licenseRegisterData.email?s("small",{staticClass:"form-text text-danger"},[t._v(t._s(t.error.licenseRegisterData.email))]):t._e()]),s("ButtonLoader",{attrs:{"btn-class":"btn btn-primary mr-2",loading:t.loading.license},on:{click:t.registerLicense}},[t._v(" "+t._s(t.__("Register","integration-cds"))+" ")])],1):t._e()],2):t._e(),s("hr"),s("h5",[t._v(t._s(t.__("Diagnostic","integration-cds")))]),s("div",[s("button",{staticClass:"btn btn-primary mr-2",attrs:{type:"button"},on:{click:t.downloadDiagnostics}},[t._v(" "+t._s(t.__("Download diagnostics","integration-cds"))+" ")]),s("a",{staticClass:"btn btn-sm btn-link collapsible collapsed dotted-link",attrs:{"data-toggle":"collapse",href:"#status-system-info","aria-expanded":"false"}},[s("span",{staticClass:"text-hidden"},[t._v(t._s(t.__("Show diagnostic data","integration-cds")))]),s("span",{staticClass:"text-shown"},[t._v(t._s(t.__("Hide diagnostic data","integration-cds")))])]),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("The file contains a machine-readable compilation of data listed in the System information section. No other information is collected.","integration-cds"))+" ")]),s("div",{staticClass:"collapse mt-1",attrs:{id:"status-system-info"}},[s("table",{staticClass:"table table-sm table-hover"},[s("thead",{staticClass:"thead-dark"},[s("tr",[s("th",{attrs:{colspan:"2"}},[t._v(t._s(t.__("System Information","integration-cds")))])])]),s("tbody",[t._l(t.systemInfo.system,(function(e,i){return[s("tr",{key:i},[s("th",{attrs:{width:"40%"}},[t._v(t._s(i))]),s("td",!0===e?[t._v("yes")]:!1===e?[t._v("no")]:"object"===typeof e?[s("a",{staticClass:"btn btn-sm btn-link p-0 text-left collapsible collapsed dotted-link",attrs:{"data-toggle":"collapse",href:"#expand-info-"+i,"aria-expanded":"false"}},[s("span",{staticClass:"text-hidden"},[t._v(t._s(t.__("Expand","integration-cds")))]),s("span",{staticClass:"text-shown"},[t._v(t._s(t.__("Collapse","integration-cds")))])])]:[t._v(t._s(e))])]),"object"===typeof e?s("tr",{key:"sub-"+i},[s("td",{staticClass:"border-0 p-0",attrs:{colspan:"2"}},[s("div",{staticClass:"collapse",attrs:{id:"expand-info-"+i}},[s("table",{staticClass:"table table-sm table-hover mb-0"},t._l(e,(function(e,i){return s("tr",{key:"subrow-"+i},[s("th",{attrs:{width:"40%"}},[t._v(t._s(i))]),s("td",!0===e?[t._v("yes")]:!1===e?[t._v("no")]:"object"===typeof e?[t._v(t._s(JSON.stringify(e)))]:[t._v(t._s(e))])])})),0)])])]):t._e()]}))],2)]),s("table",{staticClass:"table table-sm table-hover"},[s("thead",{staticClass:"thead-dark"},[s("tr",[s("th",{attrs:{colspan:"2"}},[t._v(t._s(t.__("Resource Usage","integration-cds")))])])]),s("tbody",[s("tr",[s("th",{attrs:{width:"40%"}},[t._v(t._s(t.__("Memory Usage","integration-cds")))]),s("td",[t._v(" "+t._s(t.systemInfo.resources["memory-usage"])+" / "+t._s(t.systemInfo.resources["memory-total"])+" ")])]),s("tr",[s("th",{attrs:{width:"40%"}},[t._v(t._s(t.__("Disk Usage","integration-cds")))]),s("td",[t._v(" "+t._s(t.systemInfo.resources["disk-usage"])+" / "+t._s(t.systemInfo.resources["disk-total"])+" ")])])])]),t.recommendations?s("table",{staticClass:"table table-sm table-hover"},[s("thead",{staticClass:"bg-warning"},[s("tr",[s("th",{attrs:{colspan:"2"}},[t._v(t._s(t.__("Recommendations","integration-cds")))])])]),s("tbody",t._l(t.recommendations,(function(e){return s("tr",{key:e},[s("td",[t._v(t._s(e))])])})),0)]):t._e()])]),s("hr"),s("h5",[t._v(t._s(t.__("Logging","integration-cds")))]),s("div",[s("label",[t._v(" "+t._s(t.__("Choose logging verbosity","integration-cds"))+": "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.logLevel,expression:"logLevel"}],staticClass:"custom-select mt-1",class:{"is-invalid":t.error.verbosity},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.logLevel=e.target.multiple?s:s[0]}}},t._l(t.logLevels,(function(e,i){return s("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(i)+" ")])})),0),t.error.verbosity?s("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.error.verbosity)+" ")]):t._e()]),t.loading.verbosity?s("Spinner",{staticClass:"ml-2",attrs:{width:"24"}}):t._e()],1),s("div",{staticClass:"form-group"},[s("a",{staticClass:"btn btn-primary mr-2",class:{disabled:!t.logExists},on:{click:t.downloadLogs}},[t._v(" "+t._s(t.__("Download logs","integration-cds"))+" ")]),s("a",{staticClass:"btn btn-danger mr-2",class:{disabled:!t.logExists},on:{click:t.removeLogs}},[t._v(" "+t._s(t.__("Remove logs","integration-cds"))+" ")]),s("a",{ref:"showRecentLogLink",staticClass:"btn btn-link btn-sm text-dotted collapsible collapsed dotted-link",class:{disabled:!t.logExists},attrs:{"data-toggle":"collapse",href:"#show-recent-log","aria-expanded":"false"}},[s("span",{staticClass:"text-hidden"},[t._v(t._s(t.__("Show recent log","integration-cds")))]),s("span",{staticClass:"text-shown"},[t._v(t._s(t.__("Hide recent log","integration-cds")))])]),t.loading.logs?s("Spinner",{staticClass:"ml-2",attrs:{width:"24"}}):t._e(),s("div",{ref:"showRecentLogTable",staticClass:"table-responsive mt-2 collapse",attrs:{id:"show-recent-log"}},[s("LogTable",{attrs:{logs:t.logTail}})],1)],1),s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.logNotificationsEnabled,expression:"logNotificationsEnabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"settings-log-notifications-enabled"},domProps:{checked:Array.isArray(t.logNotificationsEnabled)?t._i(t.logNotificationsEnabled,null)>-1:t.logNotificationsEnabled},on:{change:function(e){var s=t.logNotificationsEnabled,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&(t.logNotificationsEnabled=s.concat([n])):o>-1&&(t.logNotificationsEnabled=s.slice(0,o).concat(s.slice(o+1)))}else t.logNotificationsEnabled=a}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"settings-log-notifications-enabled"}},[t._v(" "+t._s(t.__("Notify administrator about logged events","integration-cds"))+" ")]),t.loading.logNotifications?s("Spinner",{staticClass:"ml-2",attrs:{width:"20","style-ex":"vertical-align: top;"}}):t._e()],1)]),s("div",{staticClass:"form-group ml-4",class:{"text-muted":!t.logNotificationsEnabled}},[s("div",[s("label",[t._v(" "+t._s(t.__("Minimum logging verbosity for notifications","integration-cds"))+": "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.logNotificationsLevel,expression:"logNotificationsLevel"}],staticClass:"custom-select inline-form-control",class:{"is-invalid":t.error.logNotifications},attrs:{disabled:!t.logNotificationsEnabled||t.loading.logNotifications},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.logNotificationsLevel=e.target.multiple?s:s[0]}}},t._l(t.logLevels,(function(e,i){return s("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(i)+" ")])})),0)])]),s("div",[s("label",[t._v(" "+t._s(t.__("Send notifications every","integration-cds"))+": "),s("input",{staticClass:"form-control inline-form-control",staticStyle:{width:"5rem"},attrs:{type:"text",min:"1",step:"1",id:"settings-log-notifications-frequency",disabled:!t.logNotificationsEnabled||t.loading.logNotifications},domProps:{value:t.logNotificationsFrequency},on:{change:t.updateLogNotificationsFrequency}}),t._v(" "+t._s(t.__("hours","integration-cds"))+" ")])]),t.error.logNotifications?s("div",{staticClass:"alert alert-danger"},[t._v(" "+t._s(t.error.logNotifications)+" ")]):t._e()])])},oa=[],ra=(s("ac1f"),s("079c"),{computed:{isCheckingRegistration(){return this.registrationStatus===Jt},isSiteRegistered(){return this.registrationStatus===Gt},isSiteNotRegistered(){return this.registrationStatus===Qt},...Object(c["e"])({registrationStatus:t=>t.registrationStatus.status,registrationError:t=>t.registrationStatus.error})}}),la={computed:{isCheckingLicense(){return this.licenseStatus===T},isLicensed(){return this.licenseStatus===k},isNotLicensed(){return this.licenseStatus===x},...Object(c["e"])({licenseStatus:t=>t.licenseStatus.status,licenseDetails:t=>t.licenseStatus.details,licenseError:t=>t.licenseStatus.error})}},ca=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticClass:"table table-sm table-hover"},[s("tbody",[t._l(t.miscDetails,(function(e,i){return[s("tr",{key:i},[s("td",[t._v(t._s(i))]),s("td",[t._v(t._s(e))])])]})),t.isSolutionInstalled?t._l(t.solutionDetails,(function(e,i){return s("tr",{key:i},[s("td",[t._v("solution_"+t._s(i))]),s("td",[t._v(t._s(e))])])})):t._e()],2)])},da=[],ua={name:"DetailsTable",props:["details"],computed:{isSolutionInstalled(){return this.details.solutionDetails&&this.details.solutionDetails.isInstalled},solutionDetails(){return this.isSolutionInstalled?j()(this.details.solutionDetails,["isInstalled"]):[]},miscDetails(){return j()(this.details,["solutionDetails"])}}},ma=ua,pa=Object(L["a"])(ma,ca,da,!1,null,"0f4066a9",null),ga=pa.exports,ha=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",{staticClass:"table table-sm small log-table"},[t._m(0),t._l(t.logs,(function(t,e){return s("LogRecord",{key:e,attrs:{id:e,record:t}})}))],2)},fa=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-light"},[s("tr",[s("th",[t._v("Timestamp")]),s("th",[t._v("Level")]),s("th",{staticClass:"log-record"},[t._v("Description")]),s("th",[t._v("Context")])])])}],va=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tbody",[s("tr",{class:[t.levelColorCls]},[s("th",{staticClass:"log-timestamp"},[t._v(t._s(t.record.datetime.date||t.record.datetime))]),s("td",[t._v(t._s(t.record.level))]),s("td",{staticClass:"log-record"},[s("span",{staticClass:"badge badge-secondary"},[t._v(t._s(t.record.name))]),t._v(" "+t._s(t.record.message)+" ")]),s("td",[t.hasContext?[s("a",{staticClass:"btn btn-sm btn-link px-0 collapsible collapsed dotted-link",attrs:{"data-toggle":"collapse",href:"#expand-log-context-"+t.id,"aria-expanded":"false"}},[s("span",{staticClass:"text-hidden"},[t._v("Expand")]),s("span",{staticClass:"text-shown"},[t._v("Collapse")])])]:t._e()],2)]),t.hasContext?[s("tr",{key:"ctx-"+t.record.datetime},[s("td",{staticClass:"border-0 p-0 log-context",attrs:{colspan:"4"}},[s("div",{staticClass:"pt-1 collapse",attrs:{id:"expand-log-context-"+t.id}},[s("pre",{staticClass:"text-details"},[t._v(t._s(t.record.context))])])])])]:t._e()],2)},_a=[];const ba={DEBUG:"table-info",INFO:"table-info",NOTICE:"table-primary",WARNING:"table-warning",ERROR:"table-danger",CRITICAL:"table-danger",ALERT:"table-danger",EMERGENCY:"table-danger"};var ya={name:"LogRecord",props:["record","id"],computed:{hasContext(){return!("[]"===this.record.context||"{}"===this.record.context)},levelColorCls(){return ba[this.record.level.toUpperCase()]||""}}},Ca=ya,Sa=(s("5f10"),Object(L["a"])(Ca,va,_a,!1,null,"5b64d11e",null)),wa=Sa.exports,ka={name:"LogTable",components:{LogRecord:wa},props:["logs"]},xa=ka,Ta=(s("31a2"),Object(L["a"])(xa,ha,fa,!1,null,"2e729dbc",null)),Na=Ta.exports,Pa=s("d623"),Fa=s.n(Pa),Aa=s("77c1"),Da=s.n(Aa),Ea=s("8d76"),$a=s.n(Ea);const La=window.icdsSystemInformation,Oa=window.icdsLoggingVerbosity,Ra=window.icdsRecentLogRecords,Ia=window.icdsAdvancedSettings;var Ma={name:"StatusPanel",components:{ButtonLoader:vs,LogTable:Na,DetailsTable:ga,Spinner:ps,Panel:is},props:["meta"],mixins:[X,ra,la,Y],data(){return{loading:{verbosity:!1,logNotifications:!1,updateAdvSettings:!1,logs:!1,license:!1},error:{verbosity:null,logNotifications:null,updateAdvSettings:null,licenseMessage:"",licenseRegisterData:{}},licenseRegisterData:{companyName:"",firstName:"",lastName:"",email:""},advFlags:Ia,logTail:Ra}},computed:{...Object(c["c"])({components:"components/components"}),isPremiumAvailable:Xe,statusLabel(){switch(this.connStatus){case B:return"Not connected";case q:return"Connected";case U:return"Connecting..."}return"Unknown status"},siteRegistrationLabel(){if(this.isCheckingRegistration)return this.__("Checking...","integration-cds");let t=this.isSiteRegistered?this.__("Registered","integration-cds"):this.__("Not registered","integration-cds");return null!==this.registrationError&&(t=`${t} (${this.registrationError})`),t},siteLicenseLabel(){if(this.isCheckingLicense)return this.__("Checking...","integration-cds");let t=this.isLicensed?this.__("Licensed","integration-cds"):this.__("License not found","integration-cds");return this.error.licenseMessage&&(t=""+this.error.licenseMessage),t},logLevel:{get(){return this.$store.state.settings.logging.verbosity},set(t){this.loading.verbosity=!0,this.error.verbosity=null,this.$store.dispatch("settings/logging/changeVerbosity",t).then(()=>{this.loading.verbosity=!1,this.$messageService.success("Logging verbosity has been updated successfully.")}).catch(t=>{this.loading.verbosity=!1,this.error.verbosity=t.message})}},logNotificationsEnabled:{get(){return this.$store.state.settings.logging.notificationsEnabled},set(t){this.loading.logNotifications=!0,this.error.logNotifications=null,this.$store.dispatch("settings/logging/changeNotificationsEnabling",t).then(()=>{this.loading.logNotifications=!1,this.$messageService.success("Notifications settings has been saved successfully.")}).catch(t=>{this.loading.logNotifications=!1,this.error.logNotifications=t.message})}},logNotificationsLevel:{get(){return this.$store.state.settings.logging.notificationsVerbosity},set(t){this.loading.logNotifications=!0,this.error.logNotifications=null,this.$store.dispatch("settings/logging/changeNotificationsVerbosity",t).then(()=>{this.loading.logNotifications=!1,this.$messageService.success("Notifications settings has been saved successfully.")}).catch(t=>{this.loading.logNotifications=!1,this.error.logNotifications=t.message})}},logNotificationsFrequency:{get(){return this.$store.state.settings.logging.notificationsFrequency},set(t){this.loading.logNotifications=!0,this.error.logNotifications=null,this.$store.dispatch("settings/logging/changeNotificationsFrequency",t).then(()=>{this.loading.logNotifications=!1,this.$messageService.success("Notifications settings has been saved successfully.")}).catch(t=>{this.loading.logNotifications=!1,this.error.logNotifications=t.message})}},logLevels(){return Oa},logExists(){return Fa()(this.logTail)>0},systemInfo(){return La},recommendations(){return La.recommendations},logsStoreInDb(){return this.advFlags.ICDS_DB_LOGS&&this.advFlags.ICDS_DB_LOGS.value}},methods:{downloadDiagnostics(){let t=JSON.stringify(La),e=document.createElement("a");e.href="data:attachment/text,"+encodeURI(t),e.target="_blank",e.download="icds_diagnostic.json",e.style.display="none",document.body.appendChild(e),e.click(),e.remove()},removeLogs(){confirm("Log files will be deleted forever. Are you sure?")&&(this.loading.logs=!0,S().post("remove_logs").then(()=>{this.$messageService.success("Logs has been removed successfully."),this.logTail={},$a()(this.$refs.showRecentLogLink).addClass("collapsed"),$a()(this.$refs.showRecentLogTable).removeClass("show")}).catch(()=>{this.$messageService.error("Cannot remove logs")}).finally(()=>{this.loading.logs=!1}))},downloadLogs(){this.loading.logs=!0;let t={responseType:"blob"};this.logsStoreInDb&&(t={}),S().get("logs",t).then(t=>{const e=document.createElement("a");let s="";this.logsStoreInDb?(s="icds_logs_"+(new Date).toISOString().split("T")[0]+".txt",e.href="data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(t.data.logs,null,4))):(s=t.headers["content-disposition"].match(/.*filename=(.*)/)[1],e.href=window.URL.createObjectURL(t.data)),e.setAttribute("download",s),document.body.appendChild(e),e.click(),e.remove()}).catch(()=>{this.$messageService.error("Log files not found.")}).finally(()=>{this.loading.logs=!1})},updateLogNotificationsFrequency(t){this.logNotificationsFrequency=parseInt(t.target.value)||0},setAdvFlag({attribute:t,value:e}){this.advFlags[t].value=e,this.advFlags[t].isChanged=!0,this.saveAdvFlags()},saveAdvFlags(){this.loading.updateAdvSettings=!0,this.error.updateAdvSettings=null;let t=zt()(Da()(this.advFlags,"isChanged"),"value");S().post("advanced_settings",{settings:t}).then(()=>{this.loading.updateAdvSettings=!1,this.$messageService.success("Settings has been saved successfully.")}).catch(t=>{this.loading.updateAdvSettings=!1,this.error.updateAdvSettings=t.message})},registerLicense(){this.loading.license=!0,w().post("apply_license",{licenseRegisterData:this.licenseRegisterData}).then(t=>{Ye.dispatch("licenseStatus/refresh")}).catch(t=>{var e;this.error.licenseMessage=t.message,this.error.licenseRegisterData=null!==(e=t.data)&&void 0!==e?e:{}}).finally(()=>{this.loading.license=!1})}}},Va=Ma,ja=(s("88b8"),Object(L["a"])(Va,na,oa,!1,null,"4d689775",null)),Ba=ja.exports,Ua=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"instance-uri"}},[t._v(t._s(t.__("Organization URL.","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.instanceUrl,expression:"instanceUrl",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"url",id:"instance-uri"},domProps:{value:t.instanceUrl},on:{input:function(e){e.target.composing||(t.instanceUrl=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("Enter the URL you use to access your Dataverse organization.","integration-cds"))+" ")])]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.skipCertificateVerification,expression:"skipCertificateVerification"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"settings-connection-skip-cert-verification"},domProps:{checked:Array.isArray(t.skipCertificateVerification)?t._i(t.skipCertificateVerification,null)>-1:t.skipCertificateVerification},on:{change:function(e){var s=t.skipCertificateVerification,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&(t.skipCertificateVerification=s.concat([n])):o>-1&&(t.skipCertificateVerification=s.slice(0,o).concat(s.slice(o+1)))}else t.skipCertificateVerification=a}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"settings-connection-skip-cert-verification"}},[t._v(" "+t._s(t.__("Ignore SSL / TLS errors","integration-cds"))+" ")])]),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("Sometimes the connection to Dataverse fails due to certificate verification issues caused by improper server configuration. Check this if you want to suppress certificate verification errors. This may present security risks!","integration-cds"))+" ")])]),s("hr"),s("div",{staticClass:"form-group"},[s("div",[s("label",[t._v(t._s(t.__("Deployment Type","integration-cds")))])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.instanceType,expression:"instanceType"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"deployment-type-online",name:"deployment-type",value:"online"},domProps:{checked:t._q(t.instanceType,"online")},on:{change:function(e){t.instanceType="online"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"deployment-type-online"}},[t._v(t._s(t.__("Online","integration-cds")))])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.instanceType,expression:"instanceType"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"deployment-type-ifd",name:"deployment-type",value:"ifd"},domProps:{checked:t._q(t.instanceType,"ifd")},on:{change:function(e){t.instanceType="ifd"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"deployment-type-ifd"}},[t._v(t._s(t.__("Internet-Facing Deployment","integration-cds")))])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.instanceType,expression:"instanceType"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"deployment-type-onpremise",name:"deployment-type",value:"onpremise"},domProps:{checked:t._q(t.instanceType,"onpremise")},on:{change:function(e){t.instanceType="onpremise"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"deployment-type-onpremise"}},[t._v(t._s(t.__("On-Premise","integration-cds")))])])]),"online"===t.instanceType?[s("div",{staticClass:"form-group"},[s("div",[s("label",[t._v(t._s(t.__("Authentication Method","integration-cds")))])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.authenticationType,expression:"authenticationType"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"auth-type-s2s-secret",name:"auth-type",value:"s2s-secret"},domProps:{checked:t._q(t.authenticationType,"s2s-secret")},on:{change:function(e){t.authenticationType="s2s-secret"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"auth-type-s2s-secret"}},[t._v(t._s(t.__("OAuth 2.0 / Shared Secret","integration-cds")))])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.authenticationType,expression:"authenticationType"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"auth-type-s2s-certificate",name:"auth-type",value:"s2s-certificate"},domProps:{checked:t._q(t.authenticationType,"s2s-certificate")},on:{change:function(e){t.authenticationType="s2s-certificate"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"auth-type-s2s-certificate"}},[t._v(t._s(t.__("OAuth 2.0 / Certificate","integration-cds")))])])]),"s2s-secret"===t.authenticationType?[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"settings-connection-s2s-application-id"}},[t._v(t._s(t.__("Application ID","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.applicationId,expression:"applicationId"}],staticClass:"form-control",attrs:{type:"text",id:"settings-connection-s2s-application-id",placeholder:"00000000-0000-0000-0000-000000000000"},domProps:{value:t.applicationId},on:{input:function(e){e.target.composing||(t.applicationId=e.target.value)}}}),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("Identifier of the Azure Active Directory application registration.","integration-cds"))+" "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/walkthrough-multi-tenant-server-server-authentication#register-your-application-on-azure-ad",target:"_blank"}},[t._v(t._s(t.__("How do I get this?","integration-cds")))])])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"settings-connection-s2s-secret"}},[t._v(t._s(t.__("Client Secret","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.applicationSecret,expression:"applicationSecret"}],staticClass:"form-control",attrs:{type:"password",id:"settings-connection-s2s-secret",placeholder:"Enter the secret here"},domProps:{value:t.applicationSecret},on:{input:function(e){e.target.composing||(t.applicationSecret=e.target.value)}}}),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("A key associated with the Azure Active Directory app specified above. ","integration-cds"))),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/walkthrough-multi-tenant-server-server-authentication#register-your-application-on-azure-ad",target:"_blank"}},[t._v(t._s(t.__("How do I get this?","integration-cds")))])])])]:"s2s-certificate"===t.authenticationType?[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"settings-connection-s2s-application-id"}},[t._v(t._s(t.__("Application ID","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.applicationId,expression:"applicationId"}],staticClass:"form-control",attrs:{type:"text",id:"settings-connection-s2s-cert-application-id",placeholder:"00000000-0000-0000-0000-000000000000"},domProps:{value:t.applicationId},on:{input:function(e){e.target.composing||(t.applicationId=e.target.value)}}}),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("Identifier of the Azure Active Directory application registration.","integration-cds"))+" "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/walkthrough-multi-tenant-server-server-authentication#register-your-application-on-azure-ad",target:"_blank"}},[t._v(t._s(t.__("How do I get this?","integration-cds")))])])]),s("div",{staticClass:"form-group"},[s("div",[s("label",[t._v(t._s(t.__("Method of specifying the path to the certificate","integration-cds")))])]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-control custom-radio custom-control-inline",attrs:{"aria-describedby":"uploadTypeHelp"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.certificatePathMethod,expression:"certificatePathMethod"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"certificate-path-upload",name:"certificate-path-type-specify",value:"file_upload"},domProps:{checked:t._q(t.certificatePathMethod,"file_upload")},on:{change:function(e){t.certificatePathMethod="file_upload"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"certificate-path-upload"}},[t._v(t._s(t.__("Upload Certificate file","integration-cds")))])]),s("small",{staticClass:"form-text text-muted",attrs:{id:"uploadTypeHelp"}},[t._v("This method leads to a potential security vulnerability")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.certificatePathMethod,expression:"certificatePathMethod"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"certificate-path-enter",name:"certificate-path-type-specify",value:"enter_path"},domProps:{checked:t._q(t.certificatePathMethod,"enter_path")},on:{change:function(e){t.certificatePathMethod="enter_path"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"certificate-path-enter"}},[t._v(t._s(t.__("Enter the full path","integration-cds")))])])]),["file_upload"===t.certificatePathMethod?s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"certificateFile"}},[t._v(t._s(t.__("Please select a certificate file","integration-cds")))]),s("div",{staticClass:"custom-file mb-3"},[s("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"certificateFile"},on:{change:function(e){t.certificateFile=e.target.files[0]}}}),s("label",{staticClass:"custom-file-label",attrs:{for:"certificateFile"}},[t._v(t._s(t.certificateFile?t.certificateFile.name:t.__("Choose file...","integration-cds")))])])]):t._e(),"enter_path"===t.certificatePathMethod?s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"certificatePath"}},[t._v(t._s(t.__("Certificate path","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.certificatePath,expression:"certificatePath"}],staticClass:"form-control",attrs:{type:"text",id:"certificatePath",placeholder:"Enter full path to the certificate"},domProps:{value:t.certificatePath},on:{input:function(e){e.target.composing||(t.certificatePath=e.target.value)}}}),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("Full path to .pfx certificate file","integration-cds"))+" ")])]):t._e()],s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"settings-connection-s2s-secret"}},[t._v(t._s(t.__("Certificate passphrase","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.passphrase,expression:"passphrase"}],staticClass:"form-control",attrs:{type:"password",id:"settings-connection-s2s-cert-pfx-passphrase",placeholder:"Enter passphrase for the .pfx certificate"},domProps:{value:t.passphrase},on:{input:function(e){e.target.composing||(t.passphrase=e.target.value)}}}),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__(".pfx certificate passphrase","integration-cds"))+" ")])])]:t.authenticationType?[s("div",{staticClass:"alert alert-secondary mb-0",attrs:{role:"alert"}},[t._v(" "+t._s(t.__("Sorry, this authentication type is not supported at the moment.","integration-cds"))+" ")])]:void 0]:t.instanceType?[s("div",{staticClass:"alert alert-secondary mb-0",attrs:{role:"alert"}},[t._v(" "+t._s(t.__("Sorry, this deployment type is not supported at the moment.","integration-cds"))+" ")])]:void 0,[s("hr"),s("p",[t._v(t._s(t.__("Once you have all connection settings set, you can establish a test connection to validate them.","integration-cds")))]),s("div",{staticClass:"d-flex"},[s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.testConnection}},[t._v(t._s(t.__("Verify Connection","integration-cds")))]),t.isGoodConnection?s("div",{staticClass:"border-left ml-2 pl-2"},[s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.connect}},[t._v(t._s(t.__("Save & Connect","integration-cds")))])]):t._e(),t.loading?s("div",{staticClass:"border-left ml-2 pl-2"},[s("Spinner",{attrs:{width:"28"}})],1):t.error?s("div",{staticClass:"border-left ml-2 pl-2 btn-aligned text-danger"},[t._v(" "+t._s(t.error)+" ")]):t._e()]),t.isGoodConnection?s("p",{staticClass:"alert alert-success mt-2",class:{"mb-0":!t.isCheckingConnection}},[t._v(" "+t._s(t.__("Connection to Dataverse has been tested successfully. ","integration-cds"))),s("a",{staticClass:"text-success",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.connect.apply(null,arguments)}}},[t._v(t._s(t.__("Save settings","integration-cds")))]),t._v(" "+t._s(t.__("to connect to Dataverse.","integration-cds"))+" ")]):t._e(),s("br")],t.isConnected?s("ButtonLoader",{attrs:{"btn-class":"btn-danger",loading:t.loading,error:t.error},on:{click:t.disconnect}},[t._v(" "+t._s(t.__("Disconnect from Dataverse","integration-cds"))+" ")]):t._e(),t.isCheckingConnection?s("Spinner",{attrs:{width:"28"}}):t._e(),s("hr"),t.isPremiumAvailable&&t.isConnected?[s("h5",[t._v(t._s(t.__("Site Registration in Dataverse","integration-cds")))]),t.isSiteRegistered?t.isSiteRegistered?s("div",{staticClass:"mt-2"},[s("ButtonLoader",{attrs:{"btn-class":"btn-info nowrap",loading:t.registering,disabled:t.registering,error:t.regError},on:{click:t.unregisterSite}},[t._v(" "+t._s(t.__("Remove registration","integration-cds"))+" ")]),s("small",{staticClass:"form-text text-muted"},[t._v(t._s(t.__("You can remove site registration from connected Dataverse instance, or you can do it manually later. You will not be able to use premium features after registration is removed.","integration-cds")))])],1):t._e():s("div",{staticClass:"mt-2"},[s("ButtonLoader",{attrs:{"btn-class":"btn-info nowrap",loading:t.registering,disabled:t.registering,error:t.regError},on:{click:t.registerSite}},[t._v(" "+t._s(t.__("Add registration","integration-cds"))+" ")]),s("small",{staticClass:"form-text text-muted"},[t._v(t._s(t.__("You can automatically register this site within connected Dataverse instance, or you can do it manually later. You will not be able to use premium features until registration is completed. Please note application password for you user account will be created in order to complete registration.","integration-cds")))])],1)]:t._e()],2)},qa=[],za=(s("7d54"),{props:["meta"]}),Wa=s("3852"),Ka=s.n(Wa),Ha=s("8a30"),Xa=s.n(Ha);const Ya=["online"],Ga={online:["s2s-secret","s2s-certificate"],ifd:[],onpremise:[]};var Qa={name:"ConnectionPanel",components:{ButtonLoader:vs,Panel:is,Spinner:ps},mixins:[za,X,ra,Y],data(){return{loading:!1,error:null,registering:!1,regError:null,isGoodConnection:!1,certificateFile:null}},computed:{isPremiumAvailable:Xe,canValidateConnection:function(){return!(!this.instanceUrl||!this.instanceUrl.match(/^https?:\/\/[a-z0-9\-.:/]+$/i))&&(!(!this.instanceType||!Xa()(Ya,this.instanceType))&&(!!(this.authenticationType&&Ka()(Ga,this.instanceType)&&Xa()(Ga[this.instanceType],this.authenticationType))&&(!!("online"!==this.instanceType||"s2s-secret"!==this.authenticationType||this.applicationId&&this.applicationSecret&&this.applicationId.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)&&this.applicationSecret.length)&&!!("online"!==this.instanceType||"s2s-certificate"!==this.authenticationType||this.applicationId&&this.applicationId.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)))))},instanceUrl:{get(){return this.connection.instanceURI},set(t){this.isGoodConnection=!1,this.$store.commit("settings/connection/setInstanceUrl",t)}},skipCertificateVerification:{get(){return this.connection.skipCertificateVerification},set(t){this.isGoodConnection=!1,this.$store.commit("settings/connection/setSkipVerification",t)}},instanceType:{get(){return this.connection.instanceType},set(t){this.isGoodConnection=!1,this.$store.commit("settings/connection/setInstanceType",t)}},authenticationType:{get(){return this.connection.authenticationType},set(t){this.isGoodConnection=!1,this.$store.commit("settings/connection/setAuthenticationType",t)}},applicationId:{get(){return this.connection.authenticationSettings.applicationID},set(t){this.isGoodConnection=!1,this.$store.commit("settings/connection/setApplicationId",t)}},applicationSecret:{get(){return this.connection.authenticationSettings.applicationSecret},set(t){this.isGoodConnection=!1,this.$store.commit("settings/connection/setApplicationSecret",t)}},certificatePathMethod:{get(){return this.connection.certificatePathMethod||"enter_path"},set(t){this.isGoodConnection=!1,this.$store.commit("settings/connection/setCertificatePathMethod",t)}},certificatePath:{get(){return this.connection.authenticationSettings.certificatePath},set(t){this.isGoodConnection=!1,this.$store.commit("settings/connection/setCertificatePath",t)}},passphrase:{get(){return this.connection.authenticationSettings.passphrase},set(t){this.isGoodConnection=!1,this.$store.commit("settings/connection/setPassphrase",t)}},...Object(c["e"])({connection:t=>t.settings.connection})},methods:{testConnection(){this.loading=!0,this.error=null,this.isGoodConnection=!1,this.registering=!1;let t=null,e=null;"s2s-certificate"===this.connection.authenticationType?(this.connection.authenticationSettings.applicationSecret=null,"file_upload"===this.certificatePathMethod?(t=new FormData,Object.keys(this.connection).forEach(e=>{t.append(e,"authenticationSettings"===e?JSON.stringify(this.connection[e]):this.connection[e])}),t.append("certificate",this.certificateFile),e={headers:{"Content-Type":"multipart/form-data"}}):t=this.connection):"s2s-secret"===this.connection.authenticationType&&(t=this.connection),w().post("check_connection",t,e).then(t=>{"s2s-certificate"===this.connection.authenticationType&&"file_upload"===this.certificatePathMethod&&(this.certificatePath=t.data),this.isGoodConnection=!0}).catch(t=>{this.error=t.message}).finally(()=>{this.loading=!1})},connect(){this.loading=!0,this.error=null,w().put("settings",{connection:this.connection}).then(()=>(this.loading=!1,this.$messageService.success("Connection settings have been saved successfully."),this.$store.dispatch("connectionStatus/refresh"))).catch(t=>{this.loading=!1,this.error=t.message})},disconnect(){this.loading=!0,this.error=null,w().post("reset_connection",{authenticationType:this.connection.authenticationType,certificatePathMethod:this.certificatePathMethod,certificatePath:this.certificatePath}).then(t=>(this.loading=!1,this.$store.commit("settings/connection/initialize",t.data.settings),this.$messageService.success("Disconnected from Dataverse."),this.$store.dispatch("connectionStatus/refresh"))).then(()=>{this.isGoodConnection=!1}).catch(t=>{this.loading=!1,this.error=t.message})},registerSite(){this.registering=!0,w().post("site_registration").then(()=>this.$store.dispatch("registrationStatus/refresh")).catch(t=>{this.regError=t.message}).finally(()=>{this.registering=!1})},unregisterSite(){this.registering=!0,w().delete("site_registration").then(()=>this.$store.dispatch("registrationStatus/refresh")).catch(t=>{this.regError=t.message}).finally(()=>{this.registering=!1})}}},Ja=Qa,Za=Object(L["a"])(Ja,Ua,qa,!1,null,"39802a8f",null),tn=Za.exports,en=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("div",{staticClass:"mb-2"},[s("p",{staticClass:"form-text text-muted"},[t._v(t._s(t.__("Dataverse Integration caches multiple types of Dataverse-related data to achieve best possible performance. The data includes form and view definitions, individual records data, and organization and OData metadata.","integration-cds")))])]),s("div",{staticClass:"mb-2"},[s("p",[t._v(t._s(t.__("Storage type","integration-cds"))+": "+t._s(t.cacheInfo.adapter))])]),s("p",[t._v("Clear cache storage:")]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.target,expression:"target"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"cacheClearAll",id:"cacheClearAll",value:"all"},domProps:{checked:t._q(t.target,"all")},on:{change:function(e){t.target="all"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"cacheClearAll"}},[t._v(t._s(t.__("All","integration-cds")))]),s("small",{staticClass:"d-block text-muted"},[t._v(t._s(t.__("Clear all data stored in the cache.","integration-cds")))])])]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.target,expression:"target"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"cacheClearByType",id:"cacheClearByType",value:"pools"},domProps:{checked:t._q(t.target,"pools")},on:{change:function(e){t.target="pools"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"cacheClearByType"}},[t._v(t._s(t.__("By type","integration-cds")))]),s("small",{staticClass:"d-block text-muted"},[t._v(t._s(t.__("Clear only selected type of data in the cache.","integration-cds")))])])]),s("div",{staticClass:"form-group m-3 pl-1"},[t.allowSelectAll?s("button",{staticClass:"btn btn-sm btn-link dotted-link mb-3 ml-2",attrs:{type:"button",disabled:"pools"!==t.target},on:{click:t.selectAllPools}},[t._v(t._s(t.__("Select all")))]):s("button",{staticClass:"btn btn-sm btn-link dotted-link mb-3 ml-2",attrs:{type:"button",disabled:"pools"!==t.target},on:{click:t.deselectAllPools}},[t._v(t._s(t.__("Deselect all")))]),s("br"),t._l(t.cacheInfo.pools,(function(e,i){return s("div",{key:i,staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedPools,expression:"selectedPools"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"cacheClearType-"+i,disabled:"pools"!==t.target},domProps:{value:i,checked:Array.isArray(t.selectedPools)?t._i(t.selectedPools,i)>-1:t.selectedPools},on:{change:function(e){var s=t.selectedPools,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=i,r=t._i(s,o);a.checked?r<0&&(t.selectedPools=s.concat([o])):r>-1&&(t.selectedPools=s.slice(0,r).concat(s.slice(r+1)))}else t.selectedPools=n}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"cacheClearType-"+i}},[t._v(t._s(e))])])}))],2),s("ButtonLoader",{attrs:{loading:t.loading,error:t.error},on:{click:t.purge}},[t._v(" "+t._s(t.__("Clear selected caches","integration-cds"))+" ")]),s("hr"),s("h5",[t._v("Table Records Cache Settings")]),s("div",{staticClass:"mb-2"},[s("p",{staticClass:"form-text text-muted"},[t._v(t._s(t.__("Adjust the caching duration for specified table records.","integration-cds")))])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-7"},[s("table",{staticClass:"table table-sm table-borderless table-hover"},[s("thead",[s("tr",[s("th",{staticClass:"pt-0 pb-0"},[t._v(t._s(t.__("Table","integration-cds")))]),s("th",{staticClass:"pt-0 pb-0",staticStyle:{width:"10%","min-width":"150px"}},[t._v(t._s(t.__("Cache duration","integration-cds"))+" ")])])]),s("tbody",[s("tr",[s("td",[s("div",{staticClass:"form-control border-0 bg-transparent"},[t._v(" "+t._s(t.__("Default","integration-cds"))+" ")])]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.entityCacheDefault,expression:"entityCacheDefault"}],staticClass:"form-control",attrs:{type:"text",disabled:t.entityCacheLoading},domProps:{value:t.entityCacheDefault},on:{input:function(e){e.target.composing||(t.entityCacheDefault=e.target.value)}}})]),s("td")]),t._l(t.entityCacheDurations,(function(e,i){return s("tr",{key:i},[s("td",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.entityCacheDurations[i]["entity"],expression:"entityCacheDurations[did]['entity']"}],staticClass:"custom-select",attrs:{disabled:t.entityCacheLoading},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.entityCacheDurations[i],"entity",e.target.multiple?s:s[0])},function(e){return t.saveMapping(i)}]}},t._l(t.entitiesList,(function(e,i){return s("option",{key:i,domProps:{value:i}},[t._v(" "+t._s(t.entityDisplayName(i,e))+" ")])})),0)]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.entityCacheDurations[i]["duration"],expression:"entityCacheDurations[did]['duration']"}],staticClass:"form-control",attrs:{type:"text",disabled:t.entityCacheLoading},domProps:{value:t.entityCacheDurations[i]["duration"]},on:{blur:function(e){return t.saveMapping(i)},input:function(e){e.target.composing||t.$set(t.entityCacheDurations[i],"duration",e.target.value)}}})]),s("td",[s("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.removeMapping(i)}}},[t._v("X")])])])}))],2)])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("ButtonLoader",{attrs:{"btn-class":"btn-success",loading:t.entityCacheLoading,"loading-message":t.__("Saving...","integration-cds"),disabled:t.entityCacheLoading},on:{click:t.addMapping}},[t._v(" "+t._s(t.__("Add","integration-cds"))+" ")])],1)])],1)},sn=[];const an=window.icdsCache,nn=window.icdsEntitiesList;var on={name:"CachePanel",components:{ButtonLoader:vs,Panel:is},mixins:[za,Y],data(){return{target:"all",selectedPools:[],loading:!1,error:null,entityCacheDurations:this.$store.state.settings.cache.entityCacheDurations,entityCacheDefault:this.$store.state.settings.cache.entityCacheDefault,entityCacheLoading:!1}},methods:{purge(){if(this.loading=!0,this.error=null,"all"===this.target)return void w().delete("cache").then(()=>{this.loading=!1,this.$messageService.success("All cached data has been cleared successfully.")}).catch(t=>{this.loading=!1,this.error=t.message});let t=[];m()(this.selectedPools,e=>{t.push(w().delete("cache/"+e))}),Promise.all(t).then(()=>{this.$messageService.success("Selected cache pools has been cleared successfully."),this.loading=!1}).catch(t=>{this.error=t.message,this.loading=!1})},addMapping(){this.entityCacheDurations.push({}),this.$emit("input",this.fieldsMap)},removeMapping(t){this.entityCacheDurations.splice(t,1),this.saveMapping(0)},saveMapping(t){void 0!==t&&this.entityCacheDurations[t].duration&&(this.entityCacheLoading=!0,this.$store.dispatch("settings/cache/update",{entityCacheDurations:this.entityCacheDurations,entityCacheDefault:this.entityCacheDefault}).then(()=>{this.changed=!1}).catch(t=>{this.error=t.message}).finally(()=>{this.entityCacheLoading=!1,this.$messageService.success("Saved successfully.")}))},entityDisplayName(t,e){let s=t;return e&&(s+=` (${e})`),s},selectAllPools(){this.selectedPools=ii()(this.cacheInfo.pools)},deselectAllPools(){this.selectedPools=[]}},computed:{cacheInfo(){return an},entitiesList(){return nn},allowSelectAll(){return 0===this.selectedPools.length}}},rn=on,ln=Object(L["a"])(rn,en,sn,!1,null,"5187e14a",null),cn=ln.exports,dn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.hasCustomAdapters,expression:"hasCustomAdapters"}],staticClass:"form-group"},[s("label",[t._v("You can import reCAPTCHA settings from a 3rd-party plugin.")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.adapterName,expression:"adapterName"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.adapterName=e.target.multiple?s:s[0]}}},t._l(t.adapters,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.label)+" ")])})),0),s("hr")]),"default"===t.adapterName?[s("div",{staticClass:"form-group"},[s("div",[s("label",[t._v("reCAPTCHA type")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"recaptcha-type-v3",name:"deployment-type",value:"v3"},domProps:{checked:t._q(t.type,"v3")},on:{change:function(e){t.type="v3"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"recaptcha-type-v3"}},[t._v("reCAPTCHA v3")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"recaptcha-type-v2-checkbox",name:"deployment-type",value:"v2-checkbox"},domProps:{checked:t._q(t.type,"v2-checkbox")},on:{change:function(e){t.type="v2-checkbox"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"recaptcha-type-v2-checkbox"}},[t._v("reCAPTCHA v2 with checkbox")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"recaptcha-type-v2-invisible",name:"deployment-type",value:"v2-invisible"},domProps:{checked:t._q(t.type,"v2-invisible")},on:{change:function(e){t.type="v2-invisible"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"recaptcha-type-v2-invisible"}},[t._v("reCAPTCHA v2 invisible")])])]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("label",{attrs:{for:"site-key"}},[t._v("Site key")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.siteKey,expression:"siteKey"}],staticClass:"form-control",attrs:{type:"text",id:"site-key"},domProps:{value:t.siteKey},on:{input:function(e){e.target.composing||(t.siteKey=e.target.value)}}})]),s("div",{staticClass:"col"},[s("label",{attrs:{for:"secret-key"}},[t._v("Secret key")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.secretKey,expression:"secretKey"}],staticClass:"form-control",attrs:{type:"text",id:"secret-key"},domProps:{value:t.secretKey},on:{input:function(e){e.target.composing||(t.secretKey=e.target.value)}}})])])]),s("hr"),t.type===t.constant.TYPE_V3?[s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-6"},[s("label",{attrs:{for:"score-threshold"}},[t._v(" Score threshold: "),s("b",[t._v(t._s(t.scoreThresholdLabel))])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.scoreThreshold,expression:"scoreThreshold"}],staticClass:"custom-range",attrs:{type:"range",id:"score-threshold",min:"0",max:"1",step:"0.1"},domProps:{value:t.scoreThreshold},on:{__r:function(e){t.scoreThreshold=e.target.value}}})])]),s("small",{staticClass:"form-text text-muted"},[t._v(" 1.0 is very likely a good interaction, 0.0 is very likely a bot. By default, you can use a threshold of 0.5. ")])]:t.type===t.constant.TYPE_V2_CHECKBOX?[s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col col-md-6"},[s("label",[t._v("Theme")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.theme,expression:"theme"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.theme=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}},[t._v("– Select –")]),t._l(t.themes,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2),s("small",{staticClass:"form-text text-muted"},[t._v(" The color theme of the widget. ")])])]),s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col col-md-6"},[s("label",[t._v("Size")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.size,expression:"size"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.size=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}},[t._v("– Select –")]),t._l(t.sizes,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2),s("small",{staticClass:"form-text text-muted"},[t._v(" The size of the widget. ")])])])]:t.type===t.constant.TYPE_V2_INVISIBLE?[s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col col-md-6"},[s("label",[t._v("Badge position")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.badge,expression:"badge"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.badge=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}},[t._v("– Select –")]),t._l(t.badges,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2),s("small",{staticClass:"form-text text-muted"},[t._v(" Reposition the reCAPTCHA badge. "),s("em",[t._v("Inline")]),t._v(" lets you position it with CSS. ")])])])]:t._e(),t.canValidateCaptcha?[s("hr"),t.validated?t._e():s("label",[t._v("Test reCAPTCHA settings.")]),t.validating?[s("VueRecaptcha",{key:t.riKey,ref:"recaptcha",class:{"mb-2":t.type===t.constant.TYPE_V2_CHECKBOX},attrs:{"site-key":t.siteKey,type:t.type,badge:t.badge,size:t.size,theme:t.theme},on:{solved:t.onSolved,"solved-invisible":t.onSolved,failed:t.onFailed,loaded:t.onLoad}})]:t._e(),t.validated?s("ButtonLoader",{attrs:{"btn-class":"btn-success",loading:t.loading,error:t.error},on:{click:t.save}},[t._v("Save settings")]):s("ButtonLoader",{attrs:{"btn-class":"btn-success",loading:t.loading,error:t.error},on:{click:t.testRecaptcha}},[t._v("Verify")])]:t._e()]:t._e(),s("small",{staticClass:"form-text text-muted"},[t._v(" Read reCAPTCHA documentation at "),s("a",{attrs:{href:"https://developers.google.com/recaptcha"}},[t._v("developers.google.com")]),t._v(". ")])],2)},un=[],mn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{attrs:{id:t.containerId}})])},pn=[];const gn="https://www.google.com/recaptcha/api.js?onload=icdsRecaptchaOnloadCallback",hn="solved",fn="solved-invisible",vn="failed",_n="loaded";let bn,yn,Cn;function Sn(t,e){const s=document.createElement("script");return s.type="text/javascript",s.async=!0,s.defer=!0,s.id=t,s.src=gn+(e?"&render="+e:"&render=explicit"),document.body.appendChild(s),yn=new Promise(t=>{Cn=t}),yn}window.icdsRecaptchaOnloadCallback=()=>{bn=window.grecaptcha,Cn()};var wn={name:"VueRecaptcha",mounted(){this.id=ht()("icds-recaptcha-");const t=[this.id];this.type===ue&&t.push(this.siteKey),Sn(...t).then(()=>{this.$emit(_n),this.render()})},destroyed(){const t=document.getElementById(this.id);if(t){const e=t.parentNode.querySelector('script[src*="gstatic"]');e&&e.remove(),t.remove()}this.recaptchaId&&bn.reset(this.recaptchaId)},props:["type","siteKey","theme","size","badge"],data(){return{id:"",recaptchaId:null}},computed:{containerId(){return this.id+"-container"},recaptchaSettings(){return this.type===ue?{}:this.type===de?{sitekey:this.siteKey,callback:t=>this.$emit(fn,t),"expired-callback":()=>this.$emit(vn),"error-callback":()=>this.$emit(vn),badge:this.badge||fe,size:"invisible"}:this.type===ce?{sitekey:this.siteKey,callback:t=>this.$emit(hn,t),"expired-callback":()=>this.$emit(vn),"error-callback":()=>this.$emit(vn),theme:this.theme||me,size:this.size||ge}:{}}},methods:{render(){this.type!==ue&&(this.recaptchaId=bn.render(this.containerId,this.recaptchaSettings))},solve(){if(this.type!==ue)this.type===de&&bn.execute(this.recaptchaId);else try{bn.execute(this.siteKey).then(t=>this.$emit(fn,t))}catch(t){this.$emit(vn,"Failed to load or execute reCAPTCHA. Check your keys and try again.")}},reload(){this.type!==ue?null!==this.recaptchaId&&bn.reset(this.recaptchaId):this.render()}}},kn=wn,xn=Object(L["a"])(kn,mn,pn,!1,null,"57523adc",null),Tn=xn.exports;const Nn="default",Pn=window.icdsRecaptchaAdapters,Fn=window.icdsRecaptchaThemes,An=window.icdsRecaptchaSizes,Dn=window.icdsRecaptchaBadges;var En={name:"RecaptchaPanel",components:{VueRecaptcha:Tn,ButtonLoader:vs,Panel:is},mixins:[za],data:function(){return{loading:!1,error:null,riKey:ht()("ri"),validating:!1,validated:!1}},computed:{adapters:()=>Pn,themes:()=>Fn,sizes:()=>An,badges:()=>Dn,constant(){return{TYPE_V2_CHECKBOX:ce,TYPE_V2_INVISIBLE:de,TYPE_V3:ue}},canValidateCaptcha(){let t=this.recaptcha;return t.adapterName===Nn&&(!(!t.siteKey||0===t.siteKey.length)&&(!(!t.secretKey||0===t.secretKey.length)&&!(!t.type||0===t.type.length)))},scoreThresholdLabel(){return this.scoreThreshold},hasCustomAdapters(){return this.adapters.length>1},adapterName:{get(){return this.recaptcha.adapterName},set(t){this.$store.commit("settings/recaptcha/setAdapterName",t)}},type:{get(){return this.recaptcha.type},set(t){this.$store.commit("settings/recaptcha/setType",t)}},siteKey:{get(){return this.recaptcha.siteKey},set(t){this.$store.commit("settings/recaptcha/setSiteKey",t)}},secretKey:{get(){return this.recaptcha.secretKey},set(t){this.$store.commit("settings/recaptcha/setSecretKey",t)}},theme:{get(){return this.recaptcha.theme},set(t){this.$store.commit("settings/recaptcha/setTheme",t)}},size:{get(){return this.recaptcha.size},set(t){this.$store.commit("settings/recaptcha/setSize",t)}},badge:{get(){return this.recaptcha.badge},set(t){this.$store.commit("settings/recaptcha/setBadge",t)}},scoreThreshold:{get(){return this.recaptcha.scoreThreshold},set(t){this.$store.commit("settings/recaptcha/setScoreThreshold",t)}},...Object(c["e"])({recaptcha:t=>t.settings.recaptcha})},methods:{testRecaptcha(){this.validating=!0,this.validated=!1,this.loading=!0,this.error=null,this.riKey=ht()("ri")},onSolved(t){w().post("check_recaptcha",{settings:this.recaptcha,token:t}).then(()=>{this.validated=!0,this.$messageService.success("reCAPTCHA settings have been tested successfully.")}).catch(t=>{this.error=t.message}).finally(()=>{this.loading=!1})},onFailed(t){this.loading=!1,this.error=t||"Failed to verify reCAPTCHA."},onLoad(){this.$refs.recaptcha.solve()},save(){this.loading=!0,this.error=null,w().put("settings",{recaptcha:this.recaptcha}).then(()=>{this.$messageService.success("reCAPTCHA settings have been saved successfully.")}).catch(t=>{this.error=t.message}).finally(()=>{this.loading=!1,this.validated=!1})}}},$n=En,Ln=Object(L["a"])($n,dn,un,!1,null,"7ed51c3a",null),On=Ln.exports,Rn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta},scopedSlots:t._u([{key:"header",fn:function(){return[s("p",{staticClass:"lead"},[t._v(" Dataverse Integration "),s("br"),s("small",{staticClass:"text-muted"},[t._v(" "+t._s(t.__("Version","integration-cds"))+" "+t._s(t.version)+". "+t._s(t.__("Powered by","integration-cds"))+" "),s("a",{attrs:{href:"https://github.com/AlexaCRM/dynamics-webapi-toolkit"}},[t._v("Dynamics Web API Toolkit")])])]),s("hr")]},proxy:!0}])},[s("p",[t._v(" "+t._s(t.__("Documentation is available at","integration-cds"))+" "),s("a",{attrs:{href:"https://docs.alexacrm.com/"}},[t._v("docs.alexacrm.com")]),t._v(". "),s("br"),t._v(" "+t._s(t.__("Read Power Platform, Dataverse, Common Data Service and Dynamics 365 documentation at","integration-cds"))+" "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/power-platform/"}},[t._v("docs.microsoft.com")]),t._v(". ")]),s("p",{staticClass:"mb-0"},[t._v("© 2018–"+t._s((new Date).getFullYear())+" AlexaCRM")])])},In=[];const Mn=window.icdsVersion;var Vn={name:"AboutPanel",components:{Panel:is},mixins:[za,Y],computed:{version:()=>Mn}},jn=Vn,Bn=Object(L["a"])(jn,Rn,In,!1,null,"5e3e89c3",null),Un=Bn.exports,qn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("h5",[t._v(t._s(t.__("Login authorization","integration-cds")))]),s("div",{staticClass:"mb-2"},[s("AuthorizeUsersSetting")],1),s("hr"),s("h5",[t._v(t._s(t.__("Binding upon registration","integration-cds")))]),s("div",{staticClass:"mb-2"},[s("BindUsersSetting")],1),s("div",{staticClass:"mb-2"},[s("UserModeSetting")],1),s("div",{staticClass:"mb-2"},[s("RecordMatchingSetting")],1),s("hr"),s("h5",[t._v(t._s(t.__("Field synchronization","integration-cds")))]),s("div",{staticClass:"form-group"},[s("FieldSyncSetting")],1),s("div",{staticClass:"form-group"},[s("SyncModeSetting")],1),s("div",{staticClass:"form-group"},[s("SyncMapSetting")],1)])},zn=[],Wn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"custom-control custom-checkbox"},[s("div",{staticClass:"d-flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.setting,expression:"setting"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"ubEnableAutoBinding"},domProps:{checked:Array.isArray(t.setting)?t._i(t.setting,null)>-1:t.setting},on:{change:function(e){var s=t.setting,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&(t.setting=s.concat([n])):o>-1&&(t.setting=s.slice(0,o).concat(s.slice(o+1)))}else t.setting=a}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"ubEnableAutoBinding"}},[t._v(" "+t._s(t.__("Bind new users to a corresponding Dataverse row automatically","integration-cds"))+" ")]),t.loading?s("div",{staticClass:"border-left ml-3 pl-3"},[s("Spinner",{attrs:{width:"16"}})],1):t.error?s("div",{staticClass:"border-left ml-3 pl-3 text-danger"},[t._v(" "+t._s(t.error)+" ")]):t._e()]),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("When a new WordPress user is created, either through self-registration or programmatically, they will be bound to a corresponding Dataverse row.","integration-cds"))+" ")])])])},Kn=[],Hn={name:"BindUsersSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1,error:null}},computed:{setting:{get(){return this.$store.state.settings.userBinding.bindNewUsers},set(t){this.loading=!0,this.error=null,this.$store.dispatch("settings/userBinding/update",{bindNewUsers:t}).then(()=>{this.loading=!1}).catch(t=>{this.loading=!1,this.error=t.message})}}}},Xn=Hn,Yn=Object(L["a"])(Xn,Wn,Kn,!1,null,"e5f51648",null),Gn=Yn.exports,Qn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"mb-1"},[t._v(t._s(t.__("Choose the binding mode for new users.","integration-cds")))]),t.loading?s("div",{staticClass:"border-left ml-3 pl-3"},[s("Spinner",{attrs:{width:"16"}})],1):t.error?s("div",{staticClass:"border-left ml-3 pl-3 text-danger"},[t._v(" "+t._s(t.error)+" ")]):t._e()]),s("ul",{staticClass:"radio-list"},[s("li",[s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.setting,expression:"setting"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"ubAutoBindingMode",id:"ubAutoBindingMode-default"},domProps:{value:t.constants.MODE_DEFAULT,checked:t._q(t.setting,t.constants.MODE_DEFAULT)},on:{change:function(e){t.setting=t.constants.MODE_DEFAULT}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"ubAutoBindingMode-default"}},[t._v(t._s(t.__("Default","integration-cds")))]),s("small",{staticClass:"d-block text-muted"},[t._v(" "+t._s(t.__("The plugins locates the bound Contact record by matching WordPress username to the “Username” "+t.usernameTip+" field on the Contact record.","integration-cds"))+" ")])])]),s("li",[s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.setting,expression:"setting"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"ubAutoBindingMode",id:"ubAutoBindingMode-custom"},domProps:{value:t.constants.MODE_CUSTOM,checked:t._q(t.setting,t.constants.MODE_CUSTOM)},on:{change:function(e){t.setting=t.constants.MODE_CUSTOM}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"ubAutoBindingMode-custom"}},[t._v("Custom")]),s("small",{staticClass:"d-block text-muted"},[t._v(" "+t._s(t.__("Custom code is responsible for locating the appropriate Dataverse row. See","integration-cds"))),s("a",{attrs:{href:"https://docs.alexacrm.com/binding/user-binding/"}},[t._v("documentation")]),t._v(". ")])])])])])},Jn=[],Zn={name:"UserModeSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1,error:null}},computed:{constants(){return{MODE_DEFAULT:ye,MODE_CUSTOM:Ce}},usernameTip(){return"(<code>alexacrm_wordpress_username</code>)"},setting:{get(){return this.$store.state.settings.userBinding.newUserMode},set(t){this.loading=!0,this.error=null,this.$store.dispatch("settings/userBinding/update",{newUserMode:t}).then(()=>{this.loading=!1}).catch(t=>{this.loading=!1,this.error=t.message})}}}},to=Zn,eo=Object(L["a"])(to,Qn,Jn,!1,null,null,null),so=eo.exports,io=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex mb-1"},[s("div",[t._v(" "+t._s(t.__("Choose fields for initial record matching in Default mode.","integration-cds"))+" ")]),t.loading?s("div",{staticClass:"border-left ml-3 pl-3"},[s("Spinner",{attrs:{width:"16"}})],1):t.error?s("div",{staticClass:"border-left ml-3 pl-3 text-danger"},[t._v(" "+t._s(t.error)+" ")]):t.saved?s("div",{staticClass:"border-left ml-3 pl-3 text-success"},[t._v(" "+t._s(t.__("Settings saved.","integration-cds"))+" ")]):t._e()]),s("table",{staticClass:"table"},[t._m(0),s("tbody",[s("tr",[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.matchingWpField,expression:"matchingWpField"}],staticClass:"form-control",attrs:{type:"text",id:"ubInitMatching-WP",placeholder:"user_email (example)"},domProps:{value:t.matchingWpField},on:{input:function(e){e.target.composing||(t.matchingWpField=e.target.value)}}}),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("One WordPress user data or user meta field allowed.","integration-cds"))+" ")])]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.matchingCdsField,expression:"matchingCdsField"}],staticClass:"form-control",attrs:{type:"text",id:"ubInitMatching-CDS",placeholder:"emailaddress1 (example)"},domProps:{value:t.matchingCdsField},on:{input:function(e){e.target.composing||(t.matchingCdsField=e.target.value)}}}),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("One Dataverse column name allowed.","integration-cds"))+" ")])])])]),s("tfoot",[s("tr",[s("td",{staticStyle:{"line-height":"1"},attrs:{colspan:"2"}},[s("small",{staticClass:"text-muted"},[t._v(" "+t._s(t.__("In Default mode, users are bound to Contact records. Enter WordPress fields and Dataverse columns to perform initial matching. After that, the records will be matched by WordPress username stored in the "+t.usernameTip+" column. Does not apply to Custom mode.","integration-cds"))+" ")])])])])])])},ao=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[s("label",{staticClass:"mb-0",attrs:{for:"ubInitMatching-WP"}},[t._v("WordPress field")])]),s("th",[s("label",{staticClass:"mb-0",attrs:{for:"ubInitMatching-CDS"}},[t._v("Dataverse column")])])])])}],no=s("b047c"),oo=s.n(no),ro={name:"RecordMatchingSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1,saved:!1,error:null}},computed:{usernameTip(){return"<code>alexacrm_wordpress_username</code>"},matchingWpField:{get(){return this.$store.state.settings.userBinding.matchingWpField},set(t){this.save({matchingWpField:t})}},matchingCdsField:{get(){return this.$store.state.settings.userBinding.matchingCdsField},set(t){this.save({matchingCdsField:t})}}},methods:{save:oo()((function(t){this.loading=!0,this.error=null,this.$store.dispatch("settings/userBinding/update",t).then(()=>{this.loading=!1,this.saved=!0}).catch(t=>{this.loading=!1,this.error=t.message})}),300)}},lo=ro,co=Object(L["a"])(lo,io,ao,!1,null,null,null),uo=co.exports,mo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"custom-control custom-checkbox"},[s("div",{staticClass:"d-flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.setting,expression:"setting"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"ubSyncFields"},domProps:{checked:Array.isArray(t.setting)?t._i(t.setting,null)>-1:t.setting},on:{change:function(e){var s=t.setting,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&(t.setting=s.concat([n])):o>-1&&(t.setting=s.slice(0,o).concat(s.slice(o+1)))}else t.setting=a}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"ubSyncFields"}},[t._v(" "+t._s(t.__("Enable field synchronization","integration-cds"))+" ")]),t.loading?s("div",{staticClass:"border-left ml-3 pl-3"},[s("Spinner",{attrs:{width:"16"}})],1):t.error?s("div",{staticClass:"border-left ml-3 pl-3 text-danger"},[t._v(" "+t._s(t.error)+" ")]):t._e()]),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("Choose whether to enable synchronization between WordPress user data and Dataverse columns.","integration-cds"))),s("br"),t._v(" "+t._s(t.__("In Default mode, users are bound to Contact records. If you mix Default and Custom binding modes, and you don't necessarily bind to Contact, the plugin will still try to synchronize the values but will skip invalid fields.","integration-cds"))+" ")])])])},po=[],go={name:"FieldSyncSetting",mixins:[Y],components:{Spinner:ps},data(){return{loading:!1,error:null}},computed:{setting:{get(){return this.$store.state.settings.userBinding.syncFields},set(t){this.loading=!0,this.error=null,this.$store.dispatch("settings/userBinding/update",{syncFields:t}).then(()=>{this.loading=!1}).catch(t=>{this.loading=!1,this.error=t.message})}}}},ho=go,fo=Object(L["a"])(ho,mo,po,!1,null,null,null),vo=fo.exports,_o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"mb-1"},[t._v(t._s(t.__("Choose data transfer direction","integration-cds")))]),t.loading?s("div",{staticClass:"border-left ml-3 pl-3"},[s("Spinner",{attrs:{width:"16"}})],1):t.error?s("div",{staticClass:"border-left ml-3 pl-3 text-danger"},[t._v(" "+t._s(t.error)+" ")]):t._e()]),s("ul",{staticClass:"radio-list"},[s("li",[s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.setting,expression:"setting"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"ubSyncDirection",id:"ubSyncDirection-push"},domProps:{value:t.constants.SYNC_PUSH,checked:t._q(t.setting,t.constants.SYNC_PUSH)},on:{change:function(e){t.setting=t.constants.SYNC_PUSH}}}),t._m(0),s("small",{staticClass:"d-block text-muted"},[s("div",{staticClass:"mb-1"},[t._v(t._s(t.__("WordPress user data is the source of truth. Bound record fields receive synchronized data. Synchronization occurs during registration and sign-in events, when user data is changed in WordPress.","integration-cds")))])])])]),s("li",[s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.setting,expression:"setting"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"ubSyncDirection",id:"ubSyncDirection-pull"},domProps:{value:t.constants.SYNC_PULL,checked:t._q(t.setting,t.constants.SYNC_PULL)},on:{change:function(e){t.setting=t.constants.SYNC_PULL}}}),t._m(1),s("small",{staticClass:"d-block text-muted"},[t._v(" "+t._s(t.__("Dataverse is the source of truth. WordPress user receives synchronized data. Synchronization occurs during user registration and sign-in events.","integration-cds"))+" ")])])])])])},bo=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"custom-control-label",attrs:{for:"ubSyncDirection-push"}},[t._v(" WordPress → Dataverse "),s("em",[t._v("(Push)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"custom-control-label",attrs:{for:"ubSyncDirection-pull"}},[t._v(" Dataverse → WordPress "),s("em",[t._v("(Pull)")])])}],yo={name:"SyncModeSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1,error:null}},computed:{constants(){return{SYNC_PUSH:Se,SYNC_PULL:we}},setting:{get(){return this.$store.state.settings.userBinding.syncDirection},set(t){this.loading=!0,this.error=null,this.$store.dispatch("settings/userBinding/update",{syncDirection:t}).then(()=>{this.loading=!1}).catch(t=>{this.loading=!1,this.error=t.message})}}}},Co=yo,So=Object(L["a"])(Co,_o,bo,!1,null,null,null),wo=So.exports,ko=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("table",{staticClass:"table field-mapping"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.__("WordPress field","integration-cds")))]),s("th",[s("div",{staticClass:"d-flex"},[s("div",[t._v(" "+t._s(t.__("Dataverse column","integration-cds"))+" ")]),t.loading?s("div",{staticClass:"border-left ml-3 pl-3"},[s("Spinner",{attrs:{width:"16"}})],1):t.error?s("div",{staticClass:"border-left ml-3 pl-3 text-danger font-weight-normal"},[t._v(" "+t._s(t.error)+" ")]):t.saved?s("div",{staticClass:"border-left ml-3 pl-3 text-success font-weight-normal"},[t._v(" "+t._s(t.__("Settings saved.","integration-cds"))+" ")]):t._e()])])])]),s("tbody",[s("tr",[s("td",[s("label",{attrs:{for:"ubSyncMap-email"}},[t._v(" "+t._s(t.__("Email.","integration-cds"))+" "),s("code",[t._v("user_email")])])]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.userEmail,expression:"userEmail"}],staticClass:"form-control",attrs:{type:"text",id:"ubSyncMap-email",placeholder:"emailaddress1 (example)"},domProps:{value:t.userEmail},on:{input:function(e){e.target.composing||(t.userEmail=e.target.value)}}})])]),s("tr",[s("td",[s("label",{attrs:{for:"ubSyncMap-firstname"}},[t._v(" "+t._s(t.__("First Name","integration-cds"))+" "),s("code",[t._v("first_name")])])]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"form-control",attrs:{type:"text",id:"ubSyncMap-firstname",placeholder:"firstname (example)"},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}})])]),s("tr",[s("td",[s("label",{attrs:{for:"ubSyncMap-lastname"}},[t._v(" "+t._s(t.__("Last Name","integration-cds"))+" "),s("code",[t._v("last_name")])])]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"form-control",attrs:{type:"text",id:"ubSyncMap-lastname",placeholder:"lastname (example)"},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}})])]),s("tr",[s("td",[s("label",{attrs:{for:"ubSyncMap-fullname"}},[t._v(" "+t._s(t.__("Display Name","integration-cds"))+" "),s("code",[t._v("display_name")])])]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.displayName,expression:"displayName"}],staticClass:"form-control",attrs:{type:"text",id:"ubSyncMap-fullname",placeholder:"fullname (example)"},domProps:{value:t.displayName},on:{input:function(e){e.target.composing||(t.displayName=e.target.value)}}})])])]),s("tfoot",[s("tr",{staticStyle:{"line-height":"1"}},[s("td"),s("td",[s("small",{staticClass:"text-muted"},[t._v(" "+t._s(t.__("Leave a Dataverse column input empty if you don't want to synchronize it.","integration-cds"))+" ")])])])])])])},xo=[],To=s("0644"),No=s.n(To),Po={name:"SyncMapSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1,saved:!1,error:null}},computed:{userEmail:{get(){return this.syncMap["user_email"]||""},set(t){let e={};this.syncMap&&this.syncMap.length&&(e=No()(this.syncMap)),e["user_email"]=t,this.save(e)}},firstName:{get(){return this.syncMap["first_name"]||""},set(t){let e=No()(this.syncMap);e["first_name"]=t,this.save(e)}},lastName:{get(){return this.syncMap["last_name"]||""},set(t){let e=No()(this.syncMap);e["last_name"]=t,this.save(e)}},displayName:{get(){return this.syncMap["display_name"]||""},set(t){let e=No()(this.syncMap);e["display_name"]=t,this.save(e)}},syncMap(){return this.$store.state.settings.userBinding.syncMap}},methods:{save:oo()((function(t){this.loading=!0,this.error=null,this.$store.dispatch("settings/userBinding/update",{syncMap:t}).then(()=>{this.loading=!1,this.saved=!0}).catch(t=>{this.loading=!1,this.error=t.message})}),300)}},Fo=Po,Ao=Object(L["a"])(Fo,ko,xo,!1,null,null,null),Do=Ao.exports;var Eo={name:"UserBindingPanelAdvanced",mixins:[Y],components:{SyncMapSetting:Do,SyncModeSetting:wo,FieldSyncSetting:vo,RecordMatchingSetting:uo,UserModeSetting:so,BindUsersSetting:Gn,AuthorizeUsersSetting:Ms,Panel:is},props:["meta"],computed:{syncMap:{get(){return this.userBinding.syncMap}},...Object(c["e"])({userBinding:t=>t.settings.userBinding})}},$o=Eo,Lo=(s("99f9"),Object(L["a"])($o,qn,zn,!1,null,"6b1cf87d",null)),Oo=Lo.exports,Ro=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"mb-3"},[s("ButtonLoader",{attrs:{"btn-class":"btn-success",loading:t.loading,error:t.error},on:{click:t.createNew}},[t._v(" "+t._s(t.__("Create new","integration-cds"))+" ")])],1)])]),s("div",{staticClass:"row"},[t.registrations.length?s("div",{staticClass:"col-3"},[s("RegistrationsList",{attrs:{registrations:t.registrations,"current-registration":t.currentRegistration,loading:t.loading},on:{select:function(e){t.activeId=e},delete:t.deleteRegistration}})],1):t.loading||t.error?t._e():s("div",{staticClass:"col"},[t._v(" "+t._s(t.__("You do not have any form registrations yet.","integration-cds"))+" ")]),null!==t.currentRegistration?s("div",{staticClass:"col-9"},[s("RegistrationEditor",{attrs:{id:t.activeId,registration:t.currentRegistration,loading:t.loading},on:{save:t.upsertRegistration}})],1):t.registrations.length?s("div",{staticClass:"col"},[t._v(" "+t._s(t.__("Select an existing form registration on the left or","integration-cds"))+" "),s("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.createNew.apply(null,arguments)}}},[t._v(t._s(t.__("create a new one","integration-cds")))]),t._v(". ")]):t._e()])])},Io=[],Mo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-group"},t._l(t.registrations,(function(e){return s("RegistrationsListItem",{key:e.id,attrs:{"current-registration":t.currentRegistration,registration:e,loading:t.loading},on:{select:function(e){t.$emit("select",e)},delete:function(e){t.$emit("delete",e)}}})})),1)},Vo=[],jo=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"list-group-item list-group-item-action flex-column align-items-start",class:{active:t.currentRegistration&&t.currentRegistration.id===t.registration.id,disabled:t.loading},attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$emit("select",t.registration.id)}}},[s("div",{staticClass:"d-flex w-100 justify-content-between align-items-center",staticStyle:{"word-break":"break-word"}},[s("div",[s("h5",{staticClass:"mb-1"},[s("span",{staticClass:"registration-name"},[t._v(t._s(t.registration.name))]),s("span",{staticClass:"ml-2 text-muted"},[t._v("#"+t._s(t.registration.id))])]),s("small",[t._v(t._s(t.description))])]),s("div",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("delete",t.registration.id)}}},[s("span",{staticClass:"btn text-danger"},[s("fa",{attrs:{icon:["far","trash-alt"],title:"Delete the form registration.",size:"2x"}})],1)])])])},Bo=[],Uo=(s("5319"),{name:"RegistrationsListItem",props:["registration","currentRegistration","loading"],computed:{description(){const t=this.registration;if(!t.targetEntity)return"No entity and form selected.";let e="a";"aeio".indexOf(t.targetEntity[0])>=0&&(e="an");let s="Reads %2$s %1$s record.";return"create"===t.action?s="Creates %2$s %1$s record.":"update"===t.action&&(s="Updates %2$s %1$s record."),s.replace("%1$s",t.targetEntity).replace("%2$s",e)}}}),qo=Uo,zo=(s("4126"),Object(L["a"])(qo,jo,Bo,!1,null,"0c0fa648",null)),Wo=zo.exports,Ko={name:"RegistrationsList",components:{RegistrationsListItem:Wo},props:["registrations","currentRegistration","loading"]},Ho=Ko,Xo=Object(L["a"])(Ho,Mo,Vo,!1,null,"615fa365",null),Yo=Xo.exports,Go=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-registration-editor"},[s("div",{staticClass:"card"},[s("h5",{staticClass:"card-header",attrs:{"data-toggle":"collapse","data-target":"#section-form-definition"}},[t._v(" "+t._s(t.__("Form Definition","integration-cds"))+" ")]),s("div",t._g({staticClass:"card-body collapse show",attrs:{id:"section-form-definition"}},{"shown.bs.collapse":t.handleCollapse,"hidden.bs.collapse":t.handleCollapse}),[s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col-4"},[s("label",{attrs:{for:"formRegistrationName"}},[t._v(t._s(t.__("Form Name","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.name,expression:"config.name"}],ref:"formName",staticClass:"form-control",attrs:{type:"text",id:"formRegistrationName"},domProps:{value:t.config.name},on:{input:function(e){e.target.composing||t.$set(t.config,"name",e.target.value)}}})]),s("div",{staticClass:"col"},[s("label",[t._v(t._s(t.__("Dataverse Form","integration-cds")))]),s("div",{staticClass:"input-group"},[s("input",{staticClass:"form-control",attrs:{type:"text",id:"formRefLabel",readonly:""},domProps:{value:t.formRefLabel}}),s("div",{staticClass:"input-group-append"},[t.config.formReference&&t.config.formReference.Id?s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"removeFormRefButton"},on:{click:t.removeFormRef}},[s("fa",{attrs:{icon:"times"}})],1):s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"showFormSelectorButton"},on:{click:t.showFormSelector}},[s("fa",{attrs:{icon:"search"}})],1)])])])]),s("h5",[t._v(t._s(t.__("Form proccessing","integration-cds")))]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.action,expression:"config.action"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsFormRegistrationCreateAction",name:"formActionType"},domProps:{value:t.constants.ACTION_CREATE,checked:t._q(t.config.action,t.constants.ACTION_CREATE)},on:{change:function(e){return t.$set(t.config,"action",t.constants.ACTION_CREATE)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsFormRegistrationCreateAction"}},[t._v(t._s(t.__("Create a new record","integration-cds")))])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.action,expression:"config.action"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsFormRegistrationUpdateAction",name:"formActionType"},domProps:{value:t.constants.ACTION_UPDATE,checked:t._q(t.config.action,t.constants.ACTION_UPDATE)},on:{change:function(e){return t.$set(t.config,"action",t.constants.ACTION_UPDATE)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsFormRegistrationUpdateAction"}},[t._v(t._s(t.__("Update or create a record","integration-cds")))])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.action,expression:"config.action"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsFormRegistrationReadAction",name:"formActionType"},domProps:{value:t.constants.ACTION_READ,checked:t._q(t.config.action,t.constants.ACTION_READ)},on:{change:function(e){return t.$set(t.config,"action",t.constants.ACTION_READ)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsFormRegistrationReadAction"}},[t._v(t._s(t.__("Read-only","integration-cds")))])]),t.config.action===t.constants.ACTION_CREATE?s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("A new record will always be created in CRM.","integration-cds"))+" ")]):t.config.action===t.constants.ACTION_UPDATE?s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("An existing CRM record will be bound to the form. Submissions will update that record. If it is not possible to bind the record, a new CRM record will be created.","integration-cds"))+" ")]):t.config.action===t.constants.ACTION_READ?s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("The form will show the bound CRM record data without editing capability.","integration-cds"))+" ")]):t._e()]),s("div",{staticClass:"mb-3"},[s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.noajax,expression:"config.noajax"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"noAjax"},domProps:{checked:Array.isArray(t.config.noajax)?t._i(t.config.noajax,null)>-1:t.config.noajax},on:{change:function(e){var s=t.config.noajax,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&t.$set(t.config,"noajax",s.concat([n])):o>-1&&t.$set(t.config,"noajax",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.config,"noajax",a)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"noAjax"}},[t._v(t._s(t.__("Send form without javascript handle (ajax)","integration-cds")))])])]),t.config.action===t.constants.ACTION_UPDATE||t.config.action===t.constants.ACTION_READ?[s("div",{staticClass:"mb-3"},[s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.allowDeletion,expression:"config.allowDeletion"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"allowDeleting"},domProps:{checked:Array.isArray(t.config.allowDeletion)?t._i(t.config.allowDeletion,null)>-1:t.config.allowDeletion},on:{change:function(e){var s=t.config.allowDeletion,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&t.$set(t.config,"allowDeletion",s.concat([n])):o>-1&&t.$set(t.config,"allowDeletion",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.config,"allowDeletion",a)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"allowDeleting"}},[t._v(t._s(t.__("Allow deleting the record","integration-cds")))])]),s("small",{staticClass:"d-block form-text text-muted"},[t._v(" "+t._s(t.__("Allow users to delete the existing record. A “Delete” button will be displayed.","integration-cds"))),s("br"),s("strong",[t._v("Notice:")]),t._v(" "+t._s(t.__("You should implement a hook for the","integration-cds"))+" "),s("code",[t._v("integration-cds/forms/authorize-delete")]),t._v(" "+t._s(t.__("filter to guard against unauthorized use.","integration-cds"))+" ")])]),s("h5",[t._v(t._s(t.__("Dataverse records binding","integration-cds")))]),s("div",{staticClass:"mb-3"},[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.recordSource,expression:"config.recordSource"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"formRecordSourceEntityBinding",name:"formRecordSource",value:"entity-binding"},domProps:{checked:t._q(t.config.recordSource,"entity-binding")},on:{change:function(e){return t.$set(t.config,"recordSource","entity-binding")}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"formRecordSourceEntityBinding"}},[t._v(t._s(t.__("Via Entity Binding","integration-cds")))])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.recordSource,expression:"config.recordSource"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"formRecordSourceRequest",name:"formRecordSource",value:"request"},domProps:{checked:t._q(t.config.recordSource,"request")},on:{change:function(e){return t.$set(t.config,"recordSource","request")}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"formRecordSourceRequest"}},[t._v(t._s(t.__("Via query string","integration-cds")))])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.recordSource,expression:"config.recordSource"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"formRecordSourceExplicit",name:"formRecordSource",value:"explicit-binding"},domProps:{checked:t._q(t.config.recordSource,"explicit-binding")},on:{change:function(e){return t.$set(t.config,"recordSource","explicit-binding")}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"formRecordSourceExplicit"}},[t._v(t._s(t.__("Via explicit binding","integration-cds")))])]),t.config.recordSource===t.constants.SOURCE_BINDING?s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("The form will acquire CRM records via Entity Binding. The page needs to have Entity Binding configured.","integration-cds"))+" ")]):t.config.recordSource===t.constants.SOURCE_REQUEST?s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("The form will acquire CRM records by GUID specified in the query string. For example,","integration-cds"))+" "),s("code",[t._v("/sample-page/?"+t._s(t.config.recordSourceRequest||"id")+"=00000000-0000-0000-0000-000000000000")]),t._v(". "+t._s(t.__("Entity type is inferred from the CRM form.","integration-cds"))+" ")]):t.config.recordSource===t.constants.SOURCE_EXPLICIT_BINDING?s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("The form will acquire CRM records via Explicit Binding. For example:","integration-cds"))+" "),s("code",[t._v(t._s(t.__("{% form id=2 record=user.reference %}","integration-cds")))])]):t._e()]),t.config.recordSource===t.constants.SOURCE_REQUEST?s("div",[s("label",{attrs:{for:"formRecordSourceRequestInput"}},[t._v(" "+t._s(t.__("Enter the query string parameter name which contains the GUID of the bound record","integration-cds"))+" ")]),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.recordSourceRequest,expression:"config.recordSourceRequest"}],staticClass:"form-control",attrs:{id:"formRecordSourceRequestInput",type:"text"},domProps:{value:t.config.recordSourceRequest},on:{input:function(e){e.target.composing||t.$set(t.config,"recordSourceRequest",e.target.value)}}})])]):t._e()]:t._e()],2)]),!t.hasFormRef||t.config.action!==t.constants.ACTION_CREATE&&t.config.action!==t.constants.ACTION_UPDATE?t._e():s("div",{staticClass:"card"},[s("h5",{staticClass:"card-header",attrs:{"data-toggle":"collapse","data-target":"#section-fields-customization"}},[t._v(" "+t._s(t.__("Fields customization","integration-cds"))+" ")]),s("div",{staticClass:"card-body collapse show",attrs:{id:"section-fields-customization"}},[s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col"},[s("label",[t._v(" "+t._s(t.__("Attributes","integration-cds"))+" "),t.isLoadingMetadata?s("Spinner",{attrs:{width:"16"}}):t._e()],1),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedAttributes,expression:"selectedAttributes"}],staticClass:"form-control mb-2",attrs:{multiple:"multiple",size:"10"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedAttributes=e.target.multiple?s:s[0]}}},t._l(t.targetEntityAttributesWithoutOverrides,(function(e){return s("option",{key:e.logicalName,attrs:{title:"["+e.logicalName+"] "+e.description},domProps:{value:e.logicalName}},[t._v(" "+t._s(e.displayName)+" ")])})),0),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-sm btn-block btn-secondary",attrs:{type:"button",id:"addAttributesToRequiredButton",disabled:!t.selectedAttributes.length},on:{click:t.addAttributesToRequired}},[t._v(" "+t._s(t.__("Required","integration-cds"))+" → ")]),s("button",{staticClass:"btn btn-sm btn-block btn-secondary",attrs:{type:"button",id:"addAttributesToOptionalButton",disabled:!t.selectedAttributes.length},on:{click:t.addAttributesToOptional}},[t._v(" "+t._s(t.__("Optional","integration-cds"))+" → ")])])])]),s("div",{staticClass:"col"},[s("label",[t._v(t._s(t.__("Required","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedRequiredAttributes,expression:"selectedRequiredAttributes"}],staticClass:"form-control mb-2",attrs:{multiple:"multiple",size:"10"},on:{dblclick:t.removeRequiredOverrides,change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedRequiredAttributes=e.target.multiple?s:s[0]}}},t._l(t.currentRegistrationRequiredOverrides,(function(e){return s("option",{key:e.logicalName,attrs:{title:"["+e.logicalName+"] "+e.description},domProps:{value:e.logicalName}},[t._v(" "+t._s(e.displayName)+" ")])})),0),s("button",{staticClass:"btn btn-sm btn-block btn-secondary",attrs:{type:"button",id:"removeRequiredOverridesButton",disabled:!t.selectedRequiredAttributes.length},on:{click:t.removeRequiredOverrides}},[t._v(" "+t._s(t.__("Remove selected","integration-cds"))+" ")])]),s("div",{staticClass:"col"},[s("label",[t._v(t._s(t.__("Optional","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptionalAttributes,expression:"selectedOptionalAttributes"}],staticClass:"form-control mb-2",attrs:{multiple:"multiple",size:"10"},on:{dblclick:t.removeOptionalOverrides,change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedOptionalAttributes=e.target.multiple?s:s[0]}}},t._l(t.currentRegistrationOptionalOverrides,(function(e){return s("option",{key:e.logicalName,attrs:{title:"["+e.logicalName+"] "+e.description},domProps:{value:e.logicalName}},[t._v(" "+t._s(e.displayName)+" ")])})),0),s("button",{staticClass:"btn btn-sm btn-block btn-secondary",attrs:{type:"button",id:"removeOptionalOverridesButton",disabled:!t.selectedOptionalAttributes.length},on:{click:t.removeOptionalOverrides}},[t._v(" "+t._s(t.__("Remove selected","integration-cds"))+" ")])])]),t.hasFormRef&&(t.config.action===t.constants.ACTION_CREATE||t.config.action===t.constants.ACTION_UPDATE)&&t.isMetadataAvailable?s("RegistrationDefaultValues",{attrs:{entity:t.config.targetEntity,form:t.formRefId,attributes:t.targetEntityAttributes,values:t.config.defaultValues,"attributes-metadata":t.targetMetadata.Attributes,initializing:t.isLoadingMetadata,fields:t.formFields},on:{change:t.updateDefaultValues}}):t._e()],1)]),null!==t.config.action?s("div",{staticClass:"card"},[s("h5",{staticClass:"card-header",attrs:{"data-toggle":"collapse","data-target":"#section-globals-overrides"}},[t._v(" "+t._s(t.__("Global settings overrides","integration-cds"))+" ")]),s("div",{staticClass:"card-body collapse show",attrs:{id:"section-globals-overrides"}},[s("div",{staticClass:"form-group"},[s("label",[t._v("Include dependencies")]),s("div",[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.injectDependencies,expression:"config.forms.injectDependencies"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"injectDependenciesOverride-Yes"},domProps:{value:!0,checked:t._q(t.config.forms.injectDependencies,!0)},on:{change:function(e){return t.$set(t.config.forms,"injectDependencies",!0)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"injectDependenciesOverride-Yes"}},[t._v(" "+t._s(t.__("Yes","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.injectDependencies,expression:"config.forms.injectDependencies"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"injectDependenciesOverride-No"},domProps:{value:!1,checked:t._q(t.config.forms.injectDependencies,!1)},on:{change:function(e){return t.$set(t.config.forms,"injectDependencies",!1)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"injectDependenciesOverride-No"}},[t._v(" "+t._s(t.__("No","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.injectDependencies,expression:"config.forms.injectDependencies"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"injectDependenciesOverride-Global"},domProps:{value:null,checked:t._q(t.config.forms.injectDependencies,null)},on:{change:function(e){return t.$set(t.config.forms,"injectDependencies",null)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"injectDependenciesOverride-Global"}},[t._v(" - "+t._s(t.__("use global","integration-cds"))+" ("+t._s(t.formSettings.injectDependencies)+") - ")])])])]),s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.__("Render form based on twig template","integration-cds")))]),s("div",[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.isSsr,expression:"config.forms.isSsr"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"isSsr-Yes"},domProps:{value:!0,checked:t._q(t.config.forms.isSsr,!0)},on:{change:function(e){return t.$set(t.config.forms,"isSsr",!0)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"isSsr-Yes"}},[t._v(" "+t._s(t.__("Yes","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.isSsr,expression:"config.forms.isSsr"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"isSsr-No"},domProps:{value:!1,checked:t._q(t.config.forms.isSsr,!1)},on:{change:function(e){return t.$set(t.config.forms,"isSsr",!1)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"isSsr-No"}},[t._v(" "+t._s(t.__("No","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.isSsr,expression:"config.forms.isSsr"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"isSsr-Global"},domProps:{value:null,checked:t._q(t.config.forms.isSsr,null)},on:{change:function(e){return t.$set(t.config.forms,"isSsr",null)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"isSsr-Global"}},[t._v(" - "+t._s(t.__("use global","integration-cds"))+" ("+t._s(t.formSettings.isSsr)+") - ")])])])]),t.config.forms.isSsr?s("div",[s("hr"),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"form_template"}},[t._v(t._s(t.__("Choose a form template")))]),s("select",{staticClass:"form-control",attrs:{name:"form_template",id:"form_template"},on:{change:function(e){t.config.forms.formTemplate=e.target.value}}},[s("option",{domProps:{value:null}},[t._v(t._s(t.__("Default")))]),t._l(t.twigTemplates,(function(e){return s("option",{key:e.id,domProps:{value:e.id,selected:t.registration.forms&&t.registration.forms.formTemplate&&e.id===Number(t.registration.forms.formTemplate)}},[t._v(t._s(e.name))])}))],2)]),s("FieldTemplateSetting",{attrs:{fieldTemplates:t.registration.forms?t.registration.forms.fieldTemplates:t.config.forms.fieldTemplates,"is-form-registration":!0},on:{update:function(e){t.config.forms.fieldTemplates=e}}}),s("hr")],1):t._e(),t.config.action===t.constants.ACTION_CREATE||t.config.action===t.constants.ACTION_UPDATE?[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.__("Keep the form after submission","integration-cds")))]),s("div",[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.keepSubmittedForm,expression:"config.forms.keepSubmittedForm"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsKeepFormEnabledOverride"},domProps:{value:!0,checked:t._q(t.config.forms.keepSubmittedForm,!0)},on:{change:function(e){return t.$set(t.config.forms,"keepSubmittedForm",!0)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsKeepFormEnabledOverride"}},[t._v(" "+t._s(t.__("Enabled","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.keepSubmittedForm,expression:"config.forms.keepSubmittedForm"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsKeepFormDisabledOverride"},domProps:{value:!1,checked:t._q(t.config.forms.keepSubmittedForm,!1)},on:{change:function(e){return t.$set(t.config.forms,"keepSubmittedForm",!1)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsKeepFormDisabledOverride"}},[t._v(" "+t._s(t.__("Disabled","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.keepSubmittedForm,expression:"config.forms.keepSubmittedForm"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsKeepFormGlobal"},domProps:{value:null,checked:t._q(t.config.forms.keepSubmittedForm,null)},on:{change:function(e){return t.$set(t.config.forms,"keepSubmittedForm",null)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsKeepFormGlobal"}},[t._v(" - "+t._s(t.__("use global","integration-cds"))+" ("+t._s(t.formSettings.keepSubmittedForm)+") - ")])])])]),t.effectiveKeepSubmittedForm?s("div",{staticClass:"form-group"},[s("label",{attrs:{title:"Applies only to forms which create new records."}},[t._v(" "+t._s(t.__("Reset form values after submission","integration-cds"))+" "),s("small",[t._v("("+t._s(t.__("create only","integration-cds"))+")")])]),s("div",[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.resetValuesOnSubmit,expression:"config.forms.resetValuesOnSubmit"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsResetFormEnabledOverride"},domProps:{value:!0,checked:t._q(t.config.forms.resetValuesOnSubmit,!0)},on:{change:function(e){return t.$set(t.config.forms,"resetValuesOnSubmit",!0)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsResetFormEnabledOverride"}},[t._v(" "+t._s(t.__("Enabled","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.resetValuesOnSubmit,expression:"config.forms.resetValuesOnSubmit"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsResetFormDisabledOverride"},domProps:{value:!1,checked:t._q(t.config.forms.resetValuesOnSubmit,!1)},on:{change:function(e){return t.$set(t.config.forms,"resetValuesOnSubmit",!1)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsResetFormDisabledOverride"}},[t._v(" "+t._s(t.__("Disabled","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.resetValuesOnSubmit,expression:"config.forms.resetValuesOnSubmit"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsResetFormGlobal"},domProps:{value:null,checked:t._q(t.config.forms.resetValuesOnSubmit,null)},on:{change:function(e){return t.$set(t.config.forms,"resetValuesOnSubmit",null)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsResetFormGlobal"}},[t._v(" - "+t._s(t.__("use global","integration-cds"))+" ("+t._s(t.formSettings.resetValuesOnSubmit)+") - ")])])])]):t._e(),s("hr"),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"icdsSettingsFormsSuccessMessageOverride"}},[t._v(" "+t._s(t.__("Successful submission message","integration-cds"))+" ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.successMessage,expression:"config.forms.successMessage"}],staticClass:"form-control",attrs:{id:"icdsSettingsFormsSuccessMessageOverride",type:"text",placeholder:"- use global -"},domProps:{value:t.config.forms.successMessage},on:{input:function(e){e.target.composing||t.$set(t.config.forms,"successMessage",e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"icdsSettingsFormsFailMessageOverride"}},[t._v(" "+t._s(t.__("Failed submission message","integration-cds"))+" ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.failMessage,expression:"config.forms.failMessage"}],staticClass:"form-control",attrs:{id:"icdsSettingsFormsFailMessageOverride",type:"text",placeholder:"- use global -"},domProps:{value:t.config.forms.failMessage},on:{input:function(e){e.target.composing||t.$set(t.config.forms,"failMessage",e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"icdsSettingsFormsSuccessRedirect"}},[t._v(" "+t._s(t.__("Redirect after successful submission","integration-cds"))+" ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.redirect,expression:"config.redirect"}],staticClass:"form-control",attrs:{id:"icdsSettingsFormsSuccessRedirect",type:"text",placeholder:"- do not redirect -"},domProps:{value:t.config.redirect},on:{input:function(e){e.target.composing||t.$set(t.config,"redirect",e.target.value)}}})]),s("hr"),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"icdsSettingsFormsFullnameOverride"}},[t._v(" "+t._s(t.__("Full Name field decomposition","integration-cds"))+" ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.inlineFullnameOverride,expression:"inlineFullnameOverride"}],staticClass:"form-control",attrs:{id:"icdsSettingsFormsFullnameOverride",type:"text",placeholder:"- use global -"},domProps:{value:t.inlineFullnameOverride},on:{input:function(e){e.target.composing||(t.inlineFullnameOverride=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"icdsSettingsFormsAddressOverride"}},[t._v(" "+t._s(t.__("Composite Address field decomposition","integration-cds"))+" ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.inlineAddressOverride,expression:"inlineAddressOverride"}],staticClass:"form-control",attrs:{id:"icdsSettingsFormsAddressOverride",type:"text",placeholder:"- use global -"},domProps:{value:t.inlineAddressOverride},on:{input:function(e){e.target.composing||(t.inlineAddressOverride=e.target.value)}}})]),s("h5",[t._v(t._s(t.__("reCAPTCHA settings override","integration-cds")))]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.__("reCAPTCHA on this form","integration-cds")))]),s("div",[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.isRecaptchaEnabled,expression:"config.forms.isRecaptchaEnabled"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsRecaptchaEnabledOverride"},domProps:{value:!0,checked:t._q(t.config.forms.isRecaptchaEnabled,!0)},on:{change:function(e){return t.$set(t.config.forms,"isRecaptchaEnabled",!0)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsRecaptchaEnabledOverride"}},[t._v(" "+t._s(t.__("Enabled","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.isRecaptchaEnabled,expression:"config.forms.isRecaptchaEnabled"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsRecaptchaDisabledOverride"},domProps:{value:!1,checked:t._q(t.config.forms.isRecaptchaEnabled,!1)},on:{change:function(e){return t.$set(t.config.forms,"isRecaptchaEnabled",!1)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsRecaptchaDisabledOverride"}},[t._v(" "+t._s(t.__("Disabled","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.forms.isRecaptchaEnabled,expression:"config.forms.isRecaptchaEnabled"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsRecaptchaGlobal"},domProps:{value:null,checked:t._q(t.config.forms.isRecaptchaEnabled,null)},on:{change:function(e){return t.$set(t.config.forms,"isRecaptchaEnabled",null)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsRecaptchaGlobal"}},[t._v(" - "+t._s(t.__("use global","integration-cds"))+" ("+t._s(t.formSettings.isRecaptchaEnabled)+") - ")])])])]),t.effectiveIsRecaptchaEnabled?s("div",[t.recaptchaSettings.type===t.constants.TYPE_V3?[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"score-threshold"}},[t._v(" "+t._s(t.__("Score threshold","integration-cds"))+": "),s("b",[t._v(t._s(t.scoreThresholdLabel))])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.recaptcha.scoreThreshold,expression:"config.recaptcha.scoreThreshold"}],staticClass:"custom-range",attrs:{type:"range",id:"score-threshold",min:"0",max:"1",step:"0.1"},domProps:{value:t.config.recaptcha.scoreThreshold},on:{__r:function(e){return t.$set(t.config.recaptcha,"scoreThreshold",e.target.value)}}}),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("1.0 is very likely a good interaction, 0.0 is very likely a bot. By default, you can use a threshold of 0.5.","integration-cds"))+" ")])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"action"}},[t._v(t._s(t.__("Action","integration-cds"))+":")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.recaptcha.action,expression:"config.recaptcha.action"}],staticClass:"form-control",attrs:{type:"text",id:"action"},domProps:{value:t.config.recaptcha.action},on:{input:function(e){e.target.composing||t.$set(t.config.recaptcha,"action",e.target.value)}}}),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("Actions may only contain alphanumeric characters and slashes, and must not be user-specific.","integration-cds"))+" ")])])]:t.recaptchaSettings.type===t.constants.TYPE_V2_CHECKBOX?[s("div",{staticClass:"row"},[s("div",{staticClass:"form-group col-6"},[s("label",[t._v(t._s(t.__("Theme","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.config.recaptcha.theme,expression:"config.recaptcha.theme"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.config.recaptcha,"theme",e.target.multiple?s:s[0])}}},[s("option",{domProps:{value:null}},[t._v("- "+t._s(t.__("use global","integration-cds"))+" ("+t._s(t.recaptchaSettings.theme||"currently unset")+") - ")]),t._l(t.supportedThemes,(function(e,i){return s("option",{key:i,domProps:{value:i}},[t._v(t._s(e))])}))],2),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("The color theme of the widget.","integration-cds"))+" ")])]),s("div",{staticClass:"form-group col-6"},[s("label",[t._v(t._s(t.__("Size","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.config.recaptcha.size,expression:"config.recaptcha.size"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.config.recaptcha,"size",e.target.multiple?s:s[0])}}},[s("option",{domProps:{value:null}},[t._v("- use global ("+t._s(t.recaptchaSettings.size||"currently unset")+") -")]),t._l(t.supportedSizes,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e)+" ")])}))],2),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("The size of the widget.","integration-cds"))+" ")])])])]:t.recaptchaSettings.type===t.constants.TYPE_V2_INVISIBLE?[s("div",{staticClass:"row"},[s("div",{staticClass:"form-group col-6"},[s("label",[t._v(t._s(t.__("Badge position","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.config.recaptcha.badge,expression:"config.recaptcha.badge"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.config.recaptcha,"badge",e.target.multiple?s:s[0])}}},[s("option",{domProps:{value:null}},[t._v(" - "+t._s(t.__("use global","integration-cds"))+" ("+t._s(t.recaptchaSettings.badge||"currently unset")+") - ")]),t._l(t.supportedBadges,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e)+" ")])}))],2),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("Reposition the reCAPTCHA badge.","integration-cds"))+" "),s("em",[t._v(t._s(t.__("Inline","integration-cds")))]),t._v(" "+t._s(t.__("lets you position it with CSS.","integration-cds"))+" ")])])])]:t._e()],2):t._e()])]:t._e()],2)]):t._e(),s("CustomButtonsSettings",{attrs:{entityName:t.config.targetEntity,languages:t.languages,customButtons:t.config.customButtons&&t.config.customButtons.length?t.config.customButtons:t.constants.DEFAULT_BUTTONS},on:{update:function(e){return t.setSettings("customButtons",e)}}}),t.isMetadataAvailable?s("RegistrationLookupSettings",{attrs:{fetchXmlTemplates:t.fetchXmlTemplates,targetMetadata:t.targetMetadata,formFields:t.formFields,formRefId:t.formRefId,targetEntity:t.config.targetEntity,lookupSettings:t.config.lookupSettings||{}},on:{setSettings:function(e){return t.setSettings("lookupSettings",e)}}}):s("Spinner",{attrs:{width:"16"}}),s("div",{staticClass:"form-group mt-2"},[t.id?s("ButtonLoader",{attrs:{"btn-class":"btn-primary button-update",disabled:!t.isCurrentRegistrationComplete||t.loading,loading:t.loading},on:{click:t.updateRegistration}},[t._v(" Update ")]):s("ButtonLoader",{attrs:{"btn-class":"btn-primary button-create",disabled:!t.isCurrentRegistrationComplete||t.loading,loading:t.loading},on:{click:t.createRegistration}},[t._v(" Create ")])],1),s("FormSelector",{ref:"formSelector",attrs:{formReference:this.config.formReference},on:{select:t.applyFormSelection}})],1)},Qo=[];s("f665");const Jo={Submit:"Submit",Cancel:"Cancel",Activate:"Activate",Deactivate:"Deactivate",Workflow:"Workflow"},Zo={code:"en-gb",text:"Submit"},tr={type:Jo.Submit,labels:[Zo]},er=[tr],sr={executeFunction:"GET",executeAction:"POST"};var ir=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("label",[t._v(" "+t._s(t.__("Fields templates"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("div",{staticClass:"form-group"},[s("table",{staticClass:"table table-sm table-borderless mb-0"},[t._l(t.customFields,(function(e){return s("tr",{key:e.field},[s("td",{staticClass:"w-50 pl-0"},[s("select",{staticClass:"form-control",attrs:{name:"crm_field",id:"crm_field"},on:{change:function(s){return t.updateCustomField(e.field,{field:s.target.value})}}},[s("option",{domProps:{value:null}},[t._v("Select field")]),t._l(t.fields,(function(i){return s("option",{key:i,domProps:{value:i,selected:i===e.field}},[t._v(" "+t._s(i)+" ")])}))],2)]),s("td",[s("select",{staticClass:"form-control",attrs:{name:"field_template",id:"field_template"},on:{change:function(s){return t.updateCustomField(e.field,{template:s.target.value})}}},[s("option",{domProps:{value:null}},[t._v(t._s(t.__("Default")))]),t._l(t.twigTemplates,(function(i){return s("option",{key:i.id,domProps:{value:i.id,selected:i.id===Number(e.template)}},[t._v(t._s(i.name)+" ")])}))],2)]),s("td",{staticClass:"pr-0 width-1"},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button",id:"removeCustomField-"+e.field},on:{click:function(s){return t.removeCustomField(e.field)}}},[t._v("X")])])])})),s("tr",[s("td",{staticClass:"w-50 px-0 pt-2"},[s("select",{staticClass:"custom-select",attrs:{disabled:t.loading},on:{change:function(e){t.addCustomField(e.target.value),e.target.value=0}}},[s("option",{domProps:{value:0}},[t._v("Select field")]),t._l(t.fields,(function(e){return s("option",{key:e,attrs:{disabled:t.selectedFields.includes(e)},domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2)]),s("td"),s("td")])],2)])])},ar=[],nr=s("51f5"),or=s.n(nr),rr=s("4245"),lr=s.n(rr),cr={name:"FieldTemplateSetting",components:{Spinner:ps},props:["fieldTemplates","isFormRegistration"],mixins:[Y],watch:{fieldTemplates:function(t){this.customFields=t||[],this.$nextTick()}},data(){return{loading:!1,customFields:[],fields:["Address","Checkbox","Datetime","Email","File","Fullname","Image","LookupDialog","LookupDropdown","LookupSimpleSelect","MultiSelect","Radio","Select","Text","Textarea","Url"]}},computed:{selectedFields(){return this.customFields.map(t=>t.field)},...Object(c["e"])({twigTemplates:t=>t.settings.twigTemplates.templates})},methods:{save(t){this.loading=!0,this.$store.dispatch("settings/forms/update",{fieldTemplates:t}).then(()=>{this.$messageService.success(this.__("Settings have been saved successfully.","integration-cds"))}).catch(()=>{this.$messageService.error(this.__("Failed to save the settings.","integration-cds"))}).finally(()=>{this.loading=!1})},addCustomField(t){this.customFields.push({field:t,template:null}),this.isFormRegistration?this.$emit("update",this.customFields):this.save(this.customFields)},updateCustomField(t,e){let s=or()(this.customFields,["field",t]);this.customFields[s]=lr()(this.customFields[s],e),this.isFormRegistration?this.$emit("update",this.customFields):this.save(this.customFields)},removeCustomField(t){this.customFields=ji()(this.customFields,e=>t!==e.field),this.isFormRegistration?this.$emit("update",this.customFields):this.save(this.customFields)},...Object(c["b"])("settings/twigTemplates",["loadTwigTemplates"])},created(){this.isFormRegistration?this.customFields=this.fieldTemplates:(this.loadTwigTemplates(),this.customFields=this.$store.state.settings.forms.fieldTemplates)}},dr=cr,ur=(s("9ad3"),Object(L["a"])(dr,ir,ar,!1,null,"1366f7a2",null)),mr=ur.exports,pr=s("ceac"),gr=s.n(pr),hr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.active?s("Modal",{attrs:{title:"Choose a CRM form"},on:{close:t.close},scopedSlots:t._u([{key:"default",fn:function(){return[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("label",[t._v(t._s(t.__("Table","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.entity,expression:"entity"}],staticClass:"custom-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.entity=e.target.multiple?s:s[0]}}},[t.loading?s("option",{domProps:{value:null}},[t._v(t._s(t.__("Loading...","integration-cds")))]):s("option",{domProps:{value:null}},[t._v("- "+t._s(t.__("Select","integration-cds"))+" -")]),t._l(t.entities,(function(e,i){return s("option",{key:i,domProps:{value:i}},[t._v(" "+t._s(e)+" ")])}))],2)]),s("div",{staticClass:"col"},[s("label",[t._v(t._s(t.__("Form","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form,expression:"form"}],staticClass:"custom-select",attrs:{disabled:t.loading},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.form=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}},[t._v("- "+t._s(t.__("Select","integration-cds"))+" -")]),t._l(t.entityForms,(function(e,i){return s("option",{key:i,domProps:{value:i}},[t._v(" "+t._s(e.Name)+" ("+t._s(t.getFormType(e.Id))+") ")])}))],2)])])]},proxy:!0},{key:"footer",fn:function(){return[s("button",{staticClass:"btn btn-primary button-select",attrs:{type:"button","data-dismiss":"modal",disabled:!t.isFormSelected},on:{click:function(e){return t.$emit("select",t.entity,t.formRef,t.formRefDetails)}}},[t._v(" "+t._s(t.__("Select","integration-cds"))+" ")]),s("button",{staticClass:"btn btn-secondary button-close",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.__("Close","integration-cds")))])]},proxy:!0}],null,!1,2884070716)}):t._e()},fr=[],vr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"el",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog",class:[t.size?"modal-"+t.size:"",t.scrollable?"modal-dialog-scrollable":""]},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.title||"Dataverse Integration"))]),t._m(0)]),s("div",{staticClass:"modal-body",class:{"p-0":t.noPadding}},[t._t("default")],2),s("div",{staticClass:"modal-footer"},[t._t("footer",(function(){return[s("button",{staticClass:"btn btn-secondary button-close",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.__("Close","integration-cds")))])]}))],2)])])])},_r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close button-close",attrs:{type:"button","data-dismiss":"modal",title:"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}];s("01d7");const br=["sm","lg","xl"];var yr={name:"Modal",mixins:[Y],props:{title:{type:String,required:!1},size:{type:String,required:!1,validator:t=>-1!==br.indexOf(t)},noPadding:{type:Boolean,required:!1},scrollable:{type:Boolean,required:!1}},mounted(){$a()(this.$refs.el).modal().on("shown.bs.modal",()=>this.$emit("open",this.$el)).on("hidden.bs.modal",()=>this.$emit("close",this.$el)),this.setModalState(!0)},beforeDestroy(){$a()(this.$refs.el).modal("hide"),this.setModalState(!1)},methods:{close(){$a()(this.$refs.el).modal("hide")},...Object(c["d"])({setModalState:"modal/setModalState"})}},Cr=yr,Sr=(s("cad7"),Object(L["a"])(Cr,vr,_r,!1,null,"d697e562",null)),wr=Sr.exports;const kr={2:"Main",6:"Quick view",7:"Quick create",11:"Card"};var xr={name:"FormSelector",components:{Modal:wr},props:["formReference"],mixins:[Y],created(){this.loading=!0,w().get("forms",{params:{extraEntity:this.formReference["LogicalName"]}}).then(t=>{this.entities=t.data.entities,this.forms=t.data.forms,this.formsDetails=t.data.formsDetails}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.loading=!1})},data(){return{active:!1,entity:null,form:null,entities:{},forms:{},formsDetails:{},loading:!1}},computed:{isFormSelected(){return null!==this.entity&&null!==this.form},entityForms(){return this.forms[this.entity]||{}},formRef(){return this.entityForms[this.form]},formRefDetails(){return this.formsDetails[this.form]}},watch:{entity(t){this.form=null}},methods:{open(){this.active=!0},close(){this.active=!1},getFormType(t){let e=this.formsDetails[t].type;return kr[e]}}},Tr=xr,Nr=Object(L["a"])(Tr,hr,fr,!1,null,"819543a8",null),Pr=Nr.exports,Fr=s("ea72"),Ar=s.n(Fr),Dr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.form?s("div",[s("h5",[t._v(" "+t._s(t.__("Default field values","integration-cds"))+" "),t.loading||t.initializing?s("Spinner",{attrs:{width:"16"}}):t._e()],1),t.initializing?t._e():s("div",{staticClass:"form-group"},[s("table",{staticClass:"table table-sm table-borderless mb-0"},[t._l(t.selectedAttributes,(function(e){return s("tr",{key:e.attribute},[s("td",{staticClass:"w-50"},[s("label",{staticClass:"small",attrs:{for:"defaultValue-"+e.attribute}},[t._v(t._s(t.attributeLabel(e.attribute)))])]),s("td",[null!==t.attributeControl(e.attribute)?s(t.attributeControl(e.attribute),{tag:"component",attrs:{metadata:t.attributesMetadata[e.attribute],lookup:t.lookupsMetadata[e.attribute],id:"defaultValue-"+e.attribute,"init-value":e.value},on:{change:function(s){return t.updateValue(e.attribute,s)}}}):s("input",{staticClass:"form-control",attrs:{type:"text",id:"defaultValue-"+e.attribute},domProps:{value:e.value},on:{input:function(s){return t.updateValue(e.attribute,s.target.value)}}})],1),s("td",{attrs:{width:"1"}},[s("button",{staticClass:"btn btn-danger button-remove",attrs:{type:"button",id:"removeValue-"+e.attribute},on:{click:function(s){return t.removeValue(e.attribute)}}},[t._v("X")])])])})),t._l(t.loadingPool,(function(e){return s("tr",{key:e},[s("td",{staticClass:"w-50"},[s("label",{staticClass:"small"},[t._v(t._s(e))])]),s("td",{attrs:{colspan:"=2"}},[s("Spinner",{attrs:{width:"16"}})],1)])})),t.spareAttributes.length>0?s("tr",[s("td",{staticClass:"w-50"},[s("select",{staticClass:"custom-select",attrs:{disabled:t.loading||t.loadingAttribute},on:{change:function(e){return t.addValue(e.target.value)}}},[s("option",{domProps:{value:null}},[t._v("Select field")]),t._l(t.spareAttributes,(function(e){return s("optgroup",{key:e.label,attrs:{label:e.label}},t._l(e.items,(function(e){return s("option",{key:e.logicalName,domProps:{value:e.logicalName}},[t._v(" "+t._s(e.displayName)+" ")])})),0)}))],2)]),s("td"),s("td")]):t._e()],2)])]):t._e()},Er=[],$r=s("2769"),Lr=s.n($r),Or=s("c04c"),Rr=s.n(Or),Ir=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.metadata?s("select",{staticClass:"custom-select",on:{change:function(e){return t.$emit("change",e.target.value)}}},t._l(t.options,(function(e){return s("option",{key:e.value,domProps:{value:e.value,selected:e.value===parseInt(t.initValue)}},[t._v(" "+t._s(e.label)+" ")])})),0):t._e()},Mr=[],Vr={name:"BooleanControl",props:["initValue","metadata"],computed:{options(){return[{value:this.metadata.OptionSet.TrueOption.Value,label:this.metadata.OptionSet.TrueOption.Label.UserLocalizedLabel.Label},{value:this.metadata.OptionSet.FalseOption.Value,label:this.metadata.OptionSet.FalseOption.Label.UserLocalizedLabel.Label}]}}},jr=Vr,Br=Object(L["a"])(jr,Ir,Mr,!1,null,"0ed04665",null),Ur=Br.exports,qr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"icds-form-control"},[s("Datetime",{attrs:{"input-class":"form-control",type:t.controlType,zone:"UTC","week-start":1,"input-id":"icds-form-control-"+t.id,"hidden-name":t.id,value:t.initValue},on:{input:function(e){return t.$emit("change",e)}}})],1)},zr=[],Wr=s("859b"),Kr=(s("d355"),{name:"DatetimeControl",components:{Datetime:Wr["Datetime"]},props:["id","initValue","metadata"],computed:{controlType:function(){return"DateOnly"===this.metadata.Format?"date":"datetime"}}}),Hr=Kr,Xr=Object(L["a"])(Hr,qr,zr,!1,null,null,null),Yr=Xr.exports,Gr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.metadata?s("div",{staticClass:"input-group"},[s("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.valueLabel}}),s("div",{staticClass:"input-group-append"},[t.value?s("button",{staticClass:"btn btn-outline-secondary button-remove",attrs:{type:"button"},on:{click:function(e){t.value=null}}},[s("fa",{attrs:{icon:"times"}})],1):s("button",{staticClass:"btn btn-outline-secondary button-search",attrs:{type:"button"},on:{click:function(e){t.value=null,t.$refs.ld.open()}}},[s("fa",{attrs:{icon:"search"}})],1)]),s("LookupDialog",{ref:"ld",attrs:{metadata:t.lookup},on:{close:t.handleLookupDialog}})],1):t._e()},Qr=[],Jr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.active?s("Modal",{attrs:{title:"Lookup Record"},on:{close:t.close},scopedSlots:t._u([{key:"default",fn:function(){return[s("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[s("p",[t._v("Enter your search criteria.")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-9"},[s("div",{staticClass:"row mb-3",class:{"d-none":!t.targetsEnabled}},[s("div",{staticClass:"col-3 pr-1"},[s("label",{staticClass:"col-form-label",attrs:{for:"icds-lookup-dialog-entity-"+t.dialogId}},[t._v("Look for")])]),s("div",{staticClass:"col-9 pl-1"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.activeEntity,expression:"activeEntity"}],staticClass:"custom-select",attrs:{id:"icds-lookup-dialog-entity-"+t.dialogId},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.activeEntity=e.target.multiple?s:s[0]}}},t._l(t.metadata.targets,(function(e,i){return s("option",{key:i,domProps:{value:i}},[t._v(" "+t._s(e)+" ")])})),0)])]),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-3 pr-1"},[s("label",{staticClass:"col-form-label",attrs:{for:"icds-lookup-dialog-view-"+t.dialogId}},[t._v("Look in")])]),s("div",{staticClass:"col-9 pl-1"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.activeView,expression:"activeView"}],staticClass:"custom-select",attrs:{id:"icds-lookup-dialog-view-"+t.dialogId,disabled:t.config.DisableViewPicker},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.activeView=e.target.multiple?s:s[0]}}},[t.availableSavedViews.length?s("optgroup",{attrs:{label:"System Views"}},t._l(t.availableSavedViews,(function(e){return s("option",{key:e.Id,domProps:{value:e,selected:e.Id===t.defaultViewId}},[t._v(" "+t._s(e.Name)+" ")])})),0):t._e(),t.availableUserViews.length?s("optgroup",{attrs:{label:"My Views"}},t._l(t.availableUserViews,(function(e){return s("option",{key:e.Id,domProps:{value:e,selected:e.Id===t.defaultViewId}},[t._v(" "+t._s(e.Name)+" ")])})),0):t._e()])])]),t.config.DisableQuickFind?t._e():s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col-3 pr-1"},[s("label",{staticClass:"col-form-label",attrs:{for:"icds-lookup-dialog-search-"+t.dialogId}},[t._v("Search")])]),s("div",{staticClass:"col-9 pl-1"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"form-control",attrs:{type:"text",id:"icds-lookup-dialog-search-"+t.dialogId},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[t.isSearchMode?s("button",{staticClass:"btn btn-outline-secondary button-remove",attrs:{type:"button"},on:{click:function(e){t.isSearchMode=!1,t.searchValue=""}}},[s("fa",{attrs:{icon:"times"}})],1):s("button",{staticClass:"btn btn-outline-secondary button-search",attrs:{type:"button"},on:{click:function(e){t.isSearchMode=!0}}},[s("fa",{attrs:{icon:"search"}})],1)])])])])]),s("div",{staticClass:"col-sm-5"})]),t.entityView?s("div",[s("div",{staticClass:"table mb-2",staticStyle:{height:"20rem",overflow:"scroll"}},[s("table",{staticStyle:{"font-size":".75rem"}},[s("thead",[s("tr",[s("th"),t._l(t.entityView.columns,(function(e){return s("th",{key:e.logicalName,staticClass:"text-nowrap"},[t._v(" "+t._s(e.name)+" ")])}))],2)]),s("tbody",t._l(t.entityView.records,(function(e){return s("tr",{key:e.Id,on:{click:function(s){return t.makeSelection(e)}}},[s("td",[s("input",{attrs:{type:"checkbox",id:"makeSelection-"+e.Id},domProps:{checked:t.selection&&e.Id===t.selection.Id},on:{click:function(s){return s.stopPropagation(),t.makeSelection(e)}}})]),t._l(t.entityView.columns,(function(i){return s("td",{key:i.logicalName,staticClass:"text-nowrap"},[t._v(" "+t._s(t.getEntityFormattedValue(e,i.logicalName))+" ")])}))],2)})),0)])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[t._v(" "+t._s(t.recordsRangeLabel)+" of "+t._s(t.entityView.totalRecords)+" ("+t._s(t.selection?"1":"0")+" selected) ")]),s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-sm button-first-page",attrs:{type:"button",disabled:!t.entityView.firstPage||t.entityView.page===t.entityView.firstPage},on:{click:function(e){t.page=t.entityView.firstPage}}},[t._v("<< ")]),s("button",{staticClass:"btn btn-sm button-previous-page",attrs:{type:"button",disabled:!t.entityView.previousPage},on:{click:function(e){t.page=t.entityView.previousPage}}},[t._v("< ")]),t._v(" Page "+t._s(t.entityView.page)+" "),s("button",{staticClass:"btn btn-sm button-next-page",attrs:{type:"button",disabled:!t.entityView.nextPage},on:{click:function(e){t.page=t.entityView.nextPage}}},[t._v("> ")])])])]):s("div",[s("div",{staticStyle:{height:"22.5rem"}},[s("Spinner"),t._v(" Loading... ")],1)])])]},proxy:!0},{key:"footer",fn:function(){return[s("button",{staticClass:"btn btn-primary mr-2 button-add-selected",attrs:{type:"button","data-dismiss":"modal",disabled:null===t.selection},on:{click:function(e){return t.$emit("close",t.selection)}}},[t._v(" Add ")]),s("button",{staticClass:"btn btn-outline-primary button-cancel",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.$emit("close")}}},[t._v("Cancel")])]},proxy:!0}],null,!1,3995488058)}):t._e()},Zr=[],tl=s("69f38"),el=s.n(tl),sl=s("66c7"),il=s.n(sl),al=s("2f9f"),nl=s.n(al),ol=s("95ae"),rl=s.n(ol),ll=s("6625"),cl=s.n(ll);const dl=50,ul={DefaultViewId:"",AvailableViewIds:null,DisableViewPicker:!1,DisableQuickFind:!1};var ml={name:"LookupDialog",components:{Spinner:ps,Modal:wr},props:["metadata","parameters","lookupFilters"],mounted(){this.page=1,this.submit()},data(){const t=el()(ii()(this.metadata.targets)),e=this.getEnabledView(t);return{active:!1,dialogId:ht()(),activeEntity:t,activeView:e,isSearchMode:!1,searchValue:"",isOnlyMyRecords:!1,page:null,config:rl()(this.parameters,ul),entityView:null,selection:null,loadingPool:{}}},watch:{activeEntity(t){this.activeView=this.getEnabledView(t),this.isSearchMode=!1,this.searchValue="",this.page=1,this.submit()},activeView(){this.page=1,this.isSearchMode=!1,this.searchValue="",this.submit()},isSearchMode(){this.page=1,this.submit()},page(){this.submit()}},computed:{columnsLength(){return this.entityView?Fa()(this.entityView.columns):0},recordsRangeLabel:function(){if(!this.entityView)return"";let t=(this.entityView.page-1)*dl+1;this.entityView.totalRecords||(t=0);let e=this.entityView.page*dl;return e>this.entityView.totalRecords&&(e=this.entityView.totalRecords||0),t+" - "+e},targetsEnabled(){return Fa()(this.metadata.targets)>1},defaultViewId(){let t=nl()(il()(this.config.DefaultViewId,"{}"));return""===t&&(t=this.availableViewIds[0]),t},availableViewIds(){return Ut()(cl()(this.config.AvailableViewIds,","),t=>nl()(il()(t,"{}")))},availableSavedViews(){return null===this.config.AvailableViewIds?this.metadata.views[this.activeEntity].savedQueries:ji()(this.metadata.views[this.activeEntity].savedQueries,t=>Xa()(this.availableViewIds,t.Id))},availableUserViews(){return null===this.config.AvailableViewIds?this.metadata.views[this.activeEntity].userQueries:ji()(this.metadata.views[this.activeEntity].userQueries,t=>Xa()(this.availableViewIds,t.Id))}},methods:{open(){this.active=!0},close(){this.active=!1},submit:function(){this.isSearchMode=this.searchValue.length>0;const t={entity:this.activeEntity,type:this.activeView.LogicalName,id:this.activeView.Id,page:this.page,lookupFilters:this.lookupFilters,displayMethod:Re};this.isSearchMode&&(t.term=this.searchValue),this.entityView=null;let e=JSON.stringify(t);"function"!==typeof this.loadingPool[e]&&(this.loadingPool[e]=oo()(()=>{w().get("lookup_records",{params:t}).then(t=>{this.entityView=t.data.data,this.selection=null})},16)),this.loadingPool[e]()},makeSelection(t){let e=this.entityToEntityReference(t);this.selection&&e.Id===this.selection.Id&&(e=null),this.selection=e},getEnabledView(t){let e=this.parameters&&this.parameters.DefaultViewId?this.parameters.DefaultViewId:ul.DefaultViewId;e=nl()(il()(e,"{}"));let s=Lr()(this.metadata.views[t].savedQueries,t=>t.Id===e);if(s)return s;let i=Lr()(this.metadata.views[t].userQueries,t=>t.Id===e);if(i)return i;let a=el()(this.metadata.views[t].savedQueries);if(a)return a;let n=el()(this.metadata.views[t].userQueries);return n||{}},getEntityFormattedValue(t,e){return t.FormattedValues[e]||t.Attributes[e]},entityToEntityReference(t){return{LogicalName:t.LogicalName,Id:t.Id,Name:this.getEntityFormattedValue(t,this.metadata.primaryNameAttributes[t.LogicalName])}}}},pl=ml,gl=Object(L["a"])(pl,Jr,Zr,!1,null,"11cb38fd",null),hl=gl.exports,fl={name:"LookupControl",components:{LookupDialog:hl},props:["initValue","metadata","lookup"],data(){return{value:this.initValue||null,loading:!1}},computed:{valueLabel(){return this.value?this.value.Name:""}},methods:{handleLookupDialog(t){this.value=t,this.$emit("change",this.value)}}},vl=fl,_l=Object(L["a"])(vl,Gr,Qr,!1,null,"353d0d80",null),bl=_l.exports,yl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.metadata?s("select",{staticClass:"custom-select",on:{change:function(e){return t.$emit("change",e.target.value)}}},[s("option",{attrs:{value:""}},[t._v("– "+t._s(t.__("Select","integration-cds"))+" –")]),t._l(t.metadata.OptionSet.Options,(function(e){return s("option",{key:e.Value,domProps:{value:e.Value,selected:e.Value===parseInt(t.initValue)}},[t._v(" "+t._s(e.Label.UserLocalizedLabel.Label)+" ")])}))],2):t._e()},Cl=[],Sl={name:"PicklistControl",mixins:[Y],props:["initValue","metadata"]},wl=Sl,kl=Object(L["a"])(wl,yl,Cl,!1,null,"5cd989ef",null),xl=kl.exports;const Tl={Lookup:bl,Customer:bl,Picklist:xl,Boolean:Ur,DateTime:Yr};var Nl={name:"RegistrationDefaultValues",components:{PicklistControl:xl,LookupControl:bl,Spinner:ps},props:["entity","form","attributes","values","attributesMetadata","initializing","fields"],mixins:[Y],data(){return{selectedAttributes:[],lookupsMetadata:{},loading:!1,loadingAttribute:!1,loadingPool:[]}},watch:{fields(){this.updateSelected()}},computed:{spareAttributes(){let t=ji()(this.fields,t=>void 0===Lr()(this.selectedAttributes,["attribute",t.logicalName])),e=ji()(this.attributes,t=>{let e=void 0===Lr()(this.selectedAttributes,["attribute",t.logicalName]),s=void 0!==Lr()(this.fields,["logicalName",t.logicalName]);return e&&!s});return[{label:"Form Fields",items:t},{label:"Other",items:e}]}},methods:{addValue(t){this.isLookupAttribute(t)&&!Ka()(this.lookupsMetadata,t)?(this.loading=!0,w().get(`attribute_metadata/${this.entity}/${t}`).then(e=>{this.lookupsMetadata[t]=e.data.lookup,this.selectedAttributes.push({attribute:t,value:""}),this.$emit("change",this.selectedAttributes)}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.loading=!1})):this.selectedAttributes.push({attribute:t,value:""})},updateValue(t,e){let s=or()(this.selectedAttributes,["attribute",t]);this.selectedAttributes[s].value=e,this.$emit("change",this.selectedAttributes)},removeValue(t){this.selectedAttributes=ji()(this.selectedAttributes,e=>t!==e.attribute),this.$emit("change",this.selectedAttributes)},attributeLabel(t){let e=Lr()(this.fields,["logicalName",t]);return e||(e=Lr()(this.attributes,["logicalName",t])),e?e.displayName:null},attributeControl(t){let e=this.attributesMetadata[t].AttributeType;return Ka()(Tl,e)?Tl[e]:null},isLookupAttribute(t){let e=this.attributesMetadata[t];return"Lookup"===e.AttributeType||"Customer"===e.AttributeType},updateSelected(){this.selectedAttributes=[],0!==this.fields.length&&0!==this.attributes.length&&(this.loadingAttribute=!0,Promise.all(Ut()(this.values,t=>{let e=Lr()(this.fields,["logicalName",t.attribute]);if(e||(e=Lr()(this.attributes,["logicalName",t.attribute])),e)return this.isLookupAttribute(t.attribute)&&!Ka()(this.lookupsMetadata,t.attribute)?(this.loadingPool.push(e.displayName),w().get(`attribute_metadata/${this.entity}/${t.attribute}`).then(s=>{this.lookupsMetadata[t.attribute]=s.data.lookup,Rr()(this.loadingPool,t=>t===e.displayName),this.selectedAttributes.push({attribute:t.attribute,value:t.value})})):void this.selectedAttributes.push({attribute:t.attribute,value:t.value})})).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.loadingAttribute=!1}))}}},Pl=Nl,Fl=Object(L["a"])(Pl,Dr,Er,!1,null,null,null),Al=Fl.exports,Dl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[t.formFields.length&&t.targetFormLookups.length&&t.lookupSettings?[s("h5",{staticClass:"card-header",attrs:{"data-toggle":"collapse","data-target":"#section-form-lookups"}},[t._v(" "+t._s(t.__("Lookup Fields","integration-cds"))+" ")]),s("div",{staticClass:"card-body collapse show",attrs:{id:"section-form-lookups"}},[t._l(t.targetFormLookups,(function(e){return s("div",{key:e.logicalName,staticClass:"form-group"},[t.lookupSettings[e.logicalName]?[s("h6",[t._v(t._s(e.displayName))]),s("div",{staticClass:"mb-3"},[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.lookupSettings[e.logicalName].display,expression:"lookupSettings[lookup.logicalName].display"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsFormRegistrationDisplayDialog"+e.logicalName,name:"lookupMode"+e.logicalName},domProps:{value:t.constants.LOOKUP_DISPLAY_DIALOG,checked:t._q(t.lookupSettings[e.logicalName].display,t.constants.LOOKUP_DISPLAY_DIALOG)},on:{change:function(s){return t.$set(t.lookupSettings[e.logicalName],"display",t.constants.LOOKUP_DISPLAY_DIALOG)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsFormRegistrationDisplayDialog"+e.logicalName}},[t._v("Dialog")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.lookupSettings[e.logicalName].display,expression:"lookupSettings[lookup.logicalName].display"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsFormRegistrationDisplayDropdown"+e.logicalName,name:"lookupMode"+e.logicalName},domProps:{value:t.constants.LOOKUP_DISPLAY_DROPDOWN,checked:t._q(t.lookupSettings[e.logicalName].display,t.constants.LOOKUP_DISPLAY_DROPDOWN)},on:{change:function(s){return t.$set(t.lookupSettings[e.logicalName],"display",t.constants.LOOKUP_DISPLAY_DROPDOWN)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsFormRegistrationDisplayDropdown"+e.logicalName}},[t._v("Dropdown")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.lookupSettings[e.logicalName].display,expression:"lookupSettings[lookup.logicalName].display"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsFormRegistrationDisplayDropdownSimple"+e.logicalName,name:"lookupMode"+e.logicalName},domProps:{value:t.constants.LOOKUP_DISPLAY_DROPDOWN_SIMPLE,checked:t._q(t.lookupSettings[e.logicalName].display,t.constants.LOOKUP_DISPLAY_DROPDOWN_SIMPLE)},on:{change:function(s){return t.$set(t.lookupSettings[e.logicalName],"display",t.constants.LOOKUP_DISPLAY_DROPDOWN_SIMPLE)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsFormRegistrationDisplayDropdownSimple"+e.logicalName}},[t._v("Select")])])]),t.lookupSettings[e.logicalName].display===t.constants.LOOKUP_DISPLAY_DROPDOWN||t.lookupSettings[e.logicalName].display===t.constants.LOOKUP_DISPLAY_DROPDOWN_SIMPLE?s("div",{staticClass:"form-group"},[t.lookupSettings[e.logicalName].targets.length?[s("h6",[t._v("Select a target entity")]),t.lookupSettings[e.logicalName].targets?s("select",{directives:[{name:"model",rawName:"v-model",value:t.lookupSettings[e.logicalName].entity,expression:"lookupSettings[lookup.logicalName].entity"}],staticClass:"form-control mb-2",on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.lookupSettings[e.logicalName],"entity",s.target.multiple?i:i[0])}}},t._l(t.lookupSettings[e.logicalName].targets,(function(e,i){return s("option",{key:i+"lookupTarget",attrs:{title:e},domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0):t._e()]:s("Spinner"),t.lookupSettings[e.logicalName].entity&&t.lookupSettings[e.logicalName].views[t.lookupSettings[e.logicalName].entity]?[s("h6",[t._v("Select a view")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.lookupSettings[e.logicalName].view,expression:"lookupSettings[lookup.logicalName].view"}],staticClass:"form-control mb-2",on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.lookupSettings[e.logicalName],"view",s.target.multiple?i:i[0])}}},t._l(t.lookupSettings[e.logicalName].views[t.lookupSettings[e.logicalName].entity].savedQueries,(function(e){return s("option",{key:e.Id,attrs:{title:e.Name},domProps:{value:e.Name}},[t._v(" "+t._s(e.Name)+" ")])})),0)]:t._e()],2):t._e()]:t._e()],2)})),s("div",[t.targetFormLookups&&t.targetFormLookups.length?s("h5",[t._v(" "+t._s(t.__("Conditional access","integration-cds"))+" ")]):t._e(),t._l(t.targetFormLookups,(function(e){return s("div",{key:e.logicalName,staticClass:"form-group"},[s("label",{attrs:{for:"fetchXmlTemplateSetting-"+e.logicalName}},[t._v("For "),s("i",[t._v(t._s(e.displayName))])]),t.lookupSettings[e.logicalName]?s("FetchXmlTemplateSettings",{key:"fetchXmlTemplateSetting-"+e.logicalName,attrs:{id:"fetchXmlTemplateSetting-"+e.logicalName,templates:t.fetchXmlTemplates,isEditingSettings:!0,isEnabled:!0,fetchXmlTemplateSettings:t.lookupSettings[e.logicalName].fetchXmlTemplateSettings},on:{update:function(s){return t.$set(t.lookupSettings[e.logicalName],"fetchXmlTemplateSettings",s)}}}):t._e()],1)}))],2)],2)]:t._e(),t.isLoadingLookups?s("Spinner",{attrs:{width:"16"}}):t._e()],2)},El=[],$l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("section",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"fetchXmlId"}},[t._v(t._s(t.__("Select a fetchXML template","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.templateId,expression:"templateId"}],staticClass:"form-control",attrs:{id:"fetchXmlId",disabled:!t.isEnabled},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.templateId=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}},[t._v("- Not Selected -")]),t._l(t.fetchXmlTemplates,(function(e){return s("option",{key:"template-"+e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)])]),t.templateId&&t.params&&t.params.length?s("section",[s("label",[t._v(t._s(t.__("FetchXML template parameters","integration-cds")))]),t._l(t.params,(function(e,i){return s("FetchXmlTemplateSettingsParam",{key:e.name+"-"+i,attrs:{oldParam:e,settingValues:!0},on:{update:function(e){return t.$emit("update",t.template)}}})}))],2):s("label",[t._v(" "+t._s(t.__("There are no parameters for selected template","integration-cds"))+" ")])])},Ll=[],Ol=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-2"},[s("div",{staticClass:"param"},[s("div",{staticClass:"fields d-flex"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"param-name"}},[t._v(t._s(t.__("Param name","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.param.name,expression:"param.name"}],staticClass:"form-control",attrs:{type:"text",id:"param-name",readonly:t.settingValues},domProps:{value:t.param.name},on:{input:function(e){e.target.composing||t.$set(t.param,"name",e.target.value)}}}),s("div",{staticClass:"invalid-feedback",style:{display:t.error?"block":"none"}},[t._v(" "+t._s(t.error)+" ")])]),t.settingValues?s("div",{staticClass:"form-group ml-3"},[s("label",{attrs:{for:"param-value"}},[t._v(t._s(t.__("Param value","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.param.value,expression:"param.value"}],staticClass:"form-control",attrs:{type:"text",id:"param-value"},domProps:{value:t.param.value},on:{input:function(e){e.target.composing||t.$set(t.param,"value",e.target.value)}}}),s("small",[t._v(t._s(t.__("Default value is","integration-cds"))+": "+t._s(t.param.default))])]):s("div",{staticClass:"form-group ml-3"},[s("label",{attrs:{for:"param-default-value"}},[t._v(t._s(t.__("Param default value","integration-cds")))]),s("div",{staticClass:"d-flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.param.default,expression:"param.default"}],staticClass:"form-control",attrs:{type:"text",id:"param-default-value"},domProps:{value:t.param.default},on:{input:function(e){e.target.composing||t.$set(t.param,"default",e.target.value)}}}),t.settingValues?t._e():s("button",{staticClass:"btn btn-outline-danger ml-3 button-remove-param",attrs:{type:"button"},on:{click:function(e){return t.$emit("deleteParam")}}},[s("fa",{attrs:{icon:["far","trash-alt"],title:"Delete the param."}})],1)])])])])])},Rl=[],Il={name:"FetchXmlTemplateSettingsParam",props:["oldParam","settingValues"],mixins:[Y],watch:{"param.value"(){this.$emit("update")}},data(){var t;return{param:null!==(t=this.oldParam)&&void 0!==t?t:{name:"",default:"",value:""},error:""}},methods:{clear(){this.error="",this.param.name="",this.param.default=""},validate(){return!!this.param.name||(this.error=this.__("You must specify the param name.","integration-cds"),!1)}}},Ml=Il,Vl=Object(L["a"])(Ml,Ol,Rl,!1,null,"cf8cffd0",null),jl=Vl.exports,Bl={name:"FetchXmlTemplateSettings",props:["isEditingSettings","fetchXmlTemplateSettings","templates","isEnabled"],components:{FetchXmlTemplateSettingsParam:jl},mixins:[Y],watch:{templateId(t){this.settings=this.fetchXmlTemplates.filter(e=>e.id===t)[0],this.$emit("update",this.settings)}},data(){var t;return{settings:null!==(t=this.fetchXmlTemplateSettings)&&void 0!==t?t:{id:"",params:[]},fetchXmlTemplates:this.templates,templateId:this.isEditingSettings&&this.fetchXmlTemplateSettings&&this.fetchXmlTemplateSettings.id||null}},methods:{loadTemplates(){w().get("fetch_xml_templates").then(t=>{this.fetchXmlTemplates=t.data.data})}},computed:{template(){return this.settings.id?this.settings:{}},params(){return this.template.params}},created(){this.fetchXmlTemplates||this.loadTemplates()}},Ul=Bl,ql=Object(L["a"])(Ul,$l,Ll,!1,null,"0d7a7e3e",null),zl=ql.exports,Wl=s("dce5"),Kl=s.n(Wl),Hl=s("ade3");class Xl{static getProperties(){return{targets:Xl.targets,entity:Xl.entity,display:Xl.display,view:Xl.view,views:Xl.views,lookupFiltersQuery:Xl.lookupFiltersQuery,fetchXmlTemplateSettings:Xl.fetchXmlTemplateSettings}}static hasAllProperties(t){return Object.keys(Xl.getProperties()).forEach(e=>{if(!t.hasOwnProperty(e)||!t[e])return!1}),!0}}Object(Hl["a"])(Xl,"targets",[]),Object(Hl["a"])(Xl,"entity",""),Object(Hl["a"])(Xl,"display",Re),Object(Hl["a"])(Xl,"view",""),Object(Hl["a"])(Xl,"views",""),Object(Hl["a"])(Xl,"lookupFiltersQuery",""),Object(Hl["a"])(Xl,"fetchXmlTemplateSettings",{id:null,name:"",params:[],source:""});var Yl={name:"RegistrationLookupSettings",mixins:[Y],props:["targetMetadata","formFields","formRefId","targetEntity","lookupSettings","fetchXmlTemplates"],components:{Spinner:ps,FetchXmlTemplateSettings:zl},watch:{formRefId(t){null!==t&&this.processLookupsSettings(t)}},data(){return{isLoadingLookups:!1,isLoadingEntityViews:!1}},computed:{constants(){return{LOOKUP_DISPLAY_DIALOG:Re,LOOKUP_DISPLAY_DROPDOWN:Ie,LOOKUP_DISPLAY_DROPDOWN_SIMPLE:Me}},targetFormLookups(){let t=[];if(this.targetMetadata){const e=this.targetMetadata.Attributes;this.formFields.forEach(s=>{e[s.logicalName]&&("Lookup"!==e[s.logicalName].AttributeType&&"Customer"!==e[s.logicalName].AttributeType&&"Owner"!==e[s.logicalName].AttributeType||t.push(s))})}return t}},methods:{...Object(c["b"])("settings/forms",["fetchFormFields"]),processLookupsSettings(){null!=this.formRefId&&(this.formFields.length&&Ei()(this.lookupSettings)?this.initLookupSettings():(this.isLoadingLookups=!0,this.fetchFormFields(this.formRefId).then(()=>{this.initLookupSettings(),this.isLoadingLookups=!1})))},initLookupSettings(){this.targetFormLookups.forEach(t=>{this.lookupSettings[t.logicalName]&&this.lookupSettings[t.logicalName].targets&&this.lookupSettings[t.logicalName].targets.length||(this.addNonExistingProperties(t.logicalName),w().get(`attribute_metadata/${this.targetEntity}/${t.logicalName}`).then(e=>{this.$set(this.lookupSettings[t.logicalName],"targets",e.data.metadata.Targets),this.$set(this.lookupSettings[t.logicalName],"views",e.data.lookup.views)}))})},addNonExistingProperties(t){this.lookupSettings[t]?this.lookupSettings[t]=Kl()(Xl.getProperties(),this.lookupSettings[t]):this.$set(this.lookupSettings,t,Xl.getProperties())}},created(){this.processLookupsSettings(),this.$parent.$on("setSettings",()=>{this.$emit("setSettings",this.lookupSettings)})}},Gl=Yl,Ql=Object(L["a"])(Gl,Dl,El,!1,null,"cced49d8",null),Jl=Ql.exports,Zl=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[s("h5",{staticClass:"card-header",attrs:{"data-toggle":"collapse","data-target":"#section-form-buttons"}},[t._v(" "+t._s(t.__("Form Buttons","integration-cds"))+" ")]),s("div",{staticClass:"card-body collapse show",attrs:{id:"section-form-buttons"}},[s("div",[s("button",{staticClass:"btn btn-success",attrs:{type:"button",id:"addNewButtonButton"},on:{click:function(e){return t.addNewButton(t.buttonObject)}}},[t._v(" "+t._s(t.__("Add button"))+" ")])]),s("div",{staticClass:"buttons"},t._l(t.buttons,(function(e,i){return s("CustomButtonForm",{key:"button_"+i,attrs:{buttonToEdit:e,workflows:t.workflows,languages:t.languages,index:i},on:{update:function(e){return t.updateButton(i,e)},delete:function(e){return t.deleteButton(i)}}})})),1)])])},tc=[],ec=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"custom-button-form mt-2 w-100"},[s("section",[s("label",{attrs:{for:"buttonType"}},[t._v(t._s(t.__("Select button type","integration-cds")))]),s("div",{staticClass:"d-flex"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.button.type,expression:"button.type"}],staticClass:"form-control",attrs:{id:"buttonType"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.button,"type",e.target.multiple?s:s[0])},function(e){return t.$emit("update",t.button)}]}},t._l(t.buttonTypes,(function(e,i){return s("option",{key:i,domProps:{value:i}},[t._v(" "+t._s(e)+" ")])})),0),!t.isCreateForm&&t.index>0?s("button",{staticClass:"btn btn-danger ml-1 button-delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("delete")}}},[t._v(t._s(t.__("Delete","integration-cds"))+" ")]):t._e()]),s("label",{staticClass:"mt-2"},[t._v(t._s(t.__("Choose desired languages and define button labels")))]),t._l(t.button.labels,(function(e,i){return s("div",{key:e.code+"_"+i,staticClass:"d-flex w-75"},[s("div",{staticClass:"mb-1"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.button.labels[i].code,expression:"button.labels[idx].code"}],ref:"languages",refInFor:!0,staticClass:"form-control",attrs:{id:"labelCode_"+i,disabled:0===i},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.button.labels[i],"code",e.target.multiple?s:s[0])},function(e){return t.controlOptions(e)}]}},t._l(t.filteredLanguages,(function(e,a){return s("option",{key:"option_"+a+"_"+e.code+"_"+i,attrs:{disabled:e.disabled},domProps:{value:e.code}},[t._v(t._s(e.language)+" ("+t._s(e.code)+") ")])})),0)]),s("div",{staticClass:"flex-grow-1 mb-1 ml-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.button.labels[i].text,expression:"button.labels[idx].text"}],staticClass:"form-control",attrs:{type:"text",id:"labelText_"+i},domProps:{value:t.button.labels[i].text},on:{change:function(e){return t.updateLabel(e,i)},input:function(e){e.target.composing||t.$set(t.button.labels[i],"text",e.target.value)}}})]),s("div",{staticClass:"controls"},[s("div",{staticClass:"ml-1",class:{invisible:0===i},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.removeLabel(i)}}},[s("button",{staticClass:"btn btn-danger button-remove"},[t._v("X")])]),i===t.button.labels.length-1?s("div",{staticClass:"ml-1 mt-1",on:{click:t.addLabel}},[s("button",{staticClass:"btn btn-success button-add"},[t._v("+")])]):t._e()])])}))],2),t.button.type===Object.keys(t.buttonTypes).find((function(e){return t.buttonTypes[e]===t.buttonTypes.Workflow}))?s("section",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"workflowName"}},[t._v(t._s(t.__("Workflow","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.button.workflow,expression:"button.workflow"}],staticClass:"form-control",attrs:{id:"workflowName"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.button,"workflow",e.target.multiple?s:s[0])}}},[t.workflows&&0!==t.workflows.length?t._e():s("option",{attrs:{value:"null"}},[t._v(t._s(t.__("There are no workflows :(","integration-cds"))+" ")]),t._l(t.workflows,(function(e){return s("option",{key:"workflow_"+e.Attributes.workflowid,domProps:{value:e.Attributes.workflowid}},[t._v(" "+t._s(e.Attributes.name)+" ")])}))],2)])]):t._e()])},sc=[],ic={name:"CustomButtonForm",mixins:[Y],props:["buttonToEdit","workflows","languages","index"],watch:{"button.apiActionParams"(){this.button.apiActionParams=this.apiActionParams}},data(){return{buttonObj:this.buttonToEdit?lr()({},this.buttonToEdit):{},selectedLanguages:["en-gb"]}},computed:{button:{get(){return this.buttonObj},set(t){this.buttonObj=t,this.$emit("update",t)}},apiActionParams(){return this.button.apiActionParams?this.button.apiActionParams.split(",").map((function(t){return t.trim()})):[]},isCreateForm(){return void 0===this.buttonToEdit},labelObject(){return Zo},buttonTypes(){return Jo},apiMethods(){return sr},filteredLanguages(){return this.languages.map(t=>(this.selectedLanguages.includes(t.code)?t.disabled=!0:t.disabled=!1,t))}},methods:{removeLabel(t){if(1===this.button.labels.length)return;const e=this.selectedLanguages.findIndex(e=>e===this.button.labels[t].code);(e||0===e)&&this.selectedLanguages.splice(e,1),this.button.labels.splice(t,1)},controlOptions(t){this.selectedLanguages.push(t.target.value)},updateLabel(t,e){this.button.labels[e].text=t.target.value,this.$emit("update",this.button)},addLabel(){this.button.labels.push({code:"",text:""})}}},ac=ic,nc=(s("d124"),Object(L["a"])(ac,ec,sc,!1,null,"b0ece464",null)),oc=nc.exports,rc={name:"CustomButtonsSettings",components:{CustomButtonForm:oc},props:["customButtons","entityName","languages"],mixins:[Y],data(){return{workflows:[]}},computed:{buttonObject(){return tr},buttons:{get(){return this.customButtons},set(t){this.$emit("update",t)}}},methods:{addNewButton(t){t&&(this.buttons=[...this.buttons,t])},updateButton(t,e){this.buttons=this.buttons.map((s,i)=>(i===t&&(s=e),s))},deleteButton(t){this.buttons.splice(t,1)}},created(){this.entityName&&w().get("workflows/"+this.entityName).then(t=>{this.workflows=t.data.Entities}),this.buttons&&this.buttons.length&&this.$emit("update",this.buttons)}},lc=rc,cc=Object(L["a"])(lc,Zl,tc,!1,null,"f10fa668",null),dc=cc.exports;const uc={id:0,name:"",action:null,allowDeletion:!1,noajax:!1,targetEntity:"",lookupSettings:{},customButtons:er,formReference:{Id:"",LogicalName:"",Name:""},formDetails:{},recordSource:$e,recordSourceRequest:"",requiredOverrides:[],optionalOverrides:[],recaptcha:{scoreThreshold:.5,action:null,theme:null,size:null,badge:null},forms:{injectDependencies:null,isSsr:null,keepSubmittedForm:null,resetValuesOnSubmit:null,isRecaptchaEnabled:null,successMessage:"",failMessage:"",fieldTemplates:[],twigTemplate:null},defaultValues:[],redirect:""},mc=new a["a"]({data(){return{md:[]}}}),pc={2:"Main",6:"Quick view",7:"Quick create",11:"Card"};var gc={name:"RegistrationEditor",components:{ButtonLoader:vs,RegistrationDefaultValues:Al,RegistrationLookupSettings:Jl,CustomButtonsSettings:dc,FieldTemplateSetting:mr,FormSelector:Pr,Spinner:ps},props:["id","registration","loading"],mixins:[Y],created(){this._initConfig(),this.loadTemplates(),this.loadLanguages(),this.loadTwigTemplates()},watch:{id(){this._initConfig()},formRefId(t){null!==t&&this._fetchMetadata()}},data(){return{config:No()(uc),selectedAttributes:[],selectedRequiredAttributes:[],selectedOptionalAttributes:[],isLoadingMetadata:!1}},computed:{constants(){return{TYPE_V2_CHECKBOX:ce,TYPE_V2_INVISIBLE:de,TYPE_V3:ue,ACTION_CREATE:Fe,ACTION_UPDATE:Ae,ACTION_READ:De,ACTION_NOAJAX:Ee,SOURCE_BINDING:$e,SOURCE_REQUEST:Le,SOURCE_EXPLICIT_BINDING:Oe,DEFAULT_BUTTONS:er}},supportedThemes(){return{[me]:"Light",[pe]:"Dark"}},supportedSizes(){return{[ge]:"Normal",[he]:"Compact"}},supportedBadges(){return{[ve]:"Bottom Left",[fe]:"Bottom Right",[_e]:"Bottom Right"}},formFields(){return this.$store.state.settings.forms.formFields||[]},isCurrentRegistrationComplete(){const t=this.config;return t&&""!==t.name.trim()&&t.formReference&&t.formReference.Id&&(t.action===Fe||(t.action===Ae||t.action===De)&&(t.recordSource===$e||t.recordSource===Le&&t.recordSourceRequest||t.recordSource===Oe))},hasFormRef(){const t=this.config.formReference.Id;return this.config.formReference&&null!==t&&""!==(""+this.config.formReference.Id).trim()},formRefId(){return this.config.formReference.Id},formRefLabel(){if(!this.hasFormRef)return"(Select a form)";let t=this.targetMetadata?this.targetMetadata.DisplayName.UserLocalizedLabel.Label:this.config.targetEntity,e=pc[this.config.formDetails.type]?` (${pc[this.config.formDetails.type]})`:"";return`${t} - ${this.config.formReference.Name}${e}`},targetEntityAttributes(){if(!this.isMetadataAvailable)return[];let t=this.targetMetadata.Attributes;return t=ji()(t,t=>null===t.AttributeOf&&"VirtualType"!==t.AttributeTypeName.Value&&null!==t.SourceType),t=Kt()(t,t=>t.DisplayName.UserLocalizedLabel?t.DisplayName.UserLocalizedLabel.Label:t.LogicalName),Ut()(t,t=>({logicalName:t.LogicalName,displayName:t.DisplayName.UserLocalizedLabel?t.DisplayName.UserLocalizedLabel.Label:t.LogicalName,description:t.Description.UserLocalizedLabel?t.Description.UserLocalizedLabel.Label:""}))},currentRegistrationRequiredOverrides(){if(!this.isMetadataAvailable)return Ut()(this.config.requiredOverrides,t=>({logicalName:t,displayName:t,description:t}));const t=Ut()(this.config.requiredOverrides,t=>{if(!Ka()(this.targetMetadata.Attributes,t))return{logicalName:t,displayName:t,description:t};const e=this.targetMetadata.Attributes[t];return{logicalName:e.LogicalName,displayName:e.DisplayName.UserLocalizedLabel?e.DisplayName.UserLocalizedLabel.Label:e.LogicalName,description:e.Description.UserLocalizedLabel?e.Description.UserLocalizedLabel.Label:""}});return Kt()(t,(function(t){return t.displayName}))},currentRegistrationOptionalOverrides(){if(!this.isMetadataAvailable)return Ut()(this.config.optionalOverrides,t=>({logicalName:t,displayName:t,description:t}));const t=Ut()(this.config.optionalOverrides,t=>{if(!Ka()(this.targetMetadata.Attributes,t))return{logicalName:t,displayName:t,description:t};const e=this.targetMetadata.Attributes[t];return{logicalName:e.LogicalName,displayName:e.DisplayName.UserLocalizedLabel?e.DisplayName.UserLocalizedLabel.Label:e.LogicalName,description:e.Description.UserLocalizedLabel?e.Description.UserLocalizedLabel.Label:""}});return Kt()(t,(function(t){return t.displayName}))},targetEntityAttributesWithoutOverrides(){const t=Ut()(this.currentRegistrationRequiredOverrides,"logicalName"),e=Ut()(this.currentRegistrationOptionalOverrides,"logicalName");return ji()(this.targetEntityAttributes,s=>{const i=s.logicalName;return!Xa()(t,i)&&!Xa()(e,i)})},effectiveKeepSubmittedForm(){return null===this.config.forms.keepSubmittedForm?this.formSettings.keepSubmittedForm:this.config.forms.keepSubmittedForm},effectiveIsRecaptchaEnabled(){return null===this.config.forms.isRecaptchaEnabled?this.formSettings.isRecaptchaEnabled:this.config.forms.isRecaptchaEnabled},inlineFullnameOverride:{get(){return this.config.forms.fullnameFields?this.config.forms.fullnameFields.join(", "):""},set(t){this.config.forms.fullnameFields=Ar()(t,/[^, ]+/g)}},inlineAddressOverride:{get(){return this.config.forms.addressFields?this.config.forms.addressFields.join(","):""},set(t){this.config.forms.addressFields=Ar()(t,/[^, ]+/g)}},isMetadataAvailable(){return Ka()(mc.md,this.config.targetEntity)},targetMetadata(){return mc.md[this.config.targetEntity]},...Object(c["e"])({formSettings:t=>t.settings.forms,recaptchaSettings:t=>t.settings.recaptcha,fetchXmlTemplates:t=>t.settings.fetchXmlTemplates.templates,languages:t=>t.settings.languages.languages,twigTemplates:t=>t.settings.twigTemplates.templates})},methods:{...Object(c["b"])("settings/fetchXmlTemplates",["loadTemplates"]),...Object(c["b"])("settings/languages",["loadLanguages"]),...Object(c["b"])("settings/twigTemplates",["loadTwigTemplates"]),setSettings(t,e){this.$set(this.config,t,e)},_initConfig(){let t;t=0===this.id?No()(uc):lr()({},uc,No()(this.registration)),this.config=t,this._fetchMetadata(),this.$refs.formName&&this.$nextTick(()=>{this.$refs.formName.focus()})},_fetchMetadata(){const t=this.config.targetEntity;this.hasFormRef&&!Ka()(mc.md,t)&&(this.isLoadingMetadata=!0,w().get("entity_metadata/"+t).then(e=>{this.isLoadingMetadata=!1;const s=e.data.metadata;s&&a["a"].set(mc.md,t,s)}).catch(t=>{this.isLoadingMetadata=!1,this.$messageService.error("Failed to fetch entity metadata. Some features may not work correctly."),console.log(t)}))},showFormSelector(){this.$refs.formSelector.open()},applyFormSelection(t,e,s){if(!t||!e)return this.config.targetEntity=null,void(this.config.formReference={LogicalName:null,Id:null,Name:null});this.config.targetEntity=t,this.config.formReference=e,this.config.formDetails=s},removeFormRef(){this.config.targetEntity=null,this.config.formReference={LogicalName:null,Id:null,Name:null}},addAttributesToRequired(){this.config.requiredOverrides.push(...this.selectedAttributes)},addAttributesToOptional(){this.config.optionalOverrides.push(...this.selectedAttributes)},removeRequiredOverrides(){this.config.requiredOverrides=gr()(this.config.requiredOverrides,this.selectedRequiredAttributes)},removeOptionalOverrides(){this.config.optionalOverrides=gr()(this.config.optionalOverrides,this.selectedOptionalAttributes)},async createRegistration(){await this.$emit("setSettings"),await this.$emit("save",this.config)},async updateRegistration(){await this.$emit("setSettings"),await this.$emit("save",this.config)},updateDefaultValues(t){this.config.defaultValues=t},handleCollapse(){console.log(arguments)}}},hc=gc,fc=(s("96d5"),Object(L["a"])(hc,Go,Qo,!1,null,"7df5d549",null)),vc=fc.exports;function _c(){return!Xe()}var bc={name:"FormsPanel",components:{ButtonLoader:vs,RegistrationEditor:vc,RegistrationsList:Yo,Panel:is},mixins:[za,Y],data(){return{registrations:[],activeId:null,loading:!1,error:null}},computed:{currentRegistration(){return null===this.activeId?null:0===this.activeId?{}:Lr()(this.registrations,{id:this.activeId})}},created(){this.fetchRegistrations(),this.$root.$on("update-form-registrations",this.fetchRegistrations)},methods:{createNew(){this.activeId=0},fetchRegistrations(){return this.loading=!0,this.error=null,w().get("form_registrations").then(t=>{this.registrations=t.data.data}).catch(t=>{this.error="Failed to load form registrations. "+t.message}).finally(()=>{this.loading=!1})},upsertRegistration(t){this.loading=!0,this.error=null;const e=No()(t);let s;""===e.forms.successMessage&&(e.forms.successMessage=null),""===e.forms.failMessage&&(e.forms.failMessage=null);let i=null;s=e.id>0?w().put("form_registrations/"+e.id,e):w().post("form_registrations",e),s.then(t=>{0===e.id&&(i=t.data.registration.id),this.loading=!1,this.$messageService.success(this.__("Changes has been saved successfully.","integration-cds"))}).catch(t=>{this.loading=!1,this.error=t.message}).then(this.fetchRegistrations).then(()=>{null!=i&&(this.activeId=i)})},deleteRegistration(t){const e=Lr()(this.registrations,{id:t});confirm(`Delete '${e.name}'?`)&&(this.loading=!0,this.error=null,w().delete("form_registrations/"+t).then(()=>{null!==this.activeId&&this.activeId===t&&(this.activeId=null),this.fetchRegistrations(),this.$messageService.success(this.__("Form registration deleted successfully.","integration-cds"))}).catch(t=>{this.error=t.message}).finally(()=>{this.loading=!1}))}}},yc=bc,Cc=Object(L["a"])(yc,Ro,Io,!1,null,"12fc27a1",null),Sc=Cc.exports,wc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("p",{staticClass:"text-muted"},[t._v(t._s(t.__("These settings will apply to all registered forms by default. You can override this settings in form registration settings.","integration-cds")))]),s("hr"),s("div",{staticClass:"mb-3"},[s("EnableRecaptchaSetting")],1),s("div",{staticClass:"mb-3"},[s("KeepSubmittedSetting")],1),s("div",{staticClass:"mb-3"},[s("InjectDependenciesSetting")],1),s("div",{staticClass:"mb-3"},[s("FormRenderingSetting")],1),t.keepSubmittedForm?s("div",{staticClass:"mb-3"},[s("ResetValuesSetting")],1):t._e(),s("hr"),s("div",{staticClass:"mb-3"},[s("SuccessMessageSetting")],1),s("div",{staticClass:"mb-3"},[s("FailMessageSetting")],1),s("hr"),s("div",{staticClass:"form-group"},[s("InlineFullnameSetting")],1),s("div",{staticClass:"form-group"},[s("InlineAddressSetting")],1),s("hr"),s("div",{staticClass:"mb-3"},[s("LookupDropdownSettings")],1),s("hr"),s("div",{staticClass:"mb-3"},[s("TemplateSetting")],1),s("div",{staticClass:"mb-3"},[s("FieldTemplateSetting")],1)])},kc=[],xc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("label",[t._v(" "+t._s(t.__("reCAPTCHA on all forms","integration-cds"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("div",[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isRecaptchaEnabled,expression:"isRecaptchaEnabled"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsRecaptchaEnabled"},domProps:{value:!0,checked:t._q(t.isRecaptchaEnabled,!0)},on:{change:function(e){t.isRecaptchaEnabled=!0}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsRecaptchaEnabled"}},[t._v(" "+t._s(t.__("Enabled","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isRecaptchaEnabled,expression:"isRecaptchaEnabled"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsRecaptchaDisabled"},domProps:{value:!1,checked:t._q(t.isRecaptchaEnabled,!1)},on:{change:function(e){t.isRecaptchaEnabled=!1}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsRecaptchaDisabled"}},[t._v(" "+t._s(t.__("Disabled","integration-cds"))+" ")])])]),t.isRecaptchaEnabled?s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("reCAPTCHA is enabled on all forms by default. You can disable reCAPTCHA separately in form registration settings.","integration-cds"))+" ")]):s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("reCAPTCHA is disabled on all forms by default. You can enable reCAPTCHA separately in form registration settings.","integration-cds"))+" ")])])},Tc=[],Nc={name:"EnableRecaptchaSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1}},computed:{isRecaptchaEnabled:{get(){return this.$store.state.settings.forms.isRecaptchaEnabled},set(t){this.loading=!0,this.$store.dispatch("settings/forms/update",{isRecaptchaEnabled:t}).then(()=>{this.$messageService.success("Settings have been saved successfully.")}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.loading=!1})}}}},Pc=Nc,Fc=Object(L["a"])(Pc,xc,Tc,!1,null,"f1c17154",null),Ac=Fc.exports,Dc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("label",[t._v(" "+t._s(t.__("Keep the form after submission","integration-cds"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("div",[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keepSubmittedForm,expression:"keepSubmittedForm"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsKeepFormEnabled"},domProps:{value:!0,checked:t._q(t.keepSubmittedForm,!0)},on:{change:function(e){t.keepSubmittedForm=!0}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsKeepFormEnabled"}},[t._v(" "+t._s(t.__("Enabled","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keepSubmittedForm,expression:"keepSubmittedForm"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsKeepFormDisabled"},domProps:{value:!1,checked:t._q(t.keepSubmittedForm,!1)},on:{change:function(e){t.keepSubmittedForm=!1}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsKeepFormDisabled"}},[t._v(" "+t._s(t.__("Disabled","integration-cds"))+" ")])])]),t.keepSubmittedForm?s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("The forms will be kept on the page after submission.","integration-cds"))+" ")]):s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("The forms will be hidden after submission.","integration-cds"))+" ")])])},Ec=[],$c={name:"KeepSubmittedSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1}},computed:{keepSubmittedForm:{get(){return this.$store.state.settings.forms.keepSubmittedForm},set(t){this.loading=!0,this.$store.dispatch("settings/forms/update",{keepSubmittedForm:t}).then(()=>{this.$messageService.success(this.__("Settings have been saved successfully.","integration-cds"))}).catch(()=>{this.$messageService.error(this.__("Failed to save the settings.","integration-cds"))}).finally(()=>{this.loading=!1})}}}},Lc=$c,Oc=Object(L["a"])(Lc,Dc,Ec,!1,null,"09507ae2",null),Rc=Oc.exports,Ic=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("label",[t._v(" "+t._s(t.__("Include dependencies","integration-cds"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("div",[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.injectDependencies,expression:"injectDependencies"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsInjectDependenciesEnabled"},domProps:{value:!0,checked:t._q(t.injectDependencies,!0)},on:{change:function(e){t.injectDependencies=!0}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsInjectDependenciesEnabled"}},[t._v("Yes")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.injectDependencies,expression:"injectDependencies"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsInjectDependenciesDisabled"},domProps:{value:!1,checked:t._q(t.injectDependencies,!1)},on:{change:function(e){t.injectDependencies=!1}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsInjectDependenciesDisabled"}},[t._v("No")])])]),t._m(0)])},Mc=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("small",{staticClass:"form-text text-muted"},[t._v(" Our forms require "),s("a",{attrs:{href:"https://getbootstrap.com/",target:"_blank"}},[t._v("Bootstrap 4")]),t._v(" and "),s("a",{attrs:{href:"https://fontawesome.com/",target:"_blank"}},[t._v("Font Awesome 5")]),t._v(" to work properly. We provide custom builds of these dependencies which do not interfere with the existing layout of pages. You don't need this setting turned ON if your WordPress theme provides these dependencies. ")])}],Vc={name:"InjectDependencies",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1}},computed:{injectDependencies:{get(){return this.$store.state.settings.forms.injectDependencies},set(t){this.loading=!0,this.$store.dispatch("settings/forms/update",{injectDependencies:t}).then(()=>{this.$messageService.success("Settings have been saved successfully.")}).catch(()=>{this.$messageService.error("Failed to save the settings.")}).finally(()=>{this.loading=!1})}}}},jc=Vc,Bc=Object(L["a"])(jc,Ic,Mc,!1,null,null,null),Uc=Bc.exports,qc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("label",{attrs:{title:"Applies only to forms which create new records."}},[t._v(" "+t._s(t.__("Reset form values after submission","integration-cds"))+" "),s("small",[t._v("("+t._s(t.__("create only","integration-cds"))+")")]),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("div",[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.resetValuesOnSubmit,expression:"resetValuesOnSubmit"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsResetFormEnabled"},domProps:{value:!0,checked:t._q(t.resetValuesOnSubmit,!0)},on:{change:function(e){t.resetValuesOnSubmit=!0}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsResetFormEnabled"}},[t._v(" "+t._s(t.__("Enabled","integration-cds"))+" ")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.resetValuesOnSubmit,expression:"resetValuesOnSubmit"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsResetFormDisabled"},domProps:{value:!1,checked:t._q(t.resetValuesOnSubmit,!1)},on:{change:function(e){t.resetValuesOnSubmit=!1}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsResetFormDisabled"}},[t._v(" "+t._s(t.__("Disabled","integration-cds"))+" ")])])]),t.resetValuesOnSubmit?s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("Entered values will be removed from the form after successful submission.","integration-cds"))+" ")]):s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("Entered values will be left as-is after successful submission.","integration-cds"))+" ")])])},zc=[],Wc={name:"ResetValuesSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1}},computed:{resetValuesOnSubmit:{get(){return this.$store.state.settings.forms.resetValuesOnSubmit},set(t){this.loading=!0,this.$store.dispatch("settings/forms/update",{resetValuesOnSubmit:t}).then(()=>{this.$messageService.success("Settings have been saved successfully.")}).catch(()=>{this.$messageService.error("Failed to save the settings.")}).finally(()=>{this.loading=!1})}}}},Kc=Wc,Hc=Object(L["a"])(Kc,qc,zc,!1,null,null,null),Xc=Hc.exports,Yc=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("label",[t._v(" "+t._s(t.__("Render forms based on twig template","integration-cds"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("div",[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isSsr,expression:"isSsr"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsIsSsr"},domProps:{value:!0,checked:t._q(t.isSsr,!0)},on:{change:function(e){t.isSsr=!0}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsIsSsr"}},[t._v("Yes")])]),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isSsr,expression:"isSsr"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"icdsSettingsFormsIsSsrDisabled"},domProps:{value:!1,checked:t._q(t.isSsr,!1)},on:{change:function(e){t.isSsr=!1}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"icdsSettingsFormsIsSsrDisabled"}},[t._v("No")])])]),s("small",{staticClass:"form-text text-muted"},[t._v(" "+t._s(t.__("If this feature is enabled, you can change the form template by editing","integration-cds"))+" "),s("code",[t._v("integration-cds-premium/templates/twig/form.twig")]),t._v(" "+t._s(t.__("file","integration-cds"))+". ")])])},Gc=[],Qc={name:"FormRendering",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1}},computed:{isSsr:{get(){return this.$store.state.settings.forms.isSsr},set(t){this.loading=!0,this.$store.dispatch("settings/forms/update",{isSsr:t}).then(()=>{this.$messageService.success("Settings have been saved successfully.")}).catch(()=>{this.$messageService.error("Failed to save the settings.")}).finally(()=>{this.loading=!1})}}}},Jc=Qc,Zc=Object(L["a"])(Jc,Yc,Gc,!1,null,null,null),td=Zc.exports,ed=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("label",{attrs:{for:"icdsSettingsFormsSuccessMessage"}},[t._v(" "+t._s(t.__("Successful submission message","integration-cds"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.successMessage,expression:"successMessage",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{id:"icdsSettingsFormsSuccessMessage",type:"text"},domProps:{value:t.successMessage},on:{change:function(e){t.successMessage=e.target.value}}})])},sd=[],id={name:"SuccessMessageSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1}},computed:{successMessage:{get(){return this.$store.state.settings.forms.successMessage},set(t){this.save(t)}}},methods:{save(t){this.loading=!0,this.$store.dispatch("settings/forms/update",{successMessage:t}).then(()=>{this.$messageService.success("Settings have been saved successfully.")}).catch(()=>{this.$messageService.error("Failed to save the settings.")}).finally(()=>{this.loading=!1})}}},ad=id,nd=Object(L["a"])(ad,ed,sd,!1,null,null,null),od=nd.exports,rd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("label",{attrs:{for:"icdsSettingsFormsFailMessage"}},[t._v(" "+t._s(t.__("Failed submission message","integration-cds"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.failMessage,expression:"failMessage",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{id:"icdsSettingsFormsFailMessage",type:"text"},domProps:{value:t.failMessage},on:{change:function(e){t.failMessage=e.target.value}}})])},ld=[],cd={name:"FailMessageSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1}},computed:{failMessage:{get(){return this.$store.state.settings.forms.failMessage},set(t){this.save(t)}}},methods:{save(t){this.loading=!0,this.$store.dispatch("settings/forms/update",{failMessage:t}).then(()=>{this.$messageService.success(this.__("Settings have been saved successfully.","integration-cds"))}).catch(()=>{this.$messageService.error(this.__("Failed to save the settings.","integration-cds"))}).finally(()=>{this.loading=!1})}}},dd=cd,ud=Object(L["a"])(dd,rd,ld,!1,null,null,null),md=ud.exports,pd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("label",{attrs:{for:"icdsSettingsFormsFullname"}},[t._v(" "+t._s(t.__("Full Name field decomposition","integration-cds"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.fullnameFields,expression:"fullnameFields",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{id:"icdsSettingsFormsFullname",type:"text"},domProps:{value:t.fullnameFields},on:{change:function(e){t.fullnameFields=e.target.value}}})])},gd=[],hd={name:"InlineFullnameSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1}},computed:{fullnameFields:{get(){return this.$store.state.settings.forms.fullnameFields.join(", ")},set(t){this.save(Ar()(t,/[^, ]+/g))}}},methods:{save(t){this.loading=!0,this.$store.dispatch("settings/forms/update",{fullnameFields:t}).then(()=>{this.$messageService.success(this.__("Settings have been saved successfully.","integration-cds"))}).catch(()=>{this.$messageService.error(this.__("Failed to save the settings.","integration-cds"))}).finally(()=>{this.loading=!1})}}},fd=hd,vd=Object(L["a"])(fd,pd,gd,!1,null,null,null),_d=vd.exports,bd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("label",{attrs:{for:"icdsSettingsFormsAddress"}},[t._v(" "+t._s(t.__("Composite Address field decomposition","integration-cds"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.addressFields,expression:"addressFields",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{id:"icdsSettingsFormsAddress",type:"text"},domProps:{value:t.addressFields},on:{change:function(e){t.addressFields=e.target.value}}})])},yd=[],Cd={name:"InlineAddressSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1}},computed:{addressFields:{get(){return this.$store.state.settings.forms.addressFields.join(", ")},set(t){this.save(Ar()(t,/[^, ]+/g))}}},methods:{save(t){this.loading=!0,this.$store.dispatch("settings/forms/update",{addressFields:t}).then(()=>{this.$messageService.success("Settings have been saved successfully.")}).catch(()=>{this.$messageService.error("Failed to save the settings.")}).finally(()=>{this.loading=!1})}}},Sd=Cd,wd=Object(L["a"])(Sd,bd,yd,!1,null,null,null),kd=wd.exports,xd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",[t._v("Lookup dropdown settings")]),s("label",{attrs:{for:"icdsSettingsFormsLookupCharNumTrigger"}},[t._v(" "+t._s(t.__("Number of characters before search is triggered","integration-cds"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.charsBeforeSearch,expression:"charsBeforeSearch",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{id:"icdsSettingsFormsLookupCharNumTrigger",type:"number",min:"1"},domProps:{value:t.charsBeforeSearch},on:{change:function(e){t.charsBeforeSearch=e.target.value}}}),s("label",{attrs:{for:"icdsSettingsFormsLookupDelayBeforeSearch"}},[t._v(" "+t._s(t.__("Delay in ms before performing a search (min 250)","integration-cds"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.delayBeforeSearch,expression:"delayBeforeSearch",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{id:"icdsSettingsFormsLookupDelayBeforeSearch",type:"number",min:"250"},domProps:{value:t.delayBeforeSearch},on:{change:function(e){t.delayBeforeSearch=e.target.value}}})])},Td=[],Nd={name:"LookupDropdownSettings",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1}},computed:{charsBeforeSearch:{get(){return this.$store.state.settings.forms.charsBeforeSearch||1},set(t){this.save(t,"charsBeforeSearch")}},delayBeforeSearch:{get(){return this.$store.state.settings.forms.delayBeforeSearch||250},set(t){this.save(t,"delayBeforeSearch")}}},methods:{save(t,e){this.loading=!0,this.$store.dispatch("settings/forms/update",{[e]:t}).then(()=>{this.$messageService.success("Settings have been saved successfully.")}).catch(()=>{this.$messageService.error("Failed to save the settings.")}).finally(()=>{this.loading=!1})}}},Pd=Nd,Fd=Object(L["a"])(Pd,xd,Td,!1,null,null,null),Ad=Fd.exports,Dd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"form_template"}},[t._v(" "+t._s(t.__("Forms template"))+" "),t.loading?s("Spinner",{staticClass:"ml-1",attrs:{width:16}}):t._e()],1),s("select",{directives:[{name:"model",rawName:"v-model",value:t.formTemplate,expression:"formTemplate"}],staticClass:"form-control",attrs:{name:"form_template",id:"form_template"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.formTemplate=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}},[t._v(t._s(t.__("Default")))]),t._l(t.twigTemplates,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)])])},Ed=[],$d={name:"TemplateSetting",components:{Spinner:ps},mixins:[Y],data(){return{loading:!1}},computed:{formTemplate:{get(){return this.$store.state.settings.forms.formTemplate},set(t){this.save(t)}},...Object(c["e"])({twigTemplates:t=>t.settings.twigTemplates.templates})},methods:{save(t){this.loading=!0,this.$store.dispatch("settings/forms/update",{formTemplate:t}).then(()=>{this.$messageService.success(this.__("Settings have been saved successfully.","integration-cds"))}).catch(()=>{this.$messageService.error(this.__("Failed to save the settings.","integration-cds"))}).finally(()=>{this.loading=!1})}}},Ld=$d,Od=Object(L["a"])(Ld,Dd,Ed,!1,null,"6c57999a",null),Rd=Od.exports,Id={name:"FormsGlobalSettings",components:{Panel:is,LookupDropdownSettings:Ad,InlineAddressSetting:kd,InlineFullnameSetting:_d,FailMessageSetting:md,SuccessMessageSetting:od,FormRenderingSetting:td,TemplateSetting:Rd,FieldTemplateSetting:mr,ResetValuesSetting:Xc,InjectDependenciesSetting:Uc,KeepSubmittedSetting:Rc,EnableRecaptchaSetting:Ac},mixins:[za,Y],computed:{keepSubmittedForm(){return this.$store.state.settings.forms.keepSubmittedForm}}},Md=Id,Vd=Object(L["a"])(Md,wc,kc,!1,null,"7c725f15",null),jd=Vd.exports,Bd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"mb-3"},[s("ButtonLoader",{attrs:{"btn-class":"btn-success",loading:t.isLoading,error:t.error},on:{click:t.initTemplate}},[t._v(" "+t._s(t.__("Create new","integration-cds"))+" ")])],1)])]),s("div",{staticClass:"row"},[t.templates.length?s("div",{staticClass:"col-3"},[s("div",{staticClass:"list-group"},t._l(t.templates,(function(e){return s("TemplatesListItem",{key:e.id,attrs:{template:e,"current-template":t.currentTemplate,loading:t.isLoading},on:{select:t.selectTemplate,delete:t.deleteTemplate}})})),1)]):t.isLoading||t.error?t._e():s("div",{staticClass:"col"},[t._v(" "+t._s(t.__("You don't have any templates yet.","integration-cds"))+" ")]),null!==t.currentTemplate?s("div",{staticClass:"col-9"},[s("TemplateEditor",{attrs:{id:t.currentId,template:t.currentTemplate,saving:t.isSaving},on:{change:function(e){t.unsaved=!0},save:t.upsertTemplate}})],1):t.templates.length?s("div",{staticClass:"col"},[t._v(" "+t._s(t.__("Select an existing template on the left or","integration-cds"))+" "),s("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.initTemplate.apply(null,arguments)}}},[t._v(t._s(t.__("create a new one","integration-cds")))]),t._v(". ")]):t._e()])])},Ud=[],qd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"list-group-item list-group-item-action flex-column align-items-start",class:t.listItemClass,attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("select",t.template.id)}}},[s("div",{staticClass:"d-flex w-100 justify-content-between align-items-center"},[s("h5",{staticClass:"mb-1 text-truncate"},[t._v(" "+t._s(t.template.name)+" ")]),s("div",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("delete",t.template.id)}}},[s("span",{staticClass:"btn text-danger"},[s("fa",{attrs:{icon:["far","trash-alt"],title:"Delete the form registration.",size:"2x"}})],1)])])])},zd=[],Wd={name:"TemplatesListItem",props:["template","currentTemplate","loading"],computed:{listItemClass(){return{active:this.currentTemplate&&this.currentTemplate.id===this.template.id,disabled:this.loading}}}},Kd=Wd,Hd=(s("ffee"),Object(L["a"])(Kd,qd,zd,!1,null,"1b19794c",null)),Xd=Hd.exports,Yd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h5",[t._v("Template editor")]),s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col"},[s("label",{attrs:{for:"templateName"}},[t._v(t._s(t.__("Name","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentTemplate.name,expression:"currentTemplate.name"}],staticClass:"form-control",attrs:{type:"text",id:"templateName",autofocus:""},domProps:{value:t.currentTemplate.name},on:{input:[function(e){e.target.composing||t.$set(t.currentTemplate,"name",e.target.value)},function(e){t.filterInput(/[a-zA-Z0-9_\-@$#%^&+=:;,.!?() ]+/g,e),t.$emit("change")}]}})])]),s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col"},[s("label",[t._v("Content")]),s("CodeEditor",{attrs:{id:t.currentTemplate.id,theme:"twigTheme",language:"twigLanguage"},on:{"input:text":function(e){return t.$emit("change")}},model:{value:t.currentTemplate.source,callback:function(e){t.$set(t.currentTemplate,"source",e)},expression:"currentTemplate.source"}})],1)]),s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col"},[s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentTemplate.isValidate,expression:"currentTemplate.isValidate"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"templateIsValidate"},domProps:{checked:Array.isArray(t.currentTemplate.isValidate)?t._i(t.currentTemplate.isValidate,null)>-1:t.currentTemplate.isValidate},on:{change:function(e){var s=t.currentTemplate.isValidate,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&t.$set(t.currentTemplate,"isValidate",s.concat([n])):o>-1&&t.$set(t.currentTemplate,"isValidate",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.currentTemplate,"isValidate",a)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"templateIsValidate"}},[t._v(" "+t._s(t.__("Validate template on save.","integration-cds"))+" ")])])])]),s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col"},[s("ButtonLoader",{attrs:{"btn-class":"btn-primary",disabled:!t.canSave||t.saving,loading:t.saving},on:{click:function(e){return t.$emit("save",t.currentTemplate)}}},[t.isNew?[t._v(t._s(t.__("Create","integration-cds")))]:[t._v(t._s(t.__("Update","integration-cds")))]],2)],1)])])},Gd=[],Qd=(s("4d63"),s("c607"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex justify-content-end align-items-center"},[t.fullscreen?s("div",{staticClass:"custom-control custom-switch mt-2 btn-fixed word-wrap-fixed monaco-editor-background"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.editorOptions.wordWrap,expression:"editorOptions.wordWrap"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"editorOptionWordwrapFullscreen"},domProps:{checked:Array.isArray(t.editorOptions.wordWrap)?t._i(t.editorOptions.wordWrap,null)>-1:t.editorOptions.wordWrap},on:{change:function(e){var s=t.editorOptions.wordWrap,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&t.$set(t.editorOptions,"wordWrap",s.concat([n])):o>-1&&t.$set(t.editorOptions,"wordWrap",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.editorOptions,"wordWrap",a)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"editorOptionWordwrapFullscreen"}},[t._v(t._s(t.__("Word wrap","integration-cds")))])]):s("div",{staticClass:"custom-control custom-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.editorOptions.wordWrap,expression:"editorOptions.wordWrap"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"editorOptionWordwrap"},domProps:{checked:Array.isArray(t.editorOptions.wordWrap)?t._i(t.editorOptions.wordWrap,null)>-1:t.editorOptions.wordWrap},on:{change:function(e){var s=t.editorOptions.wordWrap,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&t.$set(t.editorOptions,"wordWrap",s.concat([n])):o>-1&&t.$set(t.editorOptions,"wordWrap",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.editorOptions,"wordWrap",a)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"editorOptionWordwrap"}},[t._v(t._s(t.__("Word wrap","integration-cds")))])]),t.fullscreen?s("span",{staticClass:"btn btn-sm text-primary btn-fixed monaco-editor-background",on:{click:function(e){t.fullscreen=!1}}},[s("fa",{attrs:{icon:["fas","compress-arrows-alt"],title:"Close full screen.",size:"2x"}})],1):s("span",{staticClass:"btn btn-sm text-primary pr-0",on:{click:function(e){t.fullscreen=!0}}},[s("fa",{attrs:{icon:["fas","expand-arrows-alt"],title:"Open full screen.",size:"2x"}})],1)]),s("div",{staticClass:"border"},[s("div",{ref:"editorContainer",class:{fullscreen:t.fullscreen},attrs:{id:"editorContainer"},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.fullscreen=!1}}})])])}),Jd=[],Zd=s("c2c6"),tu=s("8718"),eu=s.n(tu);let su=Ut()(window.icdsTwigTags,"name"),iu=()=>Ut()(window.icdsTwigTags,t=>({label:t.name,insertText:t.name,kind:Zd["languages"].CompletionItemKind.Keyword})),au=()=>{let t=Ut()(window.icdsTwigVars,t=>({label:t.name,insertText:t.name,kind:Zd["languages"].CompletionItemKind.Variable})),e=Ut()(window.icdsTwigFunctions,t=>({label:t.name,insertText:t.name,kind:Zd["languages"].CompletionItemKind.Function}));return eu()(t,e,"label")},nu=()=>Ut()(window.icdsTwigFilters,t=>({label:t.name,insertText:t.name,kind:Zd["languages"].CompletionItemKind.Method})),ou=t=>{let e=Lr()(window.icdsTwigTags,{name:t});return e?Ut()(e.attributes,t=>({label:t,insertText:t,kind:Zd["languages"].CompletionItemKind.Property})):[]},ru=(t,e,s)=>{s=!!s;let i=Lr()(window.icdsTwigTags,{name:t});if(void 0===i)return[];if("include"===i.name){let t=ji()(window.icdsTwigSpecialTags["include"][""],t=>!t.disabled);return Ut()(t,t=>({label:t.name,insertText:s?vu(t.name):t.name,kind:Zd["languages"].CompletionItemKind.Value}))}return"form"===i.name&&"id"===e?Ut()(window.icdsTwigSpecialTags["form"]["id"],t=>({label:t.name,insertText:t.id,kind:Zd["languages"].CompletionItemKind.Value,detail:"("+t.id+")"})):"form"===i.name&&"mode"===e?Ut()(window.icdsTwigSpecialTags["form"]["mode"],t=>({label:t.name,insertText:s?vu(t.name):t.name,kind:Zd["languages"].CompletionItemKind.Value})):[]},lu=t=>{let e=Lr()(window.icdsTwigVars,{name:t});return e?Ut()(e.members,t=>({label:t,insertText:t,kind:Zd["languages"].CompletionItemKind.Property})):[]},cu=t=>{let e=Lr()(window.icdsTwigFunctions,{name:t});return e||(e=Lr()(window.icdsTwigFilters,{name:t})),e?[{label:Ut()(e.params,t=>t.name).join(", "),parameters:Ut()(e.params,t=>({label:t.name}))}]:null},du=t=>{let e=t.match(/{%\s*$/);return e&&e.length>0},uu=t=>{let e=t.match(/{{\s*$/);return e&&e.length>0},mu=t=>{let e=t.match(/({%)(\s*)(\w+)((\s+['"]?)|(([\w\W]*?)([^=\s])(\s+)))$/);return e&&e[3]?e[3]:null},pu=t=>{let e=t.match(/({%)(\s*)(\w+)[\w\W]*?(\w+)(\s*)(=)([\s'"]*)$/);return e&&e[4]?{tag:e[3],attribute:e[4],endQuote:e[7]}:null},gu=(t,e)=>{let s=t.match(new RegExp("({{|{%)([\\w\\W]*?)(\\w*)(["+e+"])$"));return s&&s[3]?s[3]:null},hu=t=>{let e=t.match(/({{|{%)([\w\W]*?)[\s|]*(\w+)\(([^)]*)$/);if(e&&e[3]){let t=e[4].match(/,?\s*([^,]*)\s*/g);return t.pop(),{name:e[3],parameters:t}}return null},fu=t=>{let e=t.match(/({{|{%)[^{]*$/);return e&&e[0]?e[0]:t},vu=t=>"'"+t+"'";Zd["languages"].register({id:"twigLanguage"}),Zd["languages"].setLanguageConfiguration("twigLanguage",{comments:{blockComment:["{#","#}"]},brackets:[["{{","}}"],["{%","%}"]],autoClosingPairs:[{open:"{{",close:" }}"},{open:"{%",close:" %}"},{open:'"',close:'"'},{open:"'",close:"'"}]}),Zd["languages"].setMonarchTokensProvider("twigLanguage",{ignoreCase:!1,defaultToken:"",brackets:[["{{","}}","delimiter.expression"],["{%","%}","delimiter.statement"],["{#","#}","comment"],["{","}","delimiter.curly"],["[","]","delimiter.square"],["(",")","delimiter.parenthesis"],["<",">","delimiter.angle"]],twigKeywords:su,tokenizer:{root:[{include:"twigBrackets"},[/<!DOCTYPE/,"metatag","@doctype"],[/<!--/,"comment","@comment"],[/(<)((?:[\w-]+:)?[\w-]+)(\s*)(\/>)/,["delimiter","tag","","delimiter"]],[/(<)(script)/,["delimiter",{token:"tag",next:"@script"}]],[/(<)(style)/,["delimiter",{token:"tag",next:"@style"}]],[/(<)((?:[\w-]+:)?[\w-]+)/,["delimiter",{token:"tag",next:"@otherTag"}]],[/(<\/)((?:[\w-]+:)?[\w-]+)/,["delimiter",{token:"tag",next:"@otherTag"}]],[/</,"delimiter"]],doctype:[[/[^>]+/,"metatag.content"],[/>/,"metatag","@pop"]],comment:[[/-->/,"comment","@pop"],[/[^-]+/,"comment.content"],[/./,"comment.content"]],otherTag:[[/\/?>/,"delimiter","@pop"],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w-]+/,"attribute.name"],[/=/,"delimiter"],[/[ \t\r\n]+/]],script:[[/type/,"attribute.name","@scriptAfterType"],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w-]+/,"attribute.name"],[/=/,"delimiter"],[/>/,{token:"delimiter",next:"@scriptEmbedded",nextEmbedded:"text/javascript"}],[/[ \t\r\n]+/],[/(<\/)(script\s*)(>)/,["delimiter","tag",{token:"delimiter",next:"@pop"}]]],scriptAfterType:[[/=/,"delimiter","@scriptAfterTypeEquals"],[/>/,{token:"delimiter",next:"@scriptEmbedded",nextEmbedded:"text/javascript"}],[/[ \t\r\n]+/],[/<\/script\s*>/,{token:"@rematch",next:"@pop"}]],scriptAfterTypeEquals:[[/"([^"]*)"/,{token:"attribute.value",switchTo:"@scriptWithCustomType.$1"}],[/'([^']*)'/,{token:"attribute.value",switchTo:"@scriptWithCustomType.$1"}],[/>/,{token:"delimiter",next:"@scriptEmbedded",nextEmbedded:"text/javascript"}],[/[ \t\r\n]+/],[/<\/script\s*>/,{token:"@rematch",next:"@pop"}]],scriptWithCustomType:[[/>/,{token:"delimiter",next:"@scriptEmbedded.$S2",nextEmbedded:"$S2"}],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w-]+/,"attribute.name"],[/=/,"delimiter"],[/[ \t\r\n]+/],[/<\/script\s*>/,{token:"@rematch",next:"@pop"}]],scriptEmbedded:[[/<\/script/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}],[/[^<]+/,""]],style:[[/type/,"attribute.name","@styleAfterType"],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w-]+/,"attribute.name"],[/=/,"delimiter"],[/>/,{token:"delimiter",next:"@styleEmbedded",nextEmbedded:"text/css"}],[/[ \t\r\n]+/],[/(<\/)(style\s*)(>)/,["delimiter","tag",{token:"delimiter",next:"@pop"}]]],styleAfterType:[[/=/,"delimiter","@styleAfterTypeEquals"],[/>/,{token:"delimiter",next:"@styleEmbedded",nextEmbedded:"text/css"}],[/[ \t\r\n]+/],[/<\/style\s*>/,{token:"@rematch",next:"@pop"}]],styleAfterTypeEquals:[[/"([^"]*)"/,{token:"attribute.value",switchTo:"@styleWithCustomType.$1"}],[/'([^']*)'/,{token:"attribute.value",switchTo:"@styleWithCustomType.$1"}],[/>/,{token:"delimiter",next:"@styleEmbedded",nextEmbedded:"text/css"}],[/[ \t\r\n]+/],[/<\/style\s*>/,{token:"@rematch",next:"@pop"}]],styleWithCustomType:[[/>/,{token:"delimiter",next:"@styleEmbedded.$S2",nextEmbedded:"$S2"}],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w-]+/,"attribute.name"],[/=/,"delimiter"],[/[ \t\r\n]+/],[/<\/style\s*>/,{token:"@rematch",next:"@pop"}]],styleEmbedded:[[/<\/style/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}],[/[^<]+/,""]],twigBrackets:[[/{{/,{token:"@rematch",switchTo:"@twigExpression"}],[/{%/,{token:"@rematch",switchTo:"@twigStatement"}],[/{#/,{token:"@rematch",switchTo:"@twigComment"}]],twigExpression:[[/{{/,{token:"delimiter.expression",next:"@twigScriptEmbedded",nextEmbedded:"text/javascript"}],[/}}/,{token:"delimiter.expression",switchTo:"@root"}],{include:"twigCommon"}],twigStatement:[[/{%/,"delimiter.statement"],[/%}/,{token:"delimiter.statement",switchTo:"@root"}],{include:"twigCommon"}],twigComment:[[/{#/,"comment"],[/((?!#}).)+/,"comment.content"],[/#}/,{token:"comment",switchTo:"@root"}]],twigCommon:[[/([a-z_][\w]*)(\s*=\s*)([^\s(]*\()/,[{token:"twig.attribute.name"},{token:"delimiter"},{token:"twig.attribute.value",next:"@twigAttributeParams"}]],[/([a-z_][\w]*)(\s*=\s*)([^\s'"{]*)/,[{token:"twig.attribute.name"},{token:"delimiter"},{token:"twig.attribute.value"}]],[/({)([^}]*)(})/,[{token:"twig.attribute.value"},{token:"twig.attribute.value"},{token:"twig.attribute.value"}]],[/(['"])([^'"]*)(['"])/,[{token:"twig.attribute.value"},{token:"twig.attribute.value"},{token:"twig.attribute.value"}]],[/[a-z][\w]*/,{cases:{"@twigKeywords":{token:"twig.keyword"},"@default":{token:"twig.attribute.name"}}}]],twigScriptEmbedded:[[/}}/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}],[/[^}]+/,""]],twigAttributeParams:[[/(\))/,{token:"twig.attribute.value",next:"@pop"}],[/[^),]+/,{token:"twig.attribute.params"}],[/ ?, ?/,{token:"twig.attribute.value"}]]}}),Zd["languages"].registerCompletionItemProvider("twigLanguage",{triggerCharacters:["%","{",".","(","|"," ","=",'"',"'"],provideCompletionItems:(t,e)=>{let s=t.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:e.lineNumber,endColumn:e.column});s=fu(s);let i,a=[];return null!==(i=gu(s,"."))?a=lu(i):gu(s,"|")?a=nu():du(s)?a=iu():null!==(i=mu(s))?a=ru(i)||ou(i):null!==(i=pu(s))?a=ru(i.tag,i.attribute,0===i.endQuote.length)||au():uu(s)&&(a=au()),{suggestions:a}}}),Zd["languages"].registerSignatureHelpProvider("twigLanguage",{signatureHelpTriggerCharacters:["(",","],provideSignatureHelp:(t,e)=>{let s,i=t.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:e.lineNumber,endColumn:e.column}),a=[],n=0;return null!==(s=hu(i))&&(a=cu(s.name),n=s.parameters.length?s.parameters.length-1:0),{signatures:a,activeSignature:0,activeParameter:n}}}),Zd["editor"].defineTheme("twigTheme",{base:"vs",inherit:!0,rules:[{token:"delimiter.expression",foreground:"#547494",fontStyle:"bold"},{token:"delimiter.statement",foreground:"#539494",fontStyle:"bold"},{token:"twig.keyword",foreground:"#547494",fontStyle:"bold"},{token:"twig.attribute.name",foreground:"#381B93"},{token:"twig.attribute.value",foreground:"#DA7A2E"},{token:"twig.attribute.params",foreground:"#777777"}]});s("3c65");const _u={brackets:[{open:"*",close:" *",token:"fetchxml.param"}],tokenizer:{tag:[[/[ \t\r\n]+/,""],[/(@qualifiedName)(\s*=\s*)("\*[^"]*\*"|'\*[^']*\*')/,["attribute.name","","fetchxml.param"]],[/(@qualifiedName)(\s*=\s*)("[^">?\/]*|'[^'>?\/]*)(?=[\?\/]\>)/,["attribute.name","","attribute.value"]],[/(@qualifiedName)(\s*=\s*)("[^">]*|'[^'>]*)/,["attribute.name","","attribute.value"]],[/@qualifiedName/,"attribute.name"],[/\?>/,{token:"delimiter",next:"@pop"}],[/(\/)(>)/,[{token:"tag"},{token:"delimiter",next:"@pop"}]],[/>/,{token:"delimiter",next:"@pop"}]]}},bu=Zd["languages"].getLanguages();bu.find(({id:t})=>"xml"===t).loader().then(({conf:t,language:e})=>{t.autoClosingPairs.unshift.apply(t.autoClosingPairs,[{open:"*",close:"*"}]),e.tokenizer.tag=[];for(let s in _u){const t=_u[s];if("tokenizer"===s)for(let s in t){const i=t[s];e.tokenizer.hasOwnProperty(s)||(e.tokenizer[s]=[]),Array.isArray(i)&&e.tokenizer[s].unshift.apply(e.tokenizer[s],i)}else Array.isArray(t)?(e.hasOwnProperty(s)||(e[s]=[]),e[s].unshift.apply(e[s],t)):e[s]=t}}),Zd["editor"].defineTheme("xmlTheme",{base:"vs",inherit:!0,rules:[{token:"fetchxml.param",foreground:"#12ce12",fontStyle:"bold"}]});const yu="icdsMonacoEditorOptions";var Cu={props:["text","id","theme","language"],mixins:[Y],model:{prop:"text",event:"update:text"},data(){return{editor:null,editorOptions:{wordWrap:!1},fullscreen:!1}},mounted(){if(this.editor=Zd["editor"].create(this.$refs.editorContainer,{language:this.language?this.language:"twigLanguage",theme:this.theme?this.theme:"twigTheme",automaticLayout:!0,wrappingIndent:"indent",lineNumbers:!1,lineDecorationsWidth:"3",minimap:{enabled:!1},folding:!1,roundedSelection:!1,scrollBeyondLastLine:!1}),this.editor.setValue(this.text),localStorage&&localStorage.getItem(yu))try{this.editorOptions=JSON.parse(localStorage.getItem(yu))}catch(t){localStorage.removeItem(yu)}this.editor.getModel().onDidChangeContent(t=>{this.$emit("update:text",this.editor.getValue()),t.isFlush||this.$emit("input:text",this.editor.getValue())})},beforeDestroy(){this.editor&&this.editor.dispose()},watch:{id(){this.editor.setValue(this.text)},editorOptions:{handler(t){this.editor.updateOptions(t),localStorage&&localStorage.setItem(yu,JSON.stringify(t))},deep:!0},fullscreen(t){!0===t&&this.editor.focus()}}},Su=Cu,wu=(s("0b84"),Object(L["a"])(Su,Qd,Jd,!1,null,"1622a779",null)),ku=wu.exports;const xu={id:0,name:"",source:"",isValidate:!0};var Tu={name:"TemplateEditor",mixins:[Y],components:{CodeEditor:ku,ButtonLoader:vs},props:["id","template","saving"],data(){return{currentTemplate:this.initTemplate()}},watch:{id(){this.currentTemplate=this.initTemplate()}},computed:{isNew(){return 0===this.currentTemplate.id},canSave(){return!!this.currentTemplate.name&&!!this.currentTemplate.name.trim()&&!!this.currentTemplate.source&&!!this.currentTemplate.source.trim()}},methods:{initTemplate(){let t;return t=0===this.id?No()(xu):No()(this.template),t},filterInput(t,e){if(!(t instanceof RegExp))return;let s=e.target.value.match(t)||[],i=s.join("");e.target.value=i,this.currentTemplate.name=i}}},Nu=Tu,Pu=Object(L["a"])(Nu,Yd,Gd,!1,null,null,null),Fu=Pu.exports;function Au(){return!Xe()}var Du={name:"TemplatesPanel",mixins:[za,Y],components:{ButtonLoader:vs,Panel:is,TemplatesListItem:Xd,TemplateEditor:Fu},data(){return{templates:[],currentId:null,unsaved:!1,isLoading:!1,isSaving:!1,error:null}},computed:{currentTemplate(){return null===this.currentId?null:0===this.currentId?{}:Lr()(this.templates,{id:this.currentId})}},created(){this.loadTemplates(),this.$root.$on("update-templates",this.loadTemplates)},methods:{initTemplate(){this.currentId=0},selectTemplate(t){this.unsaved&&!confirm("You have unsaved changed in current templates. Switch to another?")||(ws()(window.icdsTwigSpecialTags["include"][""],t=>{t.disabled=!1}),window.icdsTwigSpecialTags["include"][""][t].disabled=!0,this.currentId=t,this.unsaved=!1)},loadTemplates(){return this.isLoading=!0,this.error=null,w().get("templates").then(t=>{this.templates=t.data.data}).catch(t=>{this.error("Failed to load templates: "+t.message)}).finally(()=>{this.isLoading=!1})},upsertTemplate(t){let e;this.isSaving=!0,e=t.id>0?w().put("templates/"+t.id,t):w().post("templates",t),e.then(()=>{this.loadTemplates().then(()=>{this.updateTwigSuggestions();const e=Lr()(this.templates,{name:t.name});this.selectTemplate(e.id)}),this.unsaved=!1,this.$messageService.success("Template has been saved successfully.")}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.isSaving=!1})},deleteTemplate(t){const e=Lr()(this.templates,{id:t});confirm(`Delete template '${e.name}'?`)&&(this.isLoading=!0,w().delete("templates/"+e.id).then(()=>{null!==this.currentId&&this.currentId===t&&(this.currentId=null),this.loadTemplates().then(()=>{this.updateTwigSuggestions()}),this.$messageService.success("Template has been deleted successfully.")}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.isLoading=!1}))},updateTwigSuggestions(){window.icdsTwigSpecialTags["include"][""]={},ws()(this.templates,t=>{window.icdsTwigSpecialTags["include"][""][t.id]={id:t.id,name:t.name}})}}},Eu=Du,$u=Object(L["a"])(Eu,Bd,Ud,!1,null,null,null),Lu=$u.exports,Ou=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"mb-3"},[s("ButtonLoader",{attrs:{"btn-class":"btn-success",loading:t.isLoading,error:t.error},on:{click:t.initTemplate}},[t._v(" "+t._s(t.__("Create new","integration-cds"))+" ")])],1)])]),s("div",{staticClass:"row"},[t.templates.length?s("div",{staticClass:"col-3"},[s("div",{staticClass:"list-group"},t._l(t.templates,(function(e){return s("FetchXmlTemplatesListItem",{key:"fetch_xml_template_"+e.id,attrs:{template:e,"current-template":t.currentTemplate,loading:t.isLoading},on:{select:t.selectTemplate,delete:t.deleteTemplate}})})),1)]):t.isLoading||t.error?t._e():s("div",{staticClass:"col"},[t._v(" "+t._s(t.__("You don't have any templates yet.","integration-cds"))+" ")]),null!==t.currentTemplate?s("div",{staticClass:"col-9"},[s("FetchXmlTemplateEditor",{attrs:{id:t.currentId,template:t.currentTemplate,saving:t.isSaving},on:{change:function(e){t.unsaved=!0},save:t.upsertTemplate}})],1):t.templates.length?s("div",{staticClass:"col"},[t._v(" "+t._s(t.__("Select an existing template on the left or","integration-cds"))+" "),s("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.initTemplate.apply(null,arguments)}}},[t._v(t._s(t.__("create a new one","integration-cds")))]),t._v(". ")]):t._e()])])},Ru=[],Iu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"list-group-item list-group-item-action flex-column align-items-start",class:t.listItemClass,attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("select",t.template.id)}}},[s("div",{staticClass:"d-flex w-100 justify-content-between align-items-center"},[s("h5",{staticClass:"mb-1 text-truncate"},[t._v(" "+t._s(t.template.name)+" ")]),s("div",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("delete",t.template.id)}}},[s("span",{staticClass:"btn text-danger"},[s("fa",{attrs:{icon:["far","trash-alt"],title:"Delete the form registration.",size:"2x"}})],1)])])])},Mu=[],Vu={name:"TemplatesListItem",props:["template","currentTemplate","loading"],computed:{listItemClass(){return{active:this.currentTemplate&&this.currentTemplate.id===this.template.id,disabled:this.loading}}}},ju=Vu,Bu=(s("30f5"),Object(L["a"])(ju,Iu,Mu,!1,null,"ba44e7d6",null)),Uu=Bu.exports,qu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h5",[t._v(t._s(t.__("Template editor","integration-cds")))]),s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col"},[s("label",{attrs:{for:"templateName"}},[t._v(t._s(t.__("Name","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentTemplate.name,expression:"currentTemplate.name"}],staticClass:"form-control",attrs:{type:"text",id:"templateName",autofocus:""},domProps:{value:t.currentTemplate.name},on:{input:[function(e){e.target.composing||t.$set(t.currentTemplate,"name",e.target.value)},function(e){t.filterInput(/[a-zA-Z0-9_\-@$#%^&+=:;,.!?() ]+/g,e),t.$emit("change")}]}})])]),s("div",{staticClass:"col form-group pl-0"},[s("div",{staticClass:"col pl-0"},[s("label",[t._v(t._s(t.__("FetchXML","integration-cds")))]),s("CodeEditor",{attrs:{id:t.currentTemplate.id,theme:"xmlTheme",language:"xml"},on:{"input:text":function(e){return t.$emit("change")}},model:{value:t.currentTemplate.source,callback:function(e){t.$set(t.currentTemplate,"source",e)},expression:"currentTemplate.source"}}),s("small",{domProps:{textContent:t._s(t.tip)}})],1),s("div",{staticClass:"col pl-0"},[s("section",{staticClass:"mt-2"},[s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.currentTemplate.params.push({name:"",default:"",value:""})}}},[t._v(t._s(t.__("Add new param","integration-cds")))]),t._l(t.currentTemplate.params,(function(e,i){return s("FetchXmlTemplateSettingsParam",{key:"template"+(Number(t.currentTemplate.id)+i),attrs:{oldParam:e},on:{deleteParam:function(e){return t.currentTemplate.params.splice(i,1)}}})}))],2)])]),s("div",{staticClass:"row form-group"},[s("div",{staticClass:"col"},[s("ButtonLoader",{attrs:{"btn-class":"btn-primary",disabled:!t.canSave||t.saving,loading:t.saving},on:{click:function(e){return t.$emit("save",t.currentTemplate)}}},[t.isNew?[t._v(t._s(t.__("Create","integration-cds")))]:[t._v(t._s(t.__("Update","integration-cds")))]],2)],1)])])},zu=[];const Wu={id:0,name:"",source:"",params:[]};var Ku={name:"FetchXmlTemplateEditor",mixins:[Y],components:{CodeEditor:ku,ButtonLoader:vs,FetchXmlTemplateSettingsParam:jl},props:["id","template","saving"],data(){return{currentTemplate:this.initTemplate(),isAddingParam:!1}},watch:{id(){this.currentTemplate=this.initTemplate()}},computed:{isNew(){return 0===this.currentTemplate.id},canSave(){return!!this.currentTemplate.name&&!!this.currentTemplate.name.trim()&&!!this.currentTemplate.source&&!!this.currentTemplate.source.trim()},tip(){return'Place the parameter name between the asterisks. For example: <condition attribute="parentcustomerid" operator="eq" value="*paramName1*" />'}},methods:{initTemplate(){let t;return t=0===this.id?No()(Wu):No()(this.template),t},filterInput(t,e){if(!(t instanceof RegExp))return;let s=e.target.value.match(t)||[],i=s.join("");e.target.value=i,this.currentTemplate.name=i}}},Hu=Ku,Xu=Object(L["a"])(Hu,qu,zu,!1,null,null,null),Yu=Xu.exports;function Gu(){return!Xe()}var Qu={name:"FetchXmlTemplatesPanel",mixins:[za,Y],components:{ButtonLoader:vs,Panel:is,FetchXmlTemplatesListItem:Uu,FetchXmlTemplateEditor:Yu},data(){return{templates:[],currentId:null,unsaved:!1,isLoading:!1,isSaving:!1,error:null}},computed:{currentTemplate(){return null===this.currentId?null:0===this.currentId?{}:Lr()(this.templates,{id:this.currentId})}},created(){this.loadTemplates(),this.$root.$on("update-templates",this.loadTemplates)},methods:{initTemplate(){this.currentId=0},selectTemplate(t){this.unsaved&&!confirm(this.__("You have unsaved changed in current templates. Switch to another?","integration-cds"))||(this.currentId=t,this.unsaved=!1)},loadTemplates(){return this.isLoading=!0,this.error=null,w().get("fetch_xml_templates").then(t=>{this.templates=t.data.data}).catch(t=>{this.error("Failed to load templates: "+t.message)}).finally(()=>{this.isLoading=!1})},upsertTemplate(t){let e;this.isSaving=!0,e=t.id>0?w().put("fetch_xml_templates/"+t.id,t):w().post("fetch_xml_templates",t),e.then(()=>{this.loadTemplates().then(()=>{const e=Lr()(this.templates,{name:t.name});this.selectTemplate(e.id)}),this.unsaved=!1,this.$messageService.success("Template has been saved successfully.")}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.isSaving=!1})},deleteTemplate(t){const e=Lr()(this.templates,{id:t});confirm(`Delete template '${e.name}'?`)&&(this.isLoading=!0,w().delete("fetch_xml_templates/"+e.id).then(()=>{null!==this.currentId&&this.currentId===t&&(this.currentId=null),this.loadTemplates(),this.$messageService.success("Template deleted successfully.")}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.isLoading=!1}))}}},Ju=Qu,Zu=Object(L["a"])(Ju,Ou,Ru,!1,null,null,null),tm=Zu.exports,em=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[s("div",{staticClass:"col"},[s("div",{staticClass:"mb-3"},[this.showForm?t._e():s("ButtonLoader",{attrs:{"btn-class":"btn-success",loading:t.loading,error:t.error},on:{click:t.showFormForm}},[t._v(" "+t._s(t.__("Add new","integration-cds"))+" ")])],1),this.showForm?s("WebhooksForm",{attrs:{gravity_forms:t.gravityForms,elementor_forms:t.elementorForms,premium_forms:t.premiumForms,webhook_data:t.webhookData},on:{hookAdded:t.hookAdded}}):t._e(),s("div",{staticClass:"mt-3"},[this.showForm?s("ButtonLoader",{attrs:{"btn-class":"btn btn-danger ml-1 button-delete",loading:this.loading},on:{click:t.hideCreateForm}},[t._v(" "+t._s(t.__("Cancel","integration-cds"))+" ")]):t._e()],1)],1),s("div",[s("table",{staticClass:"table mt-3"},[s("tbody",[s("tr",[s("td",[t._v("File size direct upload (kb)")]),s("td",[s("InputControl",{ref:"fileSize",attrs:{disabled:this.loading,id:t.fileSize,name:"fileSize",description:"If you upload a file through a form, please note:<br/>\n          - File size is encoded, and delimitations are approximate. Ensure that your system can handle the encoding correctly."},on:{change:function(e){return t.updateWebhookSettings(e)}},model:{value:t.fileSize,callback:function(e){t.fileSize=e},expression:"fileSize"}})],1)])])])]),s("div",{staticClass:"row mt-3"},[t.webhooks.length?s("div",{staticClass:"col"},[s("table",{staticClass:"table"},[s("thead",{staticClass:"thead-light"},[s("tr",[s("th",[t._v("Name")]),s("th",{staticClass:"w-25"},[t._v("Topic")]),s("th",[t._v("Target URL")]),s("th",[t._v("Form Type")]),s("th",[t._v("Form ID")]),s("th",[t._v("Description")]),s("th"),s("th")])]),s("tbody",t._l(t.webhooks,(function(e){return s("tr",{key:e.id,class:{"text-muted":!e.enabled}},[s("td",[t._v(" "+t._s(e.post_name)+" ")]),s("td",[t._v(" "+t._s(e.icds_webhook_topic)+" ")]),s("td",[t._v(" "+t._s(e.icds_webhook_target)+" ")]),s("td",[t._v(" "+t._s(e.icds_webhook_form_type)+" ")]),s("td",[t._v(" "+t._s(e.icds_webhook_form_id)+" ")]),s("td",[t._v(" "+t._s(e.icds_webhook_description)+" ")]),s("td",[e.enabled?s("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.loading},on:{click:function(s){return t.updateWebhook(e.id)}}},[t._v("Update ")]):t._e(),t._v("  "),e.enabled?s("button",{staticClass:"btn btn-info",attrs:{type:"button",disabled:t.loading},on:{click:function(s){return t.disableWebhook(e.id)}}},[t._v("Disable ")]):s("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.loading},on:{click:function(s){return t.enableWebhook(e.id)}}},[t._v("Enable ")])]),s("td",[s("button",{staticClass:"btn btn-danger",attrs:{type:"button",disabled:t.loading},on:{click:function(s){return t.deleteWebhook(e.id)}}},[t._v("× ")])])])})),0)])]):t.loading?s("div",{staticClass:"col"},[s("Spinner")],1):t.error?s("div",{staticClass:"col"},[s("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))])]):t._e()])])},sm=[],im=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"col-4 form-group"},[s("label",{attrs:{for:"name"}},[t._v(t._s(t.__("Name","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"name",staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),s("div",{staticClass:"col-4 form-group"},[s("label",{attrs:{for:"description"}},[t._v(t._s(t.__("Description","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],ref:"description",staticClass:"form-control",attrs:{type:"text",id:"description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),s("div",{staticClass:"col-4 form-group"},[s("label",{attrs:{for:"target"}},[t._v(t._s(t.__("Request URL","integration-cds")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.target,expression:"target"}],ref:"target",staticClass:"form-control",attrs:{type:"text",id:"target"},domProps:{value:t.target},on:{input:function(e){e.target.composing||(t.target=e.target.value)}}})]),s("div",{staticClass:"col-4 form-group"},[s("label",{attrs:{for:"topic"}},[t._v(t._s(t.__("Topic","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.topic,expression:"topic"}],ref:"topic",staticClass:"custom-select",attrs:{disabled:t.loading,id:"topic"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.topic=e.target.multiple?s:s[0]},function(e){return t.selectTopic()}]}},[s("option",{attrs:{value:"form/created"}},[t._v(t._s(t.__("Form created","integration-cds")))]),s("option",{attrs:{value:"form/updated"}},[t._v(t._s(t.__("Form updated","integration-cds")))]),s("option",{attrs:{value:"user/created"}},[t._v(t._s(t.__("User created","integration-cds")))]),s("option",{attrs:{value:"user/updated"}},[t._v(t._s(t.__("User updated","integration-cds")))]),s("option",{attrs:{value:"user/deleted"}},[t._v(t._s(t.__("User deleted","integration-cds")))])])]),t.user_form?t._e():s("div",{staticClass:"col-4 form-group"},[s("label",{attrs:{for:"formType"}},[t._v(t._s(t.__("Form Type","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form_type,expression:"form_type"}],ref:"formType",staticClass:"custom-select",attrs:{disabled:t.loading,id:"form_type"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.form_type=e.target.multiple?s:s[0]},function(e){return t.selectFormType()}]}},[s("option",{attrs:{selected:""},domProps:{value:t.formTypeAll}},[t._v(t._s(t.__("All Forms","integration-cds")))]),s("option",{domProps:{value:t.formTypePremium}},[t._v(t._s(t.__("Premium Forms","integration-cds")))]),s("option",{domProps:{value:t.formTypeGravity}},[t._v(t._s(t.__("Gravity Forms","integration-cds")))]),s("option",{domProps:{value:t.formTypeElementor}},[t._v(t._s(t.__("Elementor Forms","integration-cds")))]),s("option",{domProps:{value:t.formTypeCustom}},[t._v(t._s(t.__("Custom Forms","integration-cds")))])])]),"all"!==t.form_type&&"custom"!==t.form_type?s("div",{staticClass:"col-4 form-group"},[s("label",{attrs:{for:"form_id"}},[t._v(t._s(t.__("Form Name","integration-cds")))]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form_id,expression:"form_id"}],ref:"formId",staticClass:"custom-select",attrs:{disabled:t.loading,id:"form_id"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.form_id=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"all",selected:""}},[t._v("All forms")]),t._l(t.selectedFormType,(function(e,i){return s("option",{key:i,domProps:{value:e.value}},[t._v(" "+t._s(e.name)+" ")])}))],2)]):t._e(),s("div",{staticClass:"d-flex"},[this.webhook?t._e():s("ButtonLoader",{attrs:{"btn-class":"btn btn-primary ml-1",loading:this.loading},on:{click:t.addNew}},[t._v(" "+t._s(t.__("Add","integration-cds"))+" ")]),this.webhook?s("ButtonLoader",{attrs:{"btn-class":"btn btn-primary ml-1",loading:this.loading},on:{click:function(e){return t.update(t.webhook.id)}}},[t._v(" "+t._s(t.__("Update","integration-cds"))+" ")]):t._e()],1)])},am=[];const nm="all",om="premium",rm="gravity",lm="elementor",cm="custom";var dm={components:{ButtonLoader:vs},mixins:[Y],props:["gravity_forms","premium_forms","elementor_forms","webhook_data"],data(){return{loading:!1,gravity:this.gravity_forms,elementor:this.elementor_forms,premium:this.premium_forms,webhook:this.webhook_data,name:"",description:"",topic:"",target:"",form_type:0,form_id:"",selectedFormType:"",enabled:!0,user_form:!1}},computed:{formTypeAll(){return nm},formTypePremium(){return om},formTypeGravity(){return rm},formTypeElementor(){return lm},formTypeCustom(){return cm}},created(){this.webhook&&(this.name=this.webhook.post_name,this.topic=this.webhook.icds_webhook_topic,this.form_id=this.webhook.icds_webhook_form_id,this.form_type=this.webhook.icds_webhook_form_type,this.description=this.webhook.icds_webhook_description,this.target=this.webhook.icds_webhook_target,this.enabled=this.webhook.enabled,this.selectTopic(),this.selectFormType())},methods:{selectTopic(){this.topic.includes("user/")?(this.form_type=this.form_id="all",this.user_form=!0):this.user_form=!1},selectFormType(){switch(this.form_type){case nm:case cm:return;case rm:return void(this.selectedFormType=Ut()(this.gravity_forms,t=>({name:t.title,value:t.id})));case lm:return void(this.selectedFormType=Ut()(this.elementor_forms,t=>({name:t.label,value:t.value})));case om:return void(this.selectedFormType=Ut()(this.premium_forms,t=>({name:t.name,value:t.id})))}},update(t){this.loading=!0,w().patch("webhooks/"+t,{name:this.name,description:this.description,topic:this.topic,target:this.target,form_type:this.form_type,form_id:this.form_id,enabled:this.enabled}).then(this.fetchWebhooks).then(()=>{this.$messageService.success("Webhook updated successfully.")}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.loading=!1,this.$emit("hookAdded")})},addNew(){this.loading=!0,w().post("webhooks",{name:this.name,description:this.description,topic:this.topic,target:this.target,form_type:this.form_type,form_id:this.form_id}).then(t=>{this.loading=!1,this.$messageService.success(this.__("Webhook has been created successfully.","integration-cds"))}).catch(t=>{this.$messageService.error(this.__("Error Webhook creating."+t.message,"integration-cds"))}).finally(()=>{this.loading=!1,this.$emit("hookAdded")})}}},um=dm,mm=Object(L["a"])(um,im,am,!1,null,"6b4e7f77",null),pm=mm.exports,gm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("div",{staticClass:"d-flex"},[s("input",{staticClass:"form-control",attrs:{type:"text",disabled:t.isDefined||t.updating,id:t.id},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)}}}),s("div",{staticClass:"ml-3",staticStyle:{width:"17px"}},[t.updating?s("Spinner",{attrs:{width:16}}):t._e()],1)]),t.isDefined?s("small",{staticClass:"form-text text-muted"},[t._v(t._s(t.__("Defined in wp-config.php","integration-cds")))]):t._e(),s("small",{staticClass:"d-block mt-2",domProps:{innerHTML:t._s(t.description)}})])},hm=[],fm={name:"InputControl",components:{Spinner:ps},mixins:[Y],props:["value","id","description","isDefined","updating"]},vm=fm,_m=Object(L["a"])(vm,gm,hm,!1,null,"421fd3f4",null),bm=_m.exports,ym={name:"WebhooksPanel",components:{InputControl:bm,WebhooksForm:pm,ButtonLoader:vs,Spinner:ps,Panel:is},mixins:[za,Y],data(){return{webhooks:[],gravityForms:[],premiumForms:[],webhookData:null,elementorForms:[],loading:!1,showForm:!1,error:null,fileSize:0}},created(){this.fetchWebhooks(),this.fetchWebhookSettings(),Xe()&&this.fetchForms()},methods:{fetchWebhookSettings(){return this.loading=!0,this.error=null,w().get("webhook_settings").then(t=>{this.fileSize=t.data.settings.direct_file_upload}).catch(t=>{this.error="Failed to load form registrations. "+t.message}).finally(()=>{this.loading=!1})},updateWebhookSettings(t){this.fileSize=t,this.loading=!0,w().post("webhook_settings",{direct_file_upload:this.fileSize}).then(()=>{this.loading=!1,this.$messageService.success("Settings has been saved successfully.")}).catch(t=>{this.error=t.message}).finally(()=>{this.loading=!1})},showFormForm(){this.webhookData=null,this.showForm=!0},hideCreateForm(){this.showForm=!1},hookAdded(){this.hideCreateForm(),this.fetchWebhooks()},fetchWebhooks(){return this.loading=!0,w().get("webhooks").then(t=>{this.webhooks=t.data}).catch(t=>{this.error=t.message}).finally(()=>{this.loading=!1})},fetchForms(){return this.loading=!0,w().get("forms_list").then(t=>{this.gravityForms=t.data.gravity,this.elementorForms=t.data.elementor,this.premiumForms=t.data.premium}).catch(t=>{this.error=t.message}).finally(()=>{this.loading=!1})},updateWebhook(t){this.showForm=!1;const e=Lr()(this.webhooks,{id:t});this.loading=!0,w().get("webhooks/"+e.id).then(t=>{this.webhookData=t.data,this.showForm=!0}).catch(t=>{this.$messageService.error(t.message),this.showForm=!1}).finally(()=>{this.loading=!1})},enableWebhook(t){const e=Lr()(this.webhooks,{id:t});this.loading=!0,w().patch("webhooks/"+e.id,{enabled:!0}).then(this.fetchWebhooks).then(()=>{this.$messageService.success("Webhook enabled successfully.")}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.loading=!1})},disableWebhook(t){const e=Lr()(this.webhooks,{id:t});this.loading=!0,w().patch("webhooks/"+e.id,{enabled:!1}).then(this.fetchWebhooks).then(()=>{this.$messageService.success("Webhook disabled successfully.")}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.loading=!1})},deleteWebhook(t){const e=Lr()(this.webhooks,{id:t});confirm(`Delete webhook '${e.icds_webhook_topic}'?`)&&(this.loading=!0,w().delete("webhooks/"+e.id).then(this.fetchWebhooks).then(()=>{this.$messageService.success("Webhook deleted successfully.")}).catch(t=>{this.$messageService.error(t.message)}).finally(()=>{this.loading=!1}))}}},Cm=ym,Sm=(s("b99c"),Object(L["a"])(Cm,em,sm,!1,null,"33e10f98",null)),wm=Sm.exports,km=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Panel",{attrs:{meta:t.meta}},[t.isPremiumAvailable?[s("ImportExportPanel",{attrs:{meta:t.components["import-export"]}}),s("hr")]:t._e(),s("ConfigurationFlagsTable",{attrs:{flags:t.advFlags,updating:t.loading.updateAdvSettings},on:{updateConfFlagValue:t.setAdvFlag}})],2)},xm=[],Tm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h5",[t._v(t._s(t.__("Advanced settings","integration-cds"))+".")]),s("table",{staticClass:"table mt-3"},[t._m(0),s("tbody",t._l(t.flags,(function(e,i){return s("tr",{key:i},[s("td",[t._v(t._s(i))]),s("td",[s(t.getControlByType(e.type),{tag:"component",attrs:{id:i,value:t.getControlValue(e),description:e.description,options:e.options,isDefined:"const"===e.source,updating:t.updating&&t.updatingAttribute===i,attributes:e.attributes},on:{change:function(e){return t.updateValue(i,e)}}})],1)])})),0)])])},Nm=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-dark"},[s("tr",[s("th",[t._v("Option")]),s("th",[t._v("Value")])])])}],Pm=(s("5377"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"custom-control custom-switch"},[s("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",disabled:t.isDefined||t.updating,id:t.id},domProps:{checked:!0===t.value},on:{change:function(e){return t.$emit("change",e.target.checked)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:t.id}},[t.isDefined?s("small",{staticClass:"form-text text-muted"},[t._v(t._s(t.__("Defined in wp-config.php","integration-cds")))]):t._e()])]),t.updating?s("Spinner",{staticStyle:{"margin-top":"0.15625rem"},attrs:{width:16}}):t._e()],1),s("small",{staticClass:"d-block mt-2",domProps:{innerHTML:t._s(t.description)}})])}),Fm=[],Am={name:"BooleanControl",components:{Spinner:ps},mixins:[Y],props:["value","id","description","isDefined","updating"]},Dm=Am,Em=Object(L["a"])(Dm,Pm,Fm,!1,null,"53f6993e",null),$m=Em.exports,Lm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("div",{staticClass:"d-flex"},[s("select",t._b({staticClass:"form-control",attrs:{id:t.id,disabled:t.isDefined||t.updating},on:{blur:t.handleEvents}},"select",t.attributes,!1),t._l(t.options,(function(e,i){return s("option",{key:t.id+" - "+i,domProps:{value:i,selected:t.isArray(t.value)?t.value.includes(i):t.value===i}},[t._v(t._s(e)+" ")])})),0),s("div",{staticClass:"ml-3",staticStyle:{width:"17px"}},[t.updating?s("Spinner",{attrs:{width:16}}):t._e()],1)]),t.isDefined?s("small",{staticClass:"form-text text-muted"},[t._v(t._s(t.__("Defined in wp-config.php","integration-cds")))]):t._e(),s("small",{staticClass:"d-block mt-2",domProps:{innerHTML:t._s(t.description)}})])},Om=[],Rm=s("41ca"),Im=s.n(Rm),Mm=s("6747"),Vm=s.n(Mm),jm={name:"SelectControl",components:{Spinner:ps},mixins:[Y],props:["value","id","options","description","isDefined","updating","attributes"],methods:{isArray:Vm.a,handleEvents(t){let e=this.attributes.multiple?Im()(t.target.options).filter({selected:!0}).map("value").value():t.target.value;this.$emit("change",e)}}},Bm=jm,Um=Object(L["a"])(Bm,Lm,Om,!1,null,"fe8d0692",null),qm=Um.exports,zm=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group"},[s("div",{staticClass:"d-flex"},[s("textarea",{staticClass:"form-control",attrs:{id:t.id,disabled:t.isDefined||t.updating,rows:"6"},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)}}}),s("div",{staticClass:"ml-3",staticStyle:{width:"17px"}},[t.updating?s("Spinner",{attrs:{width:16}}):t._e()],1)]),t.isDefined?s("small",{staticClass:"form-text text-muted"},[t._v(t._s(t.__("Defined in wp-config.php","integration-cds")))]):t._e(),s("small",{staticClass:"d-block mt-2",domProps:{innerHTML:t._s(t.description)}})])},Wm=[],Km={name:"InputControl",components:{Spinner:ps},mixins:[Y],props:["value","id","description","isDefined","updating"]},Hm=Km,Xm=Object(L["a"])(Hm,zm,Wm,!1,null,"73a4069d",null),Ym=Xm.exports,Gm=s("c5a2"),Qm=s.n(Gm);const Jm={bool:$m,string:bm,string_long:Ym,select:qm};var Zm={name:"ConfigurationFlagsTable",components:{Spinner:ps},mixins:[X,Y],props:{flags:{type:Object,require:!0},updating:{type:Boolean,require:!0}},data(){return{updatingAttribute:""}},watch:{isConnected:{handler(t){!0===t&&this.$nextTick(()=>{this.loadComponentsOptions()})},immediate:!0}},methods:{updateValue(t,e){this.updatingAttribute=t,this.flags[t]["value"]=e,this.$emit("updateConfFlagValue",{attribute:t,value:e})},getControlByType(t){var e;return null!==(e=Jm[t])&&void 0!==e?e:bm},getControlValue(t){return void 0===t.value?t.default:t.value},loadComponentsOptions(){w().get("entity_metadata/contact").then(t=>{let e=t.data.metadata.Attributes;e=ji()(e,t=>null===t.AttributeOf&&"VirtualType"!==t.AttributeTypeName.Value&&null!==t.SourceType),e=Kt()(e,t=>t.DisplayName.UserLocalizedLabel?t.DisplayName.UserLocalizedLabel.Label:t.LogicalName),e=Qm()(e,(t,e)=>(t[e.LogicalName]=e.DisplayName.UserLocalizedLabel?e.DisplayName.UserLocalizedLabel.Label:e.LogicalName,t),{_:"- All -"}),this.flags["ICDS_USER_BINDING_COLUMNS"].options=e})}}},tp=Zm,ep=Object(L["a"])(tp,Tm,Nm,!1,null,"b1c6cdca",null),sp=ep.exports;const ip=window.icdsSystemInformation,ap=window.icdsLoggingVerbosity,np=window.icdsRecentLogRecords,op=window.icdsAdvancedSettings;var rp={name:"StatusPanel",components:{Panel:is,ConfigurationFlagsTable:sp,ImportExportPanel:bi},mixins:[X,ra,Y],props:["meta"],data(){return{loading:{verbosity:!1,logNotifications:!1,updateAdvSettings:!1,logs:!1},error:{verbosity:null,logNotifications:null,updateAdvSettings:null},advFlags:op}},computed:{...Object(c["c"])({components:"components/components"}),isPremiumAvailable:Xe,statusLabel(){switch(this.connStatus){case B:return"Not connected";case q:return"Connected";case U:return"Connecting..."}return"Unknown status"},siteRegistrationLabel(){if(this.isCheckingRegistration)return this.__("Checking...","integration-cds");let t=this.isSiteRegistered?this.__("Registered","integration-cds"):this.__("Not registered","integration-cds");return null!==this.registrationError&&(t=`${t} (${this.registrationError})`),t},logLevel:{get(){return this.$store.state.settings.logging.verbosity},set(t){this.loading.verbosity=!0,this.error.verbosity=null,this.$store.dispatch("settings/logging/changeVerbosity",t).then(()=>{this.loading.verbosity=!1,this.$messageService.success("Logging verbosity has been updated successfully.")}).catch(t=>{this.loading.verbosity=!1,this.error.verbosity=t.message})}},logNotificationsEnabled:{get(){return this.$store.state.settings.logging.notificationsEnabled},set(t){this.loading.logNotifications=!0,this.error.logNotifications=null,this.$store.dispatch("settings/logging/changeNotificationsEnabling",t).then(()=>{this.loading.logNotifications=!1,this.$messageService.success("Notifications settings has been saved successfully.")}).catch(t=>{this.loading.logNotifications=!1,this.error.logNotifications=t.message})}},logNotificationsLevel:{get(){return this.$store.state.settings.logging.notificationsVerbosity},set(t){this.loading.logNotifications=!0,this.error.logNotifications=null,this.$store.dispatch("settings/logging/changeNotificationsVerbosity",t).then(()=>{this.loading.logNotifications=!1,this.$messageService.success("Notifications settings has been saved successfully.")}).catch(t=>{this.loading.logNotifications=!1,this.error.logNotifications=t.message})}},logNotificationsFrequency:{get(){return this.$store.state.settings.logging.notificationsFrequency},set(t){this.loading.logNotifications=!0,this.error.logNotifications=null,this.$store.dispatch("settings/logging/changeNotificationsFrequency",t).then(()=>{this.loading.logNotifications=!1,this.$messageService.success("Notifications settings has been saved successfully.")}).catch(t=>{this.loading.logNotifications=!1,this.error.logNotifications=t.message})}},logLevels(){return ap},logTail(){return np},logExists(){return Fa()(this.logTail)>0},systemInfo(){return ip},recommendations(){return ip.recommendations},logsStoreInDb(){return this.advFlags.ICDS_DB_LOGS&&this.advFlags.ICDS_DB_LOGS.value}},methods:{downloadDiagnostics(){let t=JSON.stringify(ip),e=document.createElement("a");e.href="data:attachment/text,"+encodeURI(t),e.target="_blank",e.download="icds_diagnostic.json",e.style.display="none",document.body.appendChild(e),e.click(),e.remove()},removeLogs(){this.loading.logs=!0,S().post("remove_logs").then(()=>{this.$messageService.success("Logs has been removed successfully.")}).catch(()=>{this.$messageService.error("Cannot remove logs")}).finally(()=>{this.loading.logs=!1})},downloadLogs(){this.loading.logs=!0;let t={responseType:"blob"};this.logsStoreInDb&&(t={}),S().get("logs",t).then(t=>{const e=document.createElement("a");let s="";this.logsStoreInDb?(s="icds_logs_"+(new Date).toISOString().split("T")[0]+".txt",e.href="data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(t.data.logs,null,4))):(s=t.headers["content-disposition"].match(/.*filename=(.*)/)[1],e.href=window.URL.createObjectURL(t.data)),e.setAttribute("download",s),document.body.appendChild(e),e.click(),e.remove()}).catch(()=>{this.$messageService.error("Log files not found.")}).finally(()=>{this.loading.logs=!1})},updateLogNotificationsFrequency(t){this.logNotificationsFrequency=parseInt(t.target.value)||0},setAdvFlag({attribute:t,value:e}){this.advFlags[t].value=e,this.advFlags[t].isChanged=!0,this.saveAdvFlags()},saveAdvFlags(){this.loading.updateAdvSettings=!0,this.error.updateAdvSettings=null;let t=zt()(Da()(this.advFlags,"isChanged"),"value");S().post("advanced_settings",{settings:t}).then(()=>{this.loading.updateAdvSettings=!1,this.$messageService.success("Settings has been saved successfully.")}).catch(t=>{this.loading.updateAdvSettings=!1,this.error.updateAdvSettings=t.message})}}},lp=rp,cp=(s("d689"),Object(L["a"])(lp,km,xm,!1,null,"e1e7c9da",null)),dp=cp.exports;const up=window.icdsUseAdvancedUserBinding&&window.icdsUseAdvancedUserBinding[0],mp={id:"status",title:"Status",order:100,panel:Ba,description:"Information about your Dataverse Integration deployment.",icon:{element:"fa",attributes:{icon:"signal"}},class:"active"},pp={id:"connection",title:"Connection",order:200,panel:tn,description:"Connect WordPress to your Dataverse organization on this page.",documentationUrl:"https://docs.alexacrm.com/getting-started/",icon:{element:"fa",attributes:{icon:"plug"}}},gp={id:"cache",title:"Cache",order:600,panel:cn,description:"Cache storage",icon:{element:"fa",attributes:{icon:"boxes"}}},hp={id:"forms",title:"Forms Editor",order:340,panel:Sc,description:"Register your forms to capture form submission to Dataverse.",documentationUrl:"https://docs.alexacrm.com/forms/forms/",isHidden:_c,parent:"Forms",icon:{element:"fa",attributes:{icon:["fab","wpforms"]}},licenseRequired:N},fp={id:"forms-global-settings",title:"Forms Global Settings",order:345,panel:jd,description:"Global settings for PowerApps forms.",documentationUrl:"https://docs.alexacrm.com/forms/forms/",isHidden:_c,parent:"Forms",icon:{element:"fa",attributes:{icon:["fab","wpforms"]}},licenseRequired:N},vp={id:"templates",title:"Twig Templates",order:360,panel:Lu,description:"Create custom templates to use with pages.",documentationUrl:"https://docs.alexacrm.com/twig/",isHidden:Au,parent:"Templates",icon:{element:"fa",attributes:{icon:["far","file-code"]}},licenseRequired:k},_p={id:"fetch-xml-templates",title:"FetchXML Templates",order:365,panel:tm,description:"Create custom fetchXML templates to use in the entity binding and lookup filters.",documentationUrl:"https://docs.alexacrm.com/fetchxml/#using-fetchxml-template",isHidden:Gu,parent:"Templates",icon:{element:"fa",attributes:{icon:["far","file-code"]}},licenseRequired:k},bp={id:"binding",title:"Page Binding",order:380,panel:aa,description:"Configure entity binding settings.",documentationUrl:"https://docs.alexacrm.com/binding/table-binding/",isHidden:ta,parent:"Bindings",icon:{element:"fa",attributes:{icon:"project-diagram"}},licenseRequired:k},yp={id:"user-binding",title:"User Binding",order:400,panel:up?Oo:qs,description:"Configure user binding and authorization settings.",documentationUrl:"https://docs.alexacrm.com/binding/user-binding/",isHidden:Vs,parent:"Bindings",icon:{element:"fa",attributes:{icon:"project-diagram"}},licenseRequired:P},Cp={id:"webhooks",title:"Webhooks",order:450,panel:wm,description:"Manage webhooks.",documentationUrl:"https://docs.alexacrm.com/webhooks/",icon:{element:"fa",attributes:{icon:"cogs"}}},Sp={id:"recaptcha",title:"reCAPTCHA",order:500,panel:On,description:"Integrate reCAPTCHA into your forms.",documentationUrl:"https://docs.alexacrm.com/forms/forms/#recaptcha-support",icon:{element:"fa",attributes:{icon:"puzzle-piece"}}},wp={id:"import-export",title:"Import / Export",order:2e3,panel:bi,description:"Import and export plugin settings.",isHidden:hi,icon:{element:"fa",attributes:{icon:"download"}},isNotMenuItem:!0},kp={id:"settings",title:"Settings",description:"Plugin settings.",order:700,panel:dp,icon:{element:"fa",attributes:{icon:"cog"}}},xp={id:"addons",title:"Addons",order:5e3,panel:As,isHidden:Ts,icon:{element:"fa",attributes:{icon:"vector-square"}}},Tp={id:"about",title:"About",order:1e4,panel:Un,icon:{element:"fa",attributes:{icon:"info"}}};function Np(t){const e=window.icdsComponents||[];m()([...Object.values(i),...e],e=>t.commit("components/register",e)),t.commit("components/selectComponent",t.getters["components/ordered"][0])}var Pp=s("ecee"),Fp=s("c074"),Ap=s("b702"),Dp=s("f2d1"),Ep=s("ad3d");s("e607"),s("a64c");a["a"].config.productionTip=!1,Pp["c"].add([Fp["l"],Ap["c"],Ap["b"],Fp["q"],Fp["s"],Fp["k"],Fp["i"],Fp["r"],Ap["a"],Fp["o"],Fp["g"],Fp["h"],Fp["j"],Fp["t"],Fp["m"],Fp["p"],Fp["d"],Fp["b"],Fp["a"],Fp["e"],Fp["f"],Fp["c"],Fp["n"],Dp["a"]]),a["a"].component("fa",Ep["a"]),a["a"].use(St,{store:Ye}),Np(Ye),se()(window.icdsSettings,(t,e)=>{Ye.hasModule(["settings",e])?Ye.commit(`settings/${e}/initialize`,t):console.log(`Settings module [${e}] has not been implemented.`)}),new a["a"]({store:Ye,render:t=>t(jt),mounted(){Ye.dispatch("connectionStatus/refresh").then(()=>{Xe()&&(Ye.dispatch("registrationStatus/refresh"),Ye.dispatch("licenseStatus/refresh"))})}}).$mount("#app")},fb4a:function(t,e,s){},ffee:function(t,e,s){"use strict";s("d6f2")}});